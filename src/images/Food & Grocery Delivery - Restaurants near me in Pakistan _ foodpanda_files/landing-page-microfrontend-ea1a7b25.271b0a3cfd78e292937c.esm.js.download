(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[82909],{"2d124a0b218a7e36864b":(e,t,s)=>{"use strict";s.d(t,{Gl:()=>l,Up:()=>d,bP:()=>n,eL:()=>o,fB:()=>r,oY:()=>a,tS:()=>c,yY:()=>_,zB:()=>i});const o="dhhPerseusSessionId",i="perseusSessionId",a="dhhPerseusGuestId",r="perseusGuestId",n="dhhPerseusHitId",d="perseusHitId",c="perseus-client-id",l="perseus-session-id",_="no-user-interaction"},"9ccf15792613d050c562":(e,t,s)=>{"use strict";s.d(t,{Xy:()=>d});var o=s("69084d01d3449fc1bc27"),i=s("2d124a0b218a7e36864b"),a=s("5e0fe70cf56a64c5e36f");s("9302435e81c621e827fb");const r=(0,o.createContext)(null);function n(e,t){if(!e){const e=(0,a.ls)();return t===i.oY?(0,a.Z5)(e):t===i.eL&&(0,a.cr)(e),e}return e}function d(){var e;const t=(0,o.useContext)(r);return n(null!==(e=null==t?void 0:t.sessionID)&&void 0!==e?e:(0,a.DD)(),i.eL)}},a88311e1cf78eb357444:(e,t,s)=>{"use strict";s.d(t,{zZ:()=>a});var o=s("8bf191ce59421ef0bd7c");s("b46c7acb1d237430a90d"),s("5e0fe70cf56a64c5e36f"),s("ec247fcea0c84d047768").Buffer;const i="dps-session-id",a=e=>{let t="";return t=e?(0,o.e)(i,void 0,e.universalCookies):(0,o.e)(i),t}},"66ada238672318e3866c":(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var o=s("2ffdf8954cbe6ce77cdd"),i=s("d7c73929d393992fc0bc"),a=s("2d124a0b218a7e36864b"),r=s("5e0fe70cf56a64c5e36f");const n=e=>{const{perseusNoUserInteraction:t=!1,withPerseusHeaders:s=!0}=e||{};if(!s)return{};if(!(0,o.O)(i.LW.CENTRALISED_PERSEUS_HEADERS))return{};const n={};if(t)return n[a.tS]=a.yY,n[a.Gl]=a.yY,n;const d=(0,r.Sz)(),c=(0,r.DD)();return d&&(n[a.tS]=d),c&&(n[a.Gl]=c),n}},"5e0fe70cf56a64c5e36f":(e,t,s)=>{"use strict";s.d(t,{DD:()=>h,NZ:()=>_,QE:()=>g,QH:()=>T,Sz:()=>u,Z5:()=>c,cr:()=>l,ls:()=>d,zT:()=>p});var o=s("7223e05b62f3d2685d2e"),i=s("8bf191ce59421ef0bd7c"),a=s("2d124a0b218a7e36864b");const r="0123456789";function n(e,t){void 0===t&&(t="abcdefghijklmnopqrstuvwxyz0123456789");let s="";for(let o=0;o<e;o++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}function d(){return(new Date).getTime()+"."+n(18,r)+"."+n(10)}function c(e){(0,o.p)(a.oY,e,6048e7)}function l(e){(0,o.p)(a.eL,e,18e5)}function _(){l((0,i.e)(a.eL)||d())}function p(){var e;e=d(),(0,o.p)(a.bP,e,36e5)}const E=e=>{let{localsKey:t,cookieKey:s}=e;return e=>(0,i.e)(s)},u=E({localsKey:a.fB,cookieKey:a.oY}),h=E({cookieKey:a.eL,localsKey:a.zB}),g=E({cookieKey:a.bP,localsKey:a.Up});function T(){if(!window.dataLayer||!Array.isArray(window.dataLayer))return;const e=window.dataLayer.push;window.dataLayer.push=function(t){return p(),_(),localStorage.setItem("push:TRACKING-EVENT::"+t.event,(0,i.e)(a.bP)),e.apply(window.dataLayer,[t])}}},"33ea6ae433143539cfd2":(e,t,s)=>{"use strict";s.d(t,{fz:()=>r,Mx:()=>n});let o=function(e){return e.LOAD_COMPLETE="document-load:complete",e}({});var i=s("e57816ce2d5f3e48376c");const a=()=>(function(e,t,s,o,i){window.appboy={},window.appboyQueue=[];for(var a="initialize destroy getDeviceId toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates requestContentCardsRefresh subscribeToContentCardsUpdates logCardImpressions logCardClick logCardDismissal logFeedDisplayed logContentCardsDisplayed logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick logInAppMessageHtmlClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages trackLocation stopWebTracking resumeWebTracking wipeData ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setLanguage ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.User.prototype.addAlias ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.TextAlignment ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.HtmlMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.ContentCards ab.ContentCards.prototype.getUnviewedCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.ControlCard ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed display.showContentCards display.hideContentCards display.toggleContentCards sharedLib".split(" "),r=0;r<a.length;r++){for(var n=a[r],d=appboy,c=n.split("."),l=0;l<c.length-1;l++)d=d[c[l]];d[c[l]]=new Function("return function "+n.replace(/\./g,"_")+"(){appboyQueue.push(arguments); return true}")()}appboy.getUser=function(){return new appboy.ab.User},appboy.getCachedFeed=function(){return new appboy.ab.Feed},appboy.getCachedContentCards=function(){return new appboy.ab.ContentCards},(i=t.createElement(s)).type="text/javascript",i.src="https://js.appboycdn.com/web-sdk/2.6/appboy.min.js",i.async=1,(o=t.getElementsByTagName(s)[0]).parentNode.insertBefore(i,o)}(window,document,"script"),window.appboy),r={event:"event-appboy-loaded"},n=e=>{let{clientId:t,onLoad:s,libLoader:r=a}=e;(0,i.v)().once(o.LOAD_COMPLETE,(()=>{window.appboy||(((e,t)=>{const s=e();s.initialize(t,{enableHtmlInAppMessages:!0}),s.display.automaticallyShowNewInAppMessages()})(r,t),s())}))}},"5af16fb544c2f0ab0997":(e,t,s)=>{"use strict";s.d(t,{FU:()=>d});var o=s("2ffdf8954cbe6ce77cdd"),i=s("214eccfc06814c553a3c"),a=s.n(i);let r=function(e){return e.CAPTCHA="global-captcha-interceptor",e}({});function n(e,t){const o={captchaPromise:null};return e.interceptors.response.use((e=>e),(async e=>(async(e,t,o)=>{var i;if(!e.response)return Promise.reject(e);const r=e.response,{withGlobalCaptchaHandler:n=!0}=null!==(i=r.config)&&void 0!==i?i:{};if(403!==(null==r?void 0:r.status)||!n||!(e=>"object"==typeof e.data&&null!=e.data&&"appId"in e.data&&"blockScript"in e.data)(r))return Promise.reject(e);const{waitForCaptchaToBeSolved:d}=await s.e(98006).then(s.bind(s,"e362abb6b90c2cc3e794"));return t.captchaPromise||(t.captchaPromise=d(r.data,o.urlToPageName).finally((()=>{t.captchaPromise=null}))),await t.captchaPromise,a()(e.config)})(e,o,t)))}const d=e=>{(0,o.O)(r.CAPTCHA)&&n(a(),e)}},"4d9c133d8eb8c4f04928":(e,t,s)=>{"use strict";s.d(t,{U:()=>l});var o=s("69084d01d3449fc1bc27"),i=s("918b1586c2878a66d052"),a=s("d7f2db0229e7c7df3214"),r=s("e57816ce2d5f3e48376c");const n=e=>{let{trackingData:t,pageType:s,userId:o}=e;return{event:t.eventName,pageType:s,userId:o,pageUrlPath:window.location.pathname}};function d(e){let{elementId:t,response:s,onSuccess:o,cb:d,pageType:c,userId:l}=e;!function(e){let{elementId:t,cb:s}=e;const o=document.getElementById(t);if(null===o)return void a.k.error({message:"PerimeterX : could not find captcha container element with given id, did you forget to pass captchaContainerId?"});o.innerHTML="";const i=document.createElement("div");i.id="px-captcha",o.appendChild(i),s&&s()}({elementId:t,cb:d}),window._pxAppId=s.appId,window._pxJsClientSrc=s.jsClientSrc,window._pxFirstPartyEnabled=s.firstPartyEnabled,window._pxVid=s.vid,window._pxUuid=s.uuid,window._pxHostUrl=s.hostUrl,window._pxreCaptchaTheme="light";const _=document.createElement("script");_.src=s.blockScript,document.getElementsByTagName("head")[0].appendChild(_),window._pxOnCaptchaSuccess=()=>{o(),(0,r.v)().emit(i.m,n({trackingData:{eventName:"captcha.solved"},pageType:c,userId:l}))};const p={trackingData:{eventName:"captcha.shown"},pageType:c,userId:l};(0,r.v)().emit(i.m,n(p))}var c=s("9302435e81c621e827fb");const l=e=>{let{onSuccess:t,response:s,pageType:i,className:a,elementId:r}=e;return(0,o.useEffect)((()=>{d({elementId:r,onSuccess:t,pageType:i,response:s})}),[t,i,s,r]),(0,c.jsx)("div",{id:r,className:a,"data-testid":r})}},"7cadacc473ea48975e0b":(e,t,s)=>{"use strict";s.d(t,{Q:()=>c});var o=s("8f58e784196e6568c885"),i=s.n(o),a=s("b04e82f77daf837f4b6c"),r=s("a071bef95e5f5901ba8b"),n=s("cdb14f6a7a13eea27c2f");const d="__PROVIDER_PROPS__.config",c=e=>{let t;if((0,n.s)()){const{platform:s,countryCode:o}={platform:r.Z.get("platform"),countryCode:r.Z.get("countryCode")};t=(0,a.Kb)(e,o,s)}else t=i()(window,""+d)?i()(window,""+d)[e]:i()(window,"VOLO.configuration")[e];if(void 0!==t)return t;throw new Error("Config value with key '"+e+"' does not exist.")}},"01d435122a70882cd84b":(e,t,s)=>{"use strict";s.d(t,{l:()=>o});let o=function(e){return e.BRAND="BRAND",e.CMS_API_URL="CMS_API_URL",e.COUNTRY_CODE="COUNTRY_CODE",e.CURRENCY_LOCALE="CURRENCY_LOCALE",e.CURRENCY_SYMBOL="CURRENCY_SYMBOL",e.DELIVERY_FEE_URL="DELIVERY_FEE_URL",e.DH_IMAGE_PROVIDER_URL="DH_IMAGE_PROVIDER_URL",e.DISCO_API_URL="DISCO_API_URL",e.DJINI_API_URL="DJINI_API_URL",e.FACEBOOK_APP_KEY="FACEBOOK_APP_KEY",e.FD_API_CART_API_CALCULATION_URL="FD_API_CART_API_CALCULATION_URL",e.FD_API_CART_CALCULATION_URL="FD_API_CART_CALCULATION_URL",e.FD_API_KEY="FD_API_KEY",e.FD_API_URL="FD_API_URL",e.FEATURE_IS_PICKUP_ENABLED="FEATURE_IS_PICKUP_ENABLED",e.FIREBASE_DYNAMIC_LINKS_URL="FIREBASE_DYNAMIC_LINKS_URL",e.FOOTER_SHOULD_SHOW_PAYMENT_LOGOS="FOOTER_SHOULD_SHOW_PAYMENT_LOGOS",e.GLOBAL_ENTITY_ID="GLOBAL_ENTITY_ID",e.GLOBAL_HELP_CENTER_URL="GLOBAL_HELP_CENTER_URL",e.GLOBAL_HELP_CENTER_URL_NEW="GLOBAL_HELP_CENTER_URL_NEW",e.GOOGLE_CLIENT_ID="GOOGLE_CLIENT_ID",e.GROCERIES_CHECKOUT_URL="GROCERIES_CHECKOUT_URL",e.GROCERIES_RESTAURANT_MENU_PAGE_URL="GROCERIES_RESTAURANT_MENU_PAGE_URL",e.HOME_PAGE_ONE_CTA="HOME_PAGE_ONE_CTA",e.LANGUAGE_CODE="LANGUAGE_CODE",e.LANGUAGE_ID="LANGUAGE_ID",e.LINKED_ACCOUNT="LINKED_ACCOUNT",e.LINGO_BASE_URL="LINGO_BASE_URL",e.LOCALE="LOCALE",e.PLATFORM="PLATFORM",e.REFRESH_TOKEN_LEEWAY="REFRESH_TOKEN_LEEWAY",e.SHOP_DESCRIPTION_CMS_ENABLED="SHOP_DESCRIPTION_CMS_ENABLED",e.STATIC_FD_API_URL="STATIC_FD_API_URL",e.TIMEZONE="TIMEZONE",e}({})},b04e82f77daf837f4b6c:(e,t,s)=>{"use strict";s.d(t,{hq:()=>E,Kb:()=>u,tu:()=>h});var o=s("ee6bb53310026da4b4bf"),i=s.n(o),a=s("8f58e784196e6568c885"),r=s.n(a),n=s("dcbd0a859343fa83ffbc");var d=s("f020b6b8ddbfe2de404b");const c={PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.ENVIRONMENT,l={},_=(e,t)=>e+"-"+t,p=(e,t,o)=>{if(!(e&&t&&o))return{};(0,d.n)(o)&&(o="production");try{return s("512e3f318f38ea42d97c")("./"+e+"/"+t+"/"+o+".ts").default}catch(e){const t=(0,n.S)(e);if(!function isModuleNotFoundError(e){const t=(0,n.S)(e);return t.message.includes("Module not found in bundle")||t.message.includes("Cannot find module")}(t))throw t}return{}},E=function(e,t,s){void 0===t&&(t="b2c");const o=_(t,e),a=r()(l,o);if(a&&null!=a&&a.CONFIG_LOADED)return a;s||(s=c);const n=["universal",t].reduce(((t,o)=>Object.assign({},t,p(o,"global","base"),p(o,"global",s),p(o,e,"base"),p(o,e,s))),{});return i()(l,o,Object.assign({},a,n,{CONFIG_LOADED:!0})),l[o]},u=function(e,t,s,o){return void 0===s&&(s="b2c"),r()(E(t,s,o),e)},h=function(e,t,s,o){void 0===s&&(s="b2c");const a=E(t,s,o),r=_(s,t);i()(l,r,Object.assign({},a,e))}},f0cafa8913e0682eb8aa:(e,t,s)=>{"use strict";s.d(t,{c:()=>a});var o=s("acbc6b67e8e0f7dc3dac"),i=s("b80adc6fce0f08f80775");class a extends i.J{constructor(e){super(),this.clientLogger=void 0,this.isInvalidToken=e=>0===e.length,this.init=()=>{const{env:e,version:t,clientToken:s,context:i,loggerName:a}=this.transportOptions;this.isInvalidToken(s)||"dev"===e?this.clientLogger=console:(o.fy.init({clientToken:s,site:"datadoghq.eu",forwardErrorsToLogs:!1,env:e,sampleRate:100,version:t}),this.clientLogger=o.fy.createLogger(a,{context:Object.assign({env:e,version:t},i)}))},this.shouldSkip=e=>Boolean(e.error),this.log=e=>{const{level:t,message:s,extraInfo:o}=e;switch(t){case"info":this.clientLogger.info(s,o);break;case"warning":this.clientLogger.warn(s,o);break;case"error":this.clientLogger.error(s,o);break;default:this.clientLogger.debug(s,o)}},this.transportOptions=e,this.clientLogger=console}}},"404b4de4e822b438eb89":(e,t,s)=>{"use strict";s.d(t,{s:()=>CustomError});var o=s("dcbd0a859343fa83ffbc");class CustomError extends Error{constructor(e){for(var t,s,i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];super(...a),this.sourceError=void 0,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor);const n=(0,o.S)(e);this.sourceError=n,this.name=this.constructor.name,this.message=null!==(s=null==e?void 0:e.message)&&void 0!==s?s:""}getExtraInfo(){let e={};return this.sourceError instanceof CustomError&&(e=Object.assign({},this.sourceError.getExtraInfo())),e=Object.assign({},e,this.extractExtraInfo()),e}}},c592b59d340f31b3d68a:(e,t,s)=>{"use strict";s.d(t,{F:()=>NetworkError});var o=s("4479fcf0adfb613e47d9"),i=s("404b4de4e822b438eb89");let a=function(e){return e.ERROR_RESPONSE_MESSAGE="errorResponseMessage",e.NETWORK_REQUEST_BODY="networkRequestBody",e.NETWORK_REQUEST_HEADER="networkRequestHeader",e.NETWORK_REQUEST_URL="networkRequestUrl",e.RAW_RESPONSE_BODY_TEXT="rawResponseBodyText",e.IS_EXTRA_SENTRY_DATA_PARTIAL="isExtraSentryDataPartial",e}({});class NetworkError extends i.s{constructor(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];super(e,...s),this.request=void 0,this.response=void 0;const i=e;i.isAxiosError&&(this.request=i.request,this.response=i.response)}extractExtraInfo(){const e={};try{var t,s,i;this.response&&(e[a.ERROR_RESPONSE_MESSAGE]=this.response.statusText),null!==(t=this.request)&&void 0!==t&&t.requestData&&(e[a.NETWORK_REQUEST_BODY]=this.request.requestData),null!==(s=this.request)&&void 0!==s&&s.requestURL&&(e[a.NETWORK_REQUEST_URL]=JSON.stringify(this.request.requestURL)),null!==(i=this.request)&&void 0!==i&&i.requestHeaders&&(e[a.NETWORK_REQUEST_HEADER]=JSON.stringify((0,o.g)(this.request.requestHeaders)))}catch(t){e[a.IS_EXTRA_SENTRY_DATA_PARTIAL]=!0}return e}}},dcbd0a859343fa83ffbc:(e,t,s)=>{"use strict";s.d(t,{S:()=>normalizeError});class NormalisedUnknownError extends Error{constructor(e){let t;try{t="Unknown error: "+JSON.stringify(e)}catch(s){t="Unknown error: "+e}super(t),this.unknownError=void 0,this.unknownError=e}}const o=NormalisedUnknownError;function normalizeError(e){return e instanceof Error?e:new o(e)}},d7c73929d393992fc0bc:(e,t,s)=>{"use strict";s.d(t,{LW:()=>a,SX:()=>i,ko:()=>r,m5:()=>o});const o="GTM:PUSH",i={AB_TEST_PARTICIPATED:"ab_test.participated",HOLDOUT_GROUP_PARTICIPATED:"holdout_group.participated"},a={REACT_USE_NEW_RENDER_METHODS:"react-18-use-new-render-methods",CSP_POLICY_ENABLED_MFE:"csp-policy-enabled-mfe",CSP_POLICY_REPORT_ONLY:"csp-policy-report-only",CSP_POLICY_OVERRIDES:"csp-policy-overrides",REFERRER_POLICY_ENABLED_MFE:"referrer-policy-enabled-mfe",REFERRER_POLICY_OVERRIDES:"referrer-policy-overrides",NOSNIFF_POLICY_ENABLED_MFE:"nosniff-policy-enabled-mfe",CENTRALISED_PERSEUS_HEADERS:"centralised-perseus-headers",CENTRALISED_LANGUAGE_HEADERS:"centralised-language-headers",CENTRALISED_APIKEY_HEADERS:"centralised-apikey-headers",URL_MAPPING:"url-mapping",ACTIVE_CONSENT:"customer-active-consent",SAVE_VOUCHER_EXPERIMENT:"save-voucher-experiment",REWARDS_FEATURE:"rewards-feature",YUU_INTEGRATION_ENABLED:"retention-yuu-integration",STAMP_CARD_ON_CART:"retention-stamp-card-on-cart",POINTS_REDEMPTIONS_ON_CART:"retention-points-redemption-on-cart"},r={[a.REACT_USE_NEW_RENDER_METHODS]:!1,[a.CSP_POLICY_ENABLED_MFE]:!1,[a.CSP_POLICY_REPORT_ONLY]:!0,[a.CSP_POLICY_OVERRIDES]:{},[a.REFERRER_POLICY_ENABLED_MFE]:!1,[a.REFERRER_POLICY_OVERRIDES]:"strict-origin-when-cross-origin",[a.NOSNIFF_POLICY_ENABLED_MFE]:!1,[a.CENTRALISED_PERSEUS_HEADERS]:!1,[a.CENTRALISED_LANGUAGE_HEADERS]:!1,[a.CENTRALISED_APIKEY_HEADERS]:!1,[a.URL_MAPPING]:!1,[a.ACTIVE_CONSENT]:""}},c59db15a68494350be73:(e,t,s)=>{"use strict";s.d(t,{$6:()=>i,P_:()=>o});const o=(0,s("69084d01d3449fc1bc27").createContext)({}),{Consumer:i,Provider:a}=o},"3af2f60910d933f70866":(e,t,s)=>{"use strict";s.d(t,{B:()=>r});s("69084d01d3449fc1bc27");var o=s("c59db15a68494350be73"),i=s("9302435e81c621e827fb");const a=(e,t)=>{const s={};return t.forEach((t=>{s[t]=e[t]})),s},r=(e,t)=>s=>(0,i.jsx)(o.$6,{children:o=>(0,i.jsx)(e,Object.assign({},s,{featureFlags:a(o,t)}))})},"2ffdf8954cbe6ce77cdd":(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var o=s("a071bef95e5f5901ba8b");function i(e){var t,s,i;if(null!==(t=window)&&void 0!==t&&null!==(s=t.__PROVIDER_PROPS__)&&void 0!==s&&null!==(i=s.featureFlags)&&void 0!==i&&i.hasOwnProperty(e))return window.__PROVIDER_PROPS__.featureFlags[e];{const t=o.Z.get("serverFeatureFlags");if(null!=t&&t.hasOwnProperty(e))return t[e]}return null}},"41f5b1e09a229f4ae4f6":(e,t,s)=>{"use strict";s.d(t,{H:()=>r});var o=s("e57816ce2d5f3e48376c"),i=s("d7c73929d393992fc0bc"),a=s("2ffdf8954cbe6ce77cdd");const r=e=>{let{featureFlagKey:t,holdoutVariation:s,pageType:r,locationParams:n}=e;const d=(0,a.O)("flagsWithHoldouts");if(null!=d&&d.hasOwnProperty(t)){const e=d[t];Object.entries(e).forEach((e=>{let[a,d]=e;(0,o.v)().emit(i.m5,Object.assign({event:i.SX.HOLDOUT_GROUP_PARTICIPATED},{featureFlagKey:t,pageType:r,holdoutVariation:s,holdoutKey:a,holdoutEvaluation:d},null!=n?n:{}))}))}}},c55204b543602064a263:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var o=s("69084d01d3449fc1bc27"),i=s("c59db15a68494350be73"),a=s("9302435e81c621e827fb");const r="fwf-",n=e=>{let{children:t,value:s}=e;const[n,d]=(0,o.useState)(s);return(0,o.useEffect)((()=>{if(!Boolean(localStorage.getItem("debug-fwf")))return;const e=()=>{const e=Object.entries(localStorage).reduce(((e,t)=>{let[s,o]=t;if(!s.startsWith(r))return e;const i=s.substr(r.length);try{e[i]=JSON.parse(o)}catch(t){e[i]=o}return e}),{});Object.keys(e).length&&d((t=>Object.assign({},t,e)))};return globalThis.addEventListener("storage",e),console.warn("You are running FeatureFlagProvider in DEBUG mode, please remove the debug key after use!"),()=>{globalThis.removeEventListener("storage",e)}}),[]),(0,a.jsx)(i.P_.Provider,{value:n,children:t})};n.displayName="FeatureFlagsProvider"},"42ac9e5158af13f9eafb":(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var o=s("69084d01d3449fc1bc27"),i=s("c59db15a68494350be73");const a=()=>{const e=(0,o.useContext)(i.P_);return(0,o.useCallback)((t=>e[t]),[e])}},"1e0a3e6bda82139e5a30":(e,t,s)=>{"use strict";s.d(t,{T:()=>o});const o=()=>window&&window.__PROVIDER_PROPS__&&window.__PROVIDER_PROPS__.userIPAddress?window.__PROVIDER_PROPS__.userIPAddress:""},d37ae67ebae59819388a:(e,t,s)=>{"use strict";s.d(t,{$6:()=>a,_W:()=>o,zt:()=>i});const o=(0,s("69084d01d3449fc1bc27").createContext)({code:"en",locale:"en"}),{Provider:i,Consumer:a}=o},"97f1dcceb5a8ace0a465":(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var o=s("2ffdf8954cbe6ce77cdd"),i=s("d7c73929d393992fc0bc");const a={withLanguageHeaders:!0},r=e=>{const{withLanguageHeaders:t}=(e=>"object"!=typeof e?a:Object.assign({},a,e))(e),s=(0,o.O)(i.LW.CENTRALISED_LANGUAGE_HEADERS),r=function(){let e;var t,s;return e=null===(t=window.__PROVIDER_PROPS__)||void 0===t||null===(s=t.config)||void 0===s?void 0:s.LANGUAGE_ID,e}();return t&&s&&r?{"X-PD-Language-ID":r}:{}}},a518f4ae8e5dcd38fe49:(e,t,s)=>{"use strict";s.d(t,{j:()=>a});s("69084d01d3449fc1bc27");var o=s("d37ae67ebae59819388a"),i=s("9302435e81c621e827fb");const a=e=>t=>(0,i.jsx)(o.$6,{children:s=>(0,i.jsx)(e,Object.assign({},t,{currentLanguage:s}))})},"4a4d1df5484691dabba8":(e,t,s)=>{"use strict";s.d(t,{W:()=>o,z:()=>i});const o=(0,s("69084d01d3449fc1bc27").createContext)([]),{Provider:i}=o},"67ccdc81c4bc0f40b048":(e,t,s)=>{"use strict";s.d(t,{n:()=>a});s("69084d01d3449fc1bc27");var o=s("d37ae67ebae59819388a"),i=s("9302435e81c621e827fb");const a=function(e){let{currentLanguage:t,children:s}=e;return(0,i.jsx)(o.zt,{value:t,children:s})}},e796d1893f7332320a71:(e,t,s)=>{"use strict";s.d(t,{Q:()=>o});const o={bd:{locale:"en_BD",supported_language_mapping:{en:()=>o.bd.locale,bn:()=>"bn_BD"}},bg:{locale:"bg_BG",supported_language_mapping:{bg:()=>o.bg.locale,en:()=>"en_BG"}},hk:{locale:"en_HK",supported_language_mapping:{en:()=>o.hk.locale,zh:()=>"zh_HK"}},mj:{locale:"de_AT",supported_language_mapping:{de:()=>o.mj.locale,en:()=>"en_AT"}},my:{locale:"en_MY",supported_language_mapping:{en:()=>o.my.locale,zh:()=>"zh_MY",ms:()=>"ms_MY"}},no:{locale:"nb_NO",supported_language_mapping:{nb:()=>o.no.locale,en:()=>"en_GB"}},op:{locale:"sv_SE",supported_language_mapping:{sv:()=>o.op.locale,en:()=>"en_GB"}},ph:{locale:"en_PH",supported_language_mapping:{en:()=>o.ph.locale}},pk:{locale:"en_PK",supported_language_mapping:{en:()=>o.pk.locale}},po:{locale:"fi_FI",supported_language_mapping:{fi:()=>o.po.locale,en:()=>"en_GB",sv:()=>"sv_FI"}},ro:{locale:"ro_RO",supported_language_mapping:{ro:()=>o.ro.locale}},sg:{locale:"en_SG",supported_language_mapping:{en:()=>o.sg.locale,zh:()=>"zh_SG"}},cz:{locale:"cs_CZ",supported_language_mapping:{cs:()=>o.cz.locale,en:()=>"en_CZ"}},hu:{locale:"hu_HU",supported_language_mapping:{hu:()=>o.hu.locale,en:()=>"en_HU"}},th:{locale:"en_TH",supported_language_mapping:{en:()=>o.th.locale,th:()=>"th_TH",ja:()=>"ja_TH"}},tw:{locale:"zh_TW",supported_language_mapping:{en:()=>"en_TW",zh:()=>o.tw.locale}},kh:{locale:"km_KH",supported_language_mapping:{km:()=>o.kh.locale,en:()=>"en_KH"}},la:{locale:"lo_LA",supported_language_mapping:{lo:()=>o.la.locale,en:()=>"en_LA",zh:()=>"zh_LA"}},mm:{locale:"my_MM",supported_language_mapping:{my:()=>o.mm.locale,en:()=>"en_MM"}},jp:{locale:"ja_JP",supported_language_mapping:{ja:()=>o.jp.locale,en:()=>"en_JP"}},dl:{locale:"de_DE",supported_language_mapping:{de:()=>o.dl.locale,en:()=>"en_DE"}},sk:{locale:"sk_SK",supported_language_mapping:{sk:()=>o.sk.locale,en:()=>"en_SK"}},tr:{locale:"tr_TR",supported_language_mapping:{tr:()=>o.tr.locale,en:()=>"en_TR"}},dk:{locale:"da_DK",supported_language_mapping:{da:()=>o.dk.locale,en:()=>"en_DK"}}}},b2aa6641b5fdbb55e75e:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});var o=s("69084d01d3449fc1bc27"),i=s("d37ae67ebae59819388a");const a=()=>(0,o.useContext)(i._W)||{code:"en",locale:"en_SG"}},d7f2db0229e7c7df3214:(e,t,s)=>{"use strict";s.d(t,{k:()=>a});var o=s("b80adc6fce0f08f80775");Error;class i extends o.J{constructor(){super(...arguments),this.log=e=>{const t=(null==e?void 0:e.error)instanceof Error?{"error.kind":e.error.name,"error.message":e.error.message,"error.stack":e.error.stack}:null;console.log(JSON.stringify(Object.assign({},e,t,{level:"error",message:"[Error: IsomorphicLogger called before initialization] "+e.message})))}}}const a=new class{constructor(){this.transports=[{levels:["debug","info","warning","error"],destination:new i}],this.initialized=!1,this.init=e=>{let{transports:t}=e;if(this.initialized)throw new Error("IsomorphicLogger initialized multiple times");this.initialized=!0,this.transports=t,t.forEach((e=>e.destination.init()))},this.log=e=>{const{level:t}=e;for(const s of this.transports)t&&!s.levels.includes(t)||s.destination.shouldSkip(e)||s.destination.log(e)},this.error=e=>{this.log(Object.assign({},e,{level:"error"}))},this.warning=e=>{this.log(Object.assign({},e,{level:"warning"}))},this.info=e=>{this.log(Object.assign({},e,{level:"info"}))},this.debug=e=>{this.log(Object.assign({},e,{level:"debug"}))}}}},"10a02d35d716bbf95cec":(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var o=s("a071bef95e5f5901ba8b");const i="framework-logging-log-context";function a(){return o.Z.get(i)}},b80adc6fce0f08f80775:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});class o{constructor(){this.init=()=>{},this.log=()=>{},this.shouldSkip=()=>!1}}},a45e6f9783bb2ef3654c:(e,t,s)=>{"use strict";s.d(t,{wW:()=>p});var o=s("7f94df1faf5f865280f4"),i=s("4e1d702845c3cc1f908d"),a=s("0b8f41a423dafeced44a"),r=s("e108350f2fc7ab04cbc9"),n=s("69084d01d3449fc1bc27"),d=s("9302435e81c621e827fb");const c=(0,n.lazy)((()=>s.e(92714).then(s.bind(s,"8436968250a38e3c4840")).then((e=>{let{ReactQueryDevtools:t}=e;return{default:t}}))));function l(e){let{children:t,queryClient:s,serverState:a}=e;const[l,_]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{window.toggleDevtools=()=>_((e=>!e))}),[]),(0,d.jsx)(o.aH,{client:s,children:(0,d.jsxs)(i.R,{state:null==a?void 0:a.dehydratedState,children:[(0,d.jsx)(r.t,{}),l&&(0,d.jsx)(n.Suspense,{fallback:null,children:(0,d.jsx)(c,{})}),t]})})}function _(e){let{children:t}=e;return(0,d.jsx)(d.Fragment,{children:t})}function p(e){var t;let{children:s}=e;const[o]=(0,n.useState)((()=>new a.S));return(0,d.jsx)(_,{children:(0,d.jsx)(l,{queryClient:o,serverState:null===(t=window.__PROVIDER_PROPS__)||void 0===t?void 0:t.rq,children:s})})}},a071bef95e5f5901ba8b:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const o={middleware:(e,t,s)=>{throw new Error("@pd-mfe/framework-request-context: Middleware cannot be called from the browser code.")},get(e){},set:(e,t)=>{}};s("7efd60084d0006474c7b");const i=o},"6bcbcfc3b559b83c03f0":(e,t,s)=>{"use strict";s.d(t,{r:()=>S});var o=s("9541c1076d3fd3e546d7"),i=s.n(o),a=s("a7888a8b87a9a99940ab"),r=s.n(a),n=s("66ada238672318e3866c"),d=s("97f1dcceb5a8ace0a465"),c=s("d9fa7f73b5728d239d06"),l=s("2ffdf8954cbe6ce77cdd"),_=s("d7c73929d393992fc0bc");const p=e=>{const{withFdApiKey:t=!0}=e||{},s=(0,l.O)(_.LW.CENTRALISED_APIKEY_HEADERS),o=function(){let e;var t,s;return e=null===(t=window.__PROVIDER_PROPS__)||void 0===t||null===(s=t.config)||void 0===s?void 0:s.FD_API_KEY,e}();return t&&s&&o?{"X-FP-API-KEY":o}:{}};var E=s("98c2d83faa6a66096a12"),u=s.n(E),h=s("184bccb1e7a00949fab1"),g=s.n(h);const T={PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.APPLICATION+"",m=new(u().Agent)({family:4}),f=new(g().Agent)({family:4}),N=(Object.assign({headers:{"User-Agent":T}},{httpAgent:m,httpsAgent:f}),{timeout:1e4}),S=e=>{const t=Object.assign({},(0,c.t)(),(0,n.O)(e),(0,d.e)(e),p(e));return i()(r()(Object.assign({},N,{headers:t})),e)}},"2ae721aeaceb6823d3c8":(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var o=s("214eccfc06814c553a3c"),i=s.n(o),a=s("6bcbcfc3b559b83c03f0"),r=s("f37b1839dd5a1284d1c5"),n=s("9e1d9ed2711a61dc559e"),d=s("3f84645600759acbaa17");const c=async(e,t)=>{try{const s=await i().delete(e,(0,a.r)(t));return(0,n.C)(s),s}catch(e){const t=e;if(t.response&&t.response.status===r.W.NOT_FOUND)throw t;throw(0,d.d)(t),t}}},a744f7fca48fd478fca0:(e,t,s)=>{"use strict";s("2ae721aeaceb6823d3c8");var o=s("aaf36f6afcec0254a573");s.o(o,"get")&&s.d(t,{get:function(){return o.get}}),s.o(o,"post")&&s.d(t,{post:function(){return o.post}}),s.o(o,"put")&&s.d(t,{put:function(){return o.put}})},ee1e4a52f7441826d9ee:(e,t,s)=>{"use strict";s.d(t,{U:()=>c});var o=s("214eccfc06814c553a3c"),i=s.n(o),a=s("6bcbcfc3b559b83c03f0"),r=s("f37b1839dd5a1284d1c5"),n=s("9e1d9ed2711a61dc559e"),d=s("3f84645600759acbaa17");const c=async(e,t)=>{try{const s=await i().get(e,(0,a.r)(t));return(0,n.C)(s),s}catch(e){const t=e;if(t.response&&t.response.status===r.W.NOT_FOUND)throw t;throw(0,d.d)(t),t}}},eec4883a62ffeb1197f6:(e,t,s)=>{"use strict";s.d(t,{get:()=>o.U});var o=s("ee1e4a52f7441826d9ee"),i=s("aaf36f6afcec0254a573");s.o(i,"post")&&s.d(t,{post:function(){return i.post}}),s.o(i,"put")&&s.d(t,{put:function(){return i.put}})},f37b1839dd5a1284d1c5:(e,t,s)=>{"use strict";s.d(t,{W:()=>o});let o=function(e){return e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.PROCESSING=102]="PROCESSING",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.ALREADY_REPORTED=208]="ALREADY_REPORTED",e[e.IM_USED=226]="IM_USED",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.SWITCH_PROXY=306]="SWITCH_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.LOOP_DETECTED=508]="LOOP_DETECTED",e[e.NOT_EXTENDED=510]="NOT_EXTENDED",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",e}({})},"6f2468c415bb728048f0":(e,t,s)=>{"use strict";s.d(t,{get:()=>i.get,post:()=>a.post,put:()=>r.put});var o=s("a744f7fca48fd478fca0");s.o(o,"get")&&s.d(t,{get:function(){return o.get}}),s.o(o,"post")&&s.d(t,{post:function(){return o.post}}),s.o(o,"put")&&s.d(t,{put:function(){return o.put}});var i=s("eec4883a62ffeb1197f6");s.o(i,"post")&&s.d(t,{post:function(){return i.post}}),s.o(i,"put")&&s.d(t,{put:function(){return i.put}});var a=s("c61a8999e6339a64ec2a");s.o(a,"put")&&s.d(t,{put:function(){return a.put}});var r=s("f5bd0326a61f068bcb0d");s("f37b1839dd5a1284d1c5")},"3f84645600759acbaa17":(e,t,s)=>{"use strict";s.d(t,{Y:()=>i,d:()=>logRequestError});s("d7f2db0229e7c7df3214"),s("4479fcf0adfb613e47d9");const o=[s("f37b1839dd5a1284d1c5").W.NOT_FOUND],i=function(e,t){return void 0===t&&(t=[]),o.concat(t).includes(e)},logRequestError=e=>{}},"9e1d9ed2711a61dc559e":(e,t,s)=>{"use strict";s.d(t,{C:()=>o});s("d7f2db0229e7c7df3214"),s("4479fcf0adfb613e47d9");const o=e=>{}},c61a8999e6339a64ec2a:(e,t,s)=>{"use strict";s.d(t,{post:()=>o.v});var o=s("0d4d2a3a1e2ea9da0d92"),i=s("aaf36f6afcec0254a573");s.o(i,"put")&&s.d(t,{put:function(){return i.put}})},"0d4d2a3a1e2ea9da0d92":(e,t,s)=>{"use strict";s.d(t,{v:()=>c});var o=s("214eccfc06814c553a3c"),i=s.n(o),a=s("6bcbcfc3b559b83c03f0"),r=s("f37b1839dd5a1284d1c5"),n=s("9e1d9ed2711a61dc559e"),d=s("3f84645600759acbaa17");const c=async function(e,t,s){void 0===s&&(s={});try{const o=await i().post(e,s,(0,a.r)(t));return(0,n.C)(o),o}catch(e){const t=e;if(t.response&&t.response.status===r.W.NOT_FOUND)throw t;throw(0,d.d)(t),t}}},f5bd0326a61f068bcb0d:(e,t,s)=>{"use strict";s.d(t,{put:()=>n});var o=s("214eccfc06814c553a3c"),i=s.n(o),a=s("6bcbcfc3b559b83c03f0"),r=s("3f84645600759acbaa17");const n=async function(e,t,s,o){void 0===s&&(s={}),void 0===o&&(o=[]);try{return await i().put(e,s,(0,a.r)(t))}catch(e){const t=e;if(t.response&&(0,r.Y)(t.response.status,o))throw t;throw(0,r.d)(t),t}}},aaf36f6afcec0254a573:()=>{},"5d03ff0f9b624edf3fca":(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var o=s("b12a54135aacb583048a");function i(e,t){let s=o._[e];const i=t&&t.urlParams||{};for(const[e,t]of Object.entries(i))s=s.replace(":"+e,t.toString());const a=t&&t.queryParams||{},r=Object.entries(a).map((e=>{let[t,s]=e;return t+"="+s})).join("&");return s+=r.length?"?"+r:"",s}},fd6b5d0bbfea7f0d6208:(e,t,s)=>{"use strict";s.d(t,{m:()=>d});var o=s("b80adc6fce0f08f80775"),i=s("6e144e2224de5c4ef3cf"),a=s("ecdd8aa1d706c301669f"),r=s("404b4de4e822b438eb89");const n={captureException(e,t){const{level:s="error",tags:o={},contextData:i={}}=null!=t?t:{};let n={};(0,a.$e)((t=>{((e,t)=>{Object.entries(t).forEach((t=>{let[s,o]=t;e.setTag(s,String(o))}))})(t,o),t.setLevel(s),e instanceof r.s&&(n=e.getExtraInfo());const d=Object.assign({},i,n);"{}"!==JSON.stringify(d)&&((e,t,s)=>{const o={};Object.entries(s).forEach((e=>{let t,[s,i]=e;i&&(t="object"==typeof i?JSON.stringify(i):String(i),o[s]=t)})),e.setContext(t,o)})(t,"errorContext",d),(0,a.Tb)(e)}))}};class d extends o.J{constructor(e){super(),this.init=()=>{const{initOption:e,userOption:t,globalTags:s}=this.transportOptions;i.S(e),a.av(t),a.mG(s)},this.log=e=>{const{error:t,message:s,extraInfo:o,level:i}=e;if(null!=t&&t instanceof Error){const e=Object.entries(o||{}).map((e=>{let[t,s]=e;return[t,"string"==typeof s?s:this.serialize(s)]}));!function logClientError(e,t,s){if(void 0===t&&(t=""),window.__SENTRY__){const{level:o="error",tags:i={},contextData:a={}}=null!=s?s:{};n.captureException(t?new Error(t,{cause:e}):e,{level:o,tags:i,contextData:a})}}(t,s,{level:i,tags:Object.fromEntries(e)})}else(e=>{window.__SENTRY__&&a.uT(""+e)})(s)},this.serialize=e=>{try{return JSON.stringify(e)}catch(e){return"stringify-failed"}},this.transportOptions=e}}},ac129530af3fa799bed9:(e,t,s)=>{"use strict";s.d(t,{_:()=>o,t:()=>i});const o=()=>{let e;if("connection"in navigator){e=navigator.connection.effectiveType}return e},i=()=>globalThis.screen.width+"px, "+globalThis.screen.height+"px"},"0a41659aa79b2eb0b539":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var o=s("b7713ec20a37c71a6f98"),i=(s("69084d01d3449fc1bc27"),s("ac129530af3fa799bed9")),a=s("9302435e81c621e827fb");const r=e=>{let{fallback:t,onError:s,tags:r,context:n,beforeCapture:d,children:c}=e;return(0,a.jsx)(o.SV,{fallback:null!=t?t:void 0,onError:s,beforeCapture:(e,t,s)=>{if(e.setTags(Object.assign({networkType:(0,i._)(),screenSize:(0,i.t)()},r)),n){const[t,s]=n;e.setContext(t,s)}null==d||d(e,t,s)},children:c})}},"20d6decc12824758707c":(e,t,s)=>{"use strict";s.d(t,{i:()=>o});const o=(e,t)=>{const s={};for(const o of e)"number"==typeof t[o]?s[o]=t[o].toString():"boolean"!=typeof t[o]&&"string"!=typeof t[o]||(s[o]=t[o]);return s}},d9fa7f73b5728d239d06:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});var o=s("c63969011951cd1dd80e");const i=()=>{o.Z.scope().active();return{}}},"1dfe6cf71f7312a59e0c":(e,t,s)=>{"use strict";s.d(t,{ZP:()=>i});var o=s("c63969011951cd1dd80e");s("ecebb16dc949508dbe07");const i=o.Z},ecebb16dc949508dbe07:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var o=s("c63969011951cd1dd80e");const i=()=>(o.Z.init({service:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_SERVICE,version:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_VERSION,env:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_ENV,hostname:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_AGENT_HOST,port:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_TRACE_AGENT_PORT,dogstatsd:{port:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}.DD_STATS_AGENT_PORT},logInjection:!0,runtimeMetrics:!0,sampleRate:1,plugins:!1,tags:{dh_chapter:"frontend"}}),o.Z.use("express",{blacklist:[/.*\/health\/check/]}),o.Z)},c63969011951cd1dd80e:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("1f5af0a1a63c565a919b");const i=class{active(){return null}activate(e,t){return"function"!=typeof t?t:t()}bind(e){return e}};class a extends o.SpanContext{constructor(e){super(),this._traceId=void 0,this._spanId=void 0,e=e||{},this._traceId=e.traceId,this._spanId=e.spanId}toTraceId(){return this._traceId.toString(10)}toSpanId(){return this._spanId.toString(10)}}const r=a;class n extends o.Span{constructor(e){super(),this.noopTracer=void 0,this.noopTracer=e}context(){return new r({traceId:123,spanId:123})}}const d=n;class c extends o.Tracer{constructor(){super(),this._span=void 0,this._scope=void 0,this._scope=new i,this._span=new d(this)}trace(e,t){return t(this._span,(()=>null))}wrap(e,t,s){return s}scope(){return this._scope}currentSpan(){return null}startSpan(){return this._span}init(){return this}use(){return this}}const l=new c},"6af1e0d7cf559496cc92":(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var o=s("69084d01d3449fc1bc27");const i=new Map,a=(0,o.createContext)(i)},"25ef6d5288186f55e106":(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var o=s("0ed1118f3e180f146839"),i=s("6af1e0d7cf559496cc92"),a=s("9302435e81c621e827fb");const r=function(e,t,s){return void 0===t&&(t={}),void 0===s&&(s=null),(0,a.jsx)(i.O.Consumer,{children:i=>{let a;return a="function"==typeof i.get?i.get(e):i[e],void 0===a?s||e:(0,o.h)(a,t)}})}},"0e8400aef1ea36fada43":(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var o=s("6af1e0d7cf559496cc92"),i=s("9302435e81c621e827fb");const a=e=>{let{children:t,translation:s}=e;return(0,i.jsx)(o.O.Provider,{value:s,children:t})};a.displayName="TranslationProvider"},"0ed1118f3e180f146839":(e,t,s)=>{"use strict";s.d(t,{h:()=>o});const o=(e,t)=>Object.keys(t).reduce(((e,s)=>e.replace("%"+s+"%",""+t[s])),e)},a7dceeac37519cfc1804:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});var o=s("0ed1118f3e180f146839"),i=s("6af1e0d7cf559496cc92"),a=s("69084d01d3449fc1bc27");function r(e){const t=(0,a.useContext)(i.O),s=(0,a.useCallback)(((e,s)=>{if(!e)return"";const i=t instanceof Map?t.get(e):t[e];return null==i?e:s?(0,o.h)(i,s):i}),[t]);return e?e.map((e=>Array.isArray(e)?s(...e):s(e))):s}},"1cf6977734e5cad50299":(e,t,s)=>{"use strict";s.d(t,{JV:()=>a,lu:()=>r});s("69084d01d3449fc1bc27");var o=s("6af1e0d7cf559496cc92"),i=s("9302435e81c621e827fb");const a=(e,t)=>{const s={};return t.forEach((t=>{if(t.indexOf("*")>=0){const o=new RegExp("^"+t.replace("*",".*")+"$","i"),i=e instanceof Map?Array.from(e.keys()):Object.keys(e);for(const t of i)t.match(o)&&(s[t]=e instanceof Map?e.get(t):e[t])}else e instanceof Map?s[t]=e.get(t):s[t]=e[t]})),s},r=(e,t)=>s=>(0,i.jsx)(o.O.Consumer,{children:o=>(0,i.jsx)(e,Object.assign({},s,{translations:a(o,t)}))})},"4479fcf0adfb613e47d9":(e,t,s)=>{"use strict";s.d(t,{P:()=>a,g:()=>i});const o=new Set(["email","username","password","first_name","last_name","_email","_username","_password","hash","payment","recurring_id","encrypted_payment_data","card_bank_identification_number","customer","client_id","client_secret","access_token","device_token","refresh_token","accessToken","deviceToken","refreshToken","personalNumber","social_id_token","social_token","username","X-Device","X-API-Key","Authorization","set-cookie","cookie","cookies"].map((e=>e.toLowerCase()))),i=e=>{try{return Object.entries(e).filter((e=>{let[t]=e;return!o.has(t.toLowerCase())})).reduce(((e,t)=>{let[s,o]=t;return e[s]=o,e}),{})}catch(e){return{}}},a=e=>{try{const t=JSON.parse(e);return i(t)}catch(e){return{}}}},"1268ef4636b910462ad5":(e,t,s)=>{"use strict";s.d(t,{V:()=>i});var o=s("bd11212dd200c13dd4e4");const i=()=>{try{const e=localStorage.getItem("location-model-v2"),t=JSON.parse(null!=e?e:"");return new o.C(t)}catch(e){return null}}},bd11212dd200c13dd4e4:(e,t,s)=>{"use strict";s.d(t,{C:()=>o});class o{constructor(e){this.id=void 0,this.city_id=void 0,this.city=void 0,this.city_name=void 0,this.area_id=void 0,this.areas=void 0,this.address_line1=void 0,this.address_line2=void 0,this.address_line3=void 0,this.address_line4=void 0,this.address_line5=void 0,this.address_other=void 0,this.room=void 0,this.flat_number=void 0,this.structure=void 0,this.building=void 0,this.intercom=void 0,this.entrance=void 0,this.floor=void 0,this.district=void 0,this.postcode=void 0,this.meta=void 0,this.company=void 0,this.longitude=void 0,this.latitude=void 0,this.is_delivery_available=void 0,this.delivery_instructions=void 0,this.title=void 0,this.label=void 0,this.formatted_customer_address=void 0,this.campus=void 0,this.corporate_reference_id=void 0,this.form_id=void 0,this.country_code=void 0,this.created_at=void 0,this.updated_at=void 0,this.location_type=void 0,this.is_company_address=void 0,this.object_type=void 0,this.place_id=void 0,this.expedition_type=void 0,this.type=void 0,this.phone_country_code=void 0,this.phone_number=void 0,e&&Object.entries(e).forEach((e=>{let[t,s]=e;Object.defineProperty(this,t,{value:s,enumerable:!0,writable:!0})})),e&&e.object_type||(this.id?this.object_type="saved address":this.object_type="new address"),e&&e.location_type||(this.location_type="polygon"),(e&&e.type&&"number"==typeof e.type||0===(null==e?void 0:e.type))&&(this.type=e.type.toString())}}},"78114018caf6c1e27c00":(e,t,s)=>{"use strict";s.d(t,{S:()=>i});var o=s("1268ef4636b910462ad5");const i=()=>{const e=(0,o.V)();if(e){let t={};if(("boolean"==typeof e.is_company_address&&!0===e.is_company_address&&"number"==typeof e.corporate_reference_id&&"number"==typeof e.id||"number"==typeof e.corporate_reference_id)&&(t={isCompanyAddress:!0,addressId:e.corporate_reference_id||e.id}),"number"==typeof e.latitude&&"number"==typeof e.longitude&&("string"==typeof e.city||"string"==typeof e.city_name)&&"string"==typeof e.formatted_customer_address&&"string"==typeof e.country_code&&"string"==typeof e.location_type)return Object.assign({latitude:e.latitude,longitude:e.longitude,city:e.city||e.city_name,address:e.formatted_customer_address,countryCode:e.country_code,type:e.location_type,postcode:e.postcode},t);if("number"==typeof e.latitude&&"number"==typeof e.longitude&&"string"==typeof e.location_type)return Object.assign({latitude:e.latitude,longitude:e.longitude,type:e.location_type},t)}return{}}},e2ba54487d3e9f01ee4a:(e,t,s)=>{"use strict";s.d(t,{DJ:()=>L,Ob:()=>g,qH:()=>h,Yu:()=>m,Nr:()=>c,A0:()=>T,iv:()=>d,IL:()=>f,HF:()=>A,ts:()=>_,ph:()=>l,pB:()=>E,Oe:()=>O,UY:()=>u,up:()=>S,Ux:()=>p,K4:()=>N});var o=s("d7f2db0229e7c7df3214"),i=s("94217eecef624954b619"),a=s("ef7f39a531ad1aecc167"),r=(s("01fc610540474aad81ff"),s("56d5f2391e2ec098aa40"),s("8f58e784196e6568c885"),s("aa19b366ad39a81067fe"),s("12be0f0e9e2c7751d613"));var n=s("bd11212dd200c13dd4e4");s("f481ef00e50d282f38a9");const d=(e,t)=>e.filter((e=>{let{id:s}=e;return s!==t.id})),c=(e,t)=>{const s=e.map((e=>{const{type:s,label:o}=t;return(0,a.Fz)(e.type)===(0,a.Fz)(s)&&e.label===o&&(e.type=i._.OTHER,e.label=void 0),e}));return s},l=()=>localStorage.getItem("provider"),_=async e=>{if(e&&e.id){const t=await(async(e,t)=>{let s={provider:l()};const i=await t;if(i&&i.meta)try{s=JSON.parse(i.meta)}catch(t){o.k.error({error:new Error,message:"cannot parse the address meta data for:"+e})}return s})(e.id,e);return t}if(e&&"meta"in e)try{return JSON.parse(e.meta)}catch(e){}return{provider:l()}},p=e=>e.properties.is_dynamic_field&&!e.properties.is_always_shown,E=e=>!!e.mapping,u=e=>!e.mapping||!!e.properties.is_always_shown,h=(e,t,s)=>{const{fields:o,dynamic_fields_properties:i}=s,a=null==i?void 0:i.exclude_from_cities,r=(null==a?void 0:a.some((t=>e.city_id&&e.city_id.toString()===t)))?[]:((e,t,s)=>e.filter((e=>e.mapping)).filter((e=>p(e))).filter((e=>{var o,i,a,r,n,d;const c=t&&t[e.name]?t[e.name]:void 0;return"address_line1"===e.name&&"Unnamed Road"===c||!c||"user"===(null==s||null===(o=s.dynamic_fields)||void 0===o||null===(i=o[e.name])||void 0===i?void 0:i.source)||"user_edited"===(null==s||null===(a=s.dynamic_fields)||void 0===a||null===(r=a[e.name])||void 0===r?void 0:r.source)||"google"!==(null==s||null===(n=s.dynamic_fields)||void 0===n||null===(d=n[e.name])||void 0===d?void 0:d.source)&&!(s&&s.dynamic_fields&&!s.dynamic_fields[e.name]||s&&!s.dynamic_fields)&&!c})))(o,e,t).slice(0,1),n=o.filter((e=>u(e)));return r[0]?[...r,...n]:[...n]},g=function(e,t,s){if(void 0===e&&(e={}),void 0===s&&(s=!1),!e.addressId&&!s)return{};const o={};return t.forEach((t=>{o[t.name]=e[t.name],"phone_number"===t.name&&(o.phone_country_code=e.phone_country_code)})),"Unnamed Road"===o.address_line1&&delete o.address_line1,o.type=e.type?e.type:i._.OTHER,o.label=e.label,o},T=(e,t)=>e.reduce(((e,s)=>(p(s)&&(e[s.name]=!!t[s.name]),e)),{}),m=e=>e?e.id:void 0,f=e=>m(e)?"EditAddress":"NewAddress",N=(e,t,s,o,i,a)=>{const r=T(e,t),n=a.getLastStepType();i.trackAddressUpdated(s,n,r,f(o))},S=(e,t,s)=>{r.ZP.getInstance().getGTMLocationService().trackLocationError("NO_RESULTS_FOUND","Saved",e,t,s)},L=(e,t,s)=>{const o=s.address_config.format,i=Object.assign({},e);t.forEach((e=>{i[e.name]=void 0}));const a=r.ZP.getInstance().getAddressFormatter().getFormattedAddress(i,o);return i.formatted_customer_address=a,new n.C(i)},A=(e,t)=>{const s=t.address_config.format;return r.ZP.getInstance().getAddressFormatter().getFormattedAddress(e,s)},O=(e,t,s,o,i)=>{const a={provider:l()},r=Object.assign({},t),n=Object.assign({},s);if(n.meta&&(o.id||i)){const t=o.meta?JSON.parse(String(o.meta)):{};var d;if(t.dynamic_fields)e.forEach((e=>{var s,o;"google"===(null===(s=t.dynamic_fields)||void 0===s||null===(o=s[e])||void 0===o?void 0:o.source)&&delete t.dynamic_fields[e]})),Object.keys(null!==(d=t.dynamic_fields)&&void 0!==d?d:{}).length&&(a.dynamic_fields=Object.assign({},t.dynamic_fields))}return e.forEach((e=>{r[e]&&(a.dynamic_fields||(a.dynamic_fields={}),a.dynamic_fields[e]||(n[e]?r[e]===n[e]||0===r[e].length&&!n[e]||(a.dynamic_fields[e]={source:"user_edited"}):a.dynamic_fields[e]={source:"user"}))})),a.dynamic_fields&&!Object.keys(a.dynamic_fields).length&&delete a.dynamic_fields,a}},"6a875476d6c8921ae192":(e,t,s)=>{"use strict";s.d(t,{J:()=>o});const o=async(e,t,s,o)=>{try{return await s.getDeliverableService().checkDeliverableByVendorCode({isPickUp:!1,vendorCode:o.code,latitude:e.latitude,longitude:e.longitude,languageId:t.languageId})}catch(e){return!1}}},"98d642fb299b851a2cd1":(e,t,s)=>{"use strict";s.d(t,{p:()=>A});var o=s("54bdd803dcbe7795ce01"),i=s.n(o),a=s("b074c3cb17f204ecf6a8"),r=s.n(a),n=s("3fdb80c9b6a51ecdf3f5"),d=s("174811872339f1d02c40"),c=s.n(d),l=s("78bee7a5e6e56ceff1d4"),_=s("d1970d14043b553c0c4f"),p=s("973a878031e1dd3a94c7"),E=s.n(p),u=s("a7dceeac37519cfc1804"),h=(s("69084d01d3449fc1bc27"),s("1c2f52c061810467b454")),g=s("ef7f39a531ad1aecc167"),T=s("12be0f0e9e2c7751d613"),m=s("9302435e81c621e827fb");const f=e=>{const{formatted_customer_address:t}=e;return t||T.ZP.getInstance().getAddressFormatter().getFormattedAddress(e)},N=e=>{let{model:t}=e;const s=(0,u.T)();return(0,m.jsxs)(m.Fragment,{children:[(0,h.v)((0,g.Fz)(t.type)),(0,m.jsxs)(_.x,{className:"labeled-address",color:"neutral-primary",children:[(0,m.jsxs)(n.C,{className:"label",as:"h4",type:"label-md",margin:"zero",children:[" ",(0,g.FE)((0,g.Kt)(s),t)," "]}),(0,m.jsxs)(n.C,{className:"main-address",type:"paragraph-sm",children:[" ",f(t)," "]})]})]})},S=e=>{let{model:t}=e;return(0,m.jsx)(m.Fragment,{children:null!=t&&t.is_company_address?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(E(),{fill:"interaction-primary"}),(0,m.jsxs)(n.C,{className:"main-address",type:"paragraph-sm",color:"neutral-primary",children:[" ",f(t)," "]})]}):(0,m.jsx)(N,{model:t})})};function L(e){const t=()=>{e.handleAddressSelect&&e.handleAddressSelect(e.model)},s=()=>{e.onHover&&e.onHover(e.model)},o=e.model.object_type,i="saved address"===o;return i||"company address"===o?(0,m.jsx)("li",{onClick:t,className:c()("suggestion-item",{focused:e.isFocus}),onMouseEnter:s,"data-testid":"suggestion-item",children:(0,m.jsx)("div",{className:"item saved-address","data-testid":i&&!e.model.corporate_reference_id?"suggestion-item__saved-address":"suggestion-item__company-address",children:(0,m.jsx)(S,{model:e.model})})}):(0,m.jsx)("li",{onClick:t,className:c()("suggestion-item",{focused:e.isFocus}),onMouseEnter:s,"data-testid":"suggestion-item",children:(0,m.jsx)("div",{className:"item autocomplete",children:(0,m.jsxs)(n.C,{className:"main-address",type:"paragraph-sm",color:"neutral-primary",children:[" ",e.model.formatted_customer_address," "]})})})}S.displayName="SavedAddressItem",N.displayName="LabledAddress";const A=e=>{let{addressSuggestionCollection:t,focusedItem:s,focusItem:o,selectAddress:a,translations:d}=e;const _=(null!=t?t:[]).every((e=>(0,l.oT)(e))),p=_?d.saved_addresses_label:d.map_noresult_correction_text,E=c()("address-suggestions","webfound-refresh",{"saved-addresses":_});return(0,m.jsxs)("div",{className:E,id:"address-suggestions","data-testid":"address-suggestions",children:[(0,m.jsx)(n.C,{className:"address-suggest-title",color:"neutral-primary",type:"label-sm",children:p}),(0,m.jsx)("ul",{className:"address-suggestion-items",children:(null!=t?t:[]).map((e=>{const t=c()("address-suggestion-item",{"address-suggestion-item--is-focus":s&&i()(e,s)}),d=(0,l.oT)(e);return(0,m.jsx)(m.Fragment,{children:d?(0,m.jsx)(L,{model:e,isFocus:s&&i()(e,s),onHover:o,handleAddressSelect:a},e.id):(0,m.jsxs)("li",{className:t,"data-testid":"address-suggestion-item",onClick:()=>a(e),onMouseOver:()=>o(e),children:[(0,m.jsx)(r(),{className:"address-suggestion-item-icon-search",fill:"interaction-secondary"}),(0,m.jsx)("span",{className:"address",children:(0,m.jsx)(n.C,{type:"paragraph-sm",color:"interaction-secondary",children:e.formatted_customer_address})})]},e.id)})}))})]})}},f0113ad522d4984536bd:(e,t,s)=>{"use strict";s.d(t,{O:()=>P});var o=s("281cbdced79d8f3d2562"),i=s.n(o),a=s("e56aa86c532afce58654"),r=s.n(a),n=s("3ea3cb108c28f44a15b3"),d=s("e57816ce2d5f3e48376c"),c=s("69084d01d3449fc1bc27"),l=s("787980cc545b28bdd6fd"),_=s("bd11212dd200c13dd4e4"),p=s("12be0f0e9e2c7751d613"),E=s("6fd2852d6f9220b4ea44"),u=s("106d7a1cbeb4e2e71857"),h=s("568ecdc81696e6199594"),g=s("549640134fdb6d7e36d7"),T=s("54bdd803dcbe7795ce01"),m=s.n(T),f=s("98d642fb299b851a2cd1"),N=s("b48d419be3e1903edcd4");const S=e=>{if(e){const{formatted_customer_address:t}=e;return t||p.ZP.getInstance().getAddressFormatter().getFormattedAddress(e)}return""};var L=s("4d4238b3f32bba880178"),A=s("174811872339f1d02c40"),O=s.n(A),b=s("a7f44a4d9a149fde3658"),C=s("5bac396c86413df162b8");const I=e=>{let t;switch(!0){case e.path:t=e.path;break;case"function"==typeof e.composedPath:t=e.composedPath();break;default:t=(e=>{const t=[];for(;e;){if(t.push(e),"HTML"===e.tagName)return t.push(document,window),t;e=e.parentElement}})(e.target||e.srcElement)}return t},v=e=>{if(null!=e&&e.current){const{selectionStart:t,selectionEnd:s}=e.current;return t===s?t:null}return null},R=(e,t)=>O()("validation-wrapper input-box js-input-box","sr input-box js-input-box",{"validation-wrapper-Mweb":e&&(0,b.J)(e)},{big:t&&t===C.vz.BIG});var M=s("9302435e81c621e827fb");const D=c.forwardRef(((e,t)=>{const[s,o]=(0,c.useState)(),[a,r]=(0,c.useState)(!1),n=p.ZP.getInstance().getGTMLocationService(),d=e.addressSuggestionCollection,l=e=>{o(e),a||r(!0)},_=t=>{if(!d)return;if(!s){const s=t===C.rv.DOWN?0:d.length-1;return l(d[s]),void e.setInputValue(d[s].formatted_customer_address)}const o=d.findIndex((e=>m()(e,s))),i=((e,t,s)=>{let o;return o=e===C.rv.DOWN?s===t.length-1?t[0]:t[s+1]:0===s?t[t.length-1]:t[s-1],o})(t,d,o);l(i),e.setInputValue(null==i?void 0:i.formatted_customer_address)},E=t=>{if(t){if(n){const s=t.id?"Saved":"Autocomplete";n.initializeLocationAttemptedTracking(s),n.trackLocationAttempted(t,e.vendor,e.formType)}e.handleAddressSelect(t),r(!1)}},u=i()((()=>{s?E(s):d&&E(d[0])}),500);(0,c.useImperativeHandle)(t,(()=>({moveFocusedItem:_,enterCallback:u})));const h=t=>{(e=>!e.find((e=>e.classList&&e.classList.contains("validation-wrapper"))))(I(t))&&(e.autoSelect&&(()=>{const t=p.ZP.getInstance().getModel(),s=t.latitude&&t.longitude?t:null;d&&d.length>0&&(e=>e&&e.length>0&&!!e[0].id||!1)(d)?e.handleAddressSelect(d[0],!0):s?e.handleAddressSelect(s,!1,!0):e.handleAddressSelect(t,!1,!0)})(),n&&n.resetLocationAttemptedTracking())};return(0,c.useEffect)((()=>(document.body.addEventListener("click",h,!1),document.body.addEventListener("touchstart",h,!1),()=>{document.body.removeEventListener("click",h,!1),document.body.removeEventListener("touchstart",h,!1)}))),(0,M.jsx)("div",{"data-testid":"address-suggesiton-view-refactored",children:(0,M.jsx)(f.p,{addressSuggestionCollection:e.addressSuggestionCollection,focusedItem:s,focusItem:l,locateMeComponent:e.locateMeComponent,selectAddress:E,translations:e.translations})})}));D.displayName="AddressSuggestionViewRefactor";var y=s("5a5afc411b33944d3a7e");const P=(0,c.forwardRef)(((e,t)=>{let{selectedAddress:s,fillInputSearch:o,onSuggestionListSelected:a,onChange:T,onSuggestionListChanged:m,title:f,focusOnInput:A,onTouched:O,gtmLocationService:b,appConfig:I,disableAutoValidation:P,geocodeHandler:G,vendor:B,formType:w,addressChangeTracker:x,onLocateMeFail:U,displayError:k,inputRef:X,translations:F,hiddenError:j,locationService:H,showSavedAddress:V,toolTipMsg:Y,trackInputState:K,inputSize:Z,clearInputRef:z,focusOnRender:W,clearAddress:q,hasLocationPermissionError:J,isWhereComponent:Q,placeholder:$,autoSubmit:ee,isMapOpen:te,noAddressOpenMap:se}=e;const[oe,ie]=(0,c.useState)(""),[ae,re]=(0,c.useState)(!1),[ne,de]=(0,c.useState)(),[ce,le]=(0,c.useState)(""),[_e,pe]=(0,c.useState)(o?S(s):""),[Ee,ue]=(0,c.useState)(!1),[he,ge]=(0,c.useState)(!1),[Te,me]=(0,c.useState)(s||null),[fe,Ne]=(0,c.useState)(!1),[Se,Le]=(0,c.useState)(null),[Ae,Oe]=(0,c.useState)(),[be,Ce]=(0,c.useState)(!1),[Ie,ve]=(0,c.useState)(null),Re=(0,c.createRef)(),Me=e=>{re(e)};(0,c.useImperativeHandle)(t,(()=>({handleSetLoadingStateEvent:Me})));const De=(e,t)=>{null==T||T(e,t),null==a||a(e)},ye=e=>{ne?(Ce(!1),re(!1)):(e=>{Ce(!1),re(!1),Te||(Ie?De(Ie,!1):(le(e.place_id),me(e),De(e,!1)))})(e)},Pe=()=>{Ae&&Ae.length>=0&&(Oe([]),Ce(!1)),null==m||m([])},Ge=(e,t,s)=>{const{id:o,place_id:i,is_company_address:a=!1}=e;switch(!0){case"b2b"===I.platform&&a:const r=Object.assign({},s,{corporate_reference_id:o,is_company_address:!0});return De(r,t),void re(!1);case!!s:return De(s,t),void re(!1);case P:return De(e,t),void re(!1);default:return void(async(e,t,s)=>{const o=await(e?N.i.getInstance().getDetails({id:e}):N.i.getInstance().getGeocode({address:t}));return null==s||s(o),o})(i,_e,G).then((e=>{e.object_type="autocomplete",De(e,t),re(!1)}))}},handleLocateMeError=()=>{var e;(re(!1),U)?(U(),(0,d.v)().emit("geolocation:permission-denied")):(ge(!0),((e,t,s)=>{e(E.X.NO_GEOLOCATION),t.trackLocationError("NO_GEOLOCATION","LocateMe"),s(E.X.NO_GEOLOCATION)})(k,b,de),null==X||null===(e=X.current)||void 0===e||e.focus());(0,d.v)().emit("full-address-search:locate-me-error")},Be=(e,t,s)=>{re(!0);const o=(0,l.ZP)(I,V,H.getAddressService())(e,t,s,!0);Promise.resolve(o).then(((e,t)=>s=>{if(Le(null),!P)if(0===s.length&&e===C.Te.AUTOCOMPLETE){de(E.X.INVALID_ADDRESS_NOT_FOUND);const e=new _.C({formatted_customer_address:t});b.trackLocationError("NO_RESULTS_FOUND","Search",e,w),k(E.X.INVALID_ADDRESS_NOT_FOUND)}else e===C.Te.AUTOCOMPLETE&&j(X);Oe(s),Ce((null==s?void 0:s.length)>0),re(!1),null==m||m(s)})(s,e)).catch((t=>{if(s===C.Te.SAVED_ADDRESS){var o;const e=p.ZP.getInstance().getLocationXhrService().isAppIdExist(t),s=(null==t||null===(o=t.response)||void 0===o?void 0:o.data)||t;e&&Le(s),re(!1)}else{de(E.X.NO_GEOLOCATION),re(!1);const t=new _.C({formatted_customer_address:e});b.trackLocationError("NO_GEOLOCATION","Search",t,w),k(E.X.NO_GEOLOCATION)}}))},we=(0,c.useRef)(i()(Be,250)),xe=()=>{var e;Ce(!1),j(X),null==z||z(!1),pe(""),me(null),null===(e=X.current)||void 0===e||e.focus()};return(0,c.useEffect)((()=>{(async e=>{if(navigator.permissions&&"function"==typeof navigator.permissions.query)try{const t=await navigator.permissions.query({name:"geolocation"});e(t?t.state:"")}catch(t){e("")}})(ie),W&&X.current&&X.current.focus(),J&&handleLocateMeError()}),[]),(0,c.useEffect)((()=>{s?(me(s),pe(S(s))):!1===o&&pe("")}),[s]),(0,c.useEffect)((()=>{q&&xe()}),[q]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:R(Q,Z),"data-testid":"full-address-search-view-refactored",children:(0,M.jsxs)("div",{className:"search-input-container",children:[(0,M.jsx)("input",{type:"text",className:"restaurants-search-form__input restaurants__location__input",id:"delivery-information-postal-index",name:"",placeholder:$,value:_e,autoComplete:"off",onFocus:()=>{(()=>{const{isMobileDevice:e,userDeviceOs:t}=(0,L.Z)();if(e&&"Android"===t){const e=document.querySelector(".location-form");e&&window&&window.scroll(0,e.offsetTop)}})(),null==A||A(!0),null==K||K(g.B.CLICKED),b.initializeLocationAttemptedTracking("Search"),b.trackLocationClicked(Te,B,w,"Search"),he?ge(!1):Be(_e,v(X),C.Te.SAVED_ADDRESS)},onKeyDown:e=>((e,t,s)=>{var o;if(38===e.keyCode)e.preventDefault(),null===(o=t.current)||void 0===o||o.moveFocusedItem(C.rv.UP);else if(40===e.keyCode){var i;e.preventDefault(),null===(i=t.current)||void 0===i||i.moveFocusedItem(C.rv.DOWN)}else if(13===e.keyCode){var a,r;e.preventDefault(),null===(a=t.current)||void 0===a||null===(r=a.enterCallback)||void 0===r||r.call(a)}else 27===e.keyCode&&s()})(e,Re,Pe),ref:X,onChange:function(e,t){var s;void 0===t&&(t=null);const o=p.ZP.getInstance().getConfig().address_config.autocomplete_min_length||3;null==K||K(g.B.ATTEMPTED),null==O||O(!1),x.setLastStepType("Search");const i=e?e.target.value:t;pe(i);const a=0===(null==e||null===(s=e.target)||void 0===s?void 0:s.value);de(a?E.X.EMPTY_INPUT:null);const r=i.trim().length<o;null==b||b.trackLocationAttempted(Te,B,w),((e,t)=>{we.current(t,v(X),e),j(X)})(r?C.Te.SAVED_ADDRESS:C.Te.AUTOCOMPLETE,i),j(X)},"data-placeid":ce,onClick:()=>((e,t)=>{e===E.X.EMPTY_INPUT&&t(null)})(ne,de),"data-testid":"restaurants-search-form__input","aria-autocomplete":"list"}),(0,M.jsx)("strong",{className:"invalid-error-message",children:Y}),be&&(0,M.jsx)(D,{appConfig:I,ref:Re,addressSuggestionCollection:Ae||[],showSavedAddress:V,inputNode:null!=X&&X.current?X.current:void 0,addressSuggestionAction:"",handleAddressSelect:function(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);const o=e.id?"Saved":"Autocomplete",i=e.object_type,a="saved address"===i||"company address"===i?e:null;!ne&&re(!0),null==A||A(!1),null==m||m(null!=Ae?Ae:[]),s?ye(e):(null==O||O(!0),"Saved"===o&&b.trackLocationAttempted(e,B,w),x.setLastStepType(o),ve(a),le(e.place_id),me(e),Ge(e,t,a),Pe())},vendor:B,formType:w,autoSelect:!0,setInputValue:e=>{e&&pe(e)},translations:F,hideAddressSuggestions:()=>Ce(!1)}),(0,M.jsx)("label",{htmlFor:"delivery-information-postal-index",className:"msg-title",children:f}),""===_e&&(0,M.jsx)(u.Z,{translations:F,isWhereComponent:Q,autoSubmit:ee,hiddenError:j,gtmLocationService:b,inputRef:X,gpsPermission:oe,addressSuggestionCollection:Ae||[],onSuggestionListChanged:m,changeStateValue:e=>{const t={addressSuggestionCollection:Oe,showSuggestions:Ce,value:pe,isLocateMeClicked:Ne,errorState:de,isLoading:re,isLocationFound:ue};Object.keys(e).forEach((s=>{t.hasOwnProperty(s)&&t[s](e[s])}))},addressChangeTracker:x,selectedAddress:Te,vendor:B,formType:w,trackInputState:K,onChange:T,appConfig:I,onLocateMeFail:U,displayError:k,changeShouldRetrieveSuggestionsValue:e=>{ge(e)},isLoading:ae,isLocateMeClicked:fe,isLocationFound:Ee,isMapOpen:te,noAddressOpenMap:se,placement:(Ue=h.yf.default,Ue===h.yf.modalMap?h.yf.modalMap:h.yf.default),useCurrentLocationText:F.location_current_location_cta,addressBookPhase3EnabledMweb:!1,onSuggestionListSelected:a,showLocateMeText:!0}),ae&&(0,M.jsx)(n.g,{className:"locate-loading"}),!ae&&""!==_e&&(0,M.jsx)("span",{"data-testid":"input-clear-icon",className:"icon inline-search-cancel-icon",onClick:xe,role:"presentation",children:(0,M.jsx)(r(),{})})]})}),(0,M.jsx)("div",{id:"map-view-modal"}),Se&&(0,M.jsx)(y.R,{onSubmit:()=>Be(_e,v(X),C.Te.SAVED_ADDRESS),captchaResponse:Se})]});var Ue}));P.displayName="FullAddressInputSearchViewRefactor"},c006a31a1a2ace68e61f:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var o=s("54bdd803dcbe7795ce01"),i=s.n(o),a=s("281cbdced79d8f3d2562"),r=s.n(a),n=s("e56aa86c532afce58654"),d=s.n(n),c=s("3ea3cb108c28f44a15b3"),l=s("4d4238b3f32bba880178"),_=s("e57816ce2d5f3e48376c"),p=s("174811872339f1d02c40"),E=s.n(p),u=s("69084d01d3449fc1bc27"),h=s("787980cc545b28bdd6fd"),g=s("bd11212dd200c13dd4e4"),T=s("b48d419be3e1903edcd4"),m=s("12be0f0e9e2c7751d613"),f=s("6fd2852d6f9220b4ea44"),N=s("106d7a1cbeb4e2e71857"),S=s("6602d2ed10acb4d71eb7"),L=s("a7f44a4d9a149fde3658"),A=s("568ecdc81696e6199594"),O=s("549640134fdb6d7e36d7"),b=s("98d642fb299b851a2cd1"),C=s("9302435e81c621e827fb");let I=function(e){return e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e}({});class v extends u.PureComponent{static getDerivedStateFromProps(e){return{addressSuggestionCollection:e.addressSuggestionCollection,inputNode:e.inputNode}}constructor(e){super(e),this.enterCallback=void 0,this.isSuggestionSelected=!1,this.gtmLocationService=void 0,this.gtmLocationService=m.ZP.getInstance().getGTMLocationService();const t=e.addressSuggestionCollection;this.state={addressSuggestionCollection:t},this.enterCallback=r()(this.onEnter,500),this.handleBodyClick=this.handleBodyClick.bind(this),this.selectAddress=this.selectAddress.bind(this),this.focusItem=this.focusItem.bind(this)}componentDidMount(){document.body.addEventListener("click",this.handleBodyClick,!1),document.body.addEventListener("touchstart",this.handleBodyClick,!1)}componentWillUnmount(){document.body.removeEventListener("click",this.handleBodyClick,!1),document.body.removeEventListener("touchstart",this.handleBodyClick,!1)}render(){return(0,C.jsx)(b.p,{addressSuggestionCollection:this.props.addressSuggestionCollection,focusedItem:this.state.focusedItem,focusItem:this.focusItem,locateMeComponent:this.props.locateMeComponent,selectAddress:this.selectAddress,translations:this.props.translations})}moveFocusedItem(e){var t;const{addressSuggestionCollection:s,focusedItem:o}=this.state,{setInputValue:a}=this.props;if(!s)return;if(!this.state.focusedItem){const t=e===I.DOWN?0:s.length-1;return this.focusItem(s[t]),void a(s[t].formatted_customer_address)}let r;const n=s.findIndex((e=>i()(e,o)));r=e===I.DOWN?n===s.length-1?s[0]:s[n+1]:0===n?s[s.length-1]:s[n-1],this.focusItem(r),a(null===(t=r)||void 0===t?void 0:t.formatted_customer_address)}composedPath(e){const t=[];for(;e;){if(t.push(e),"HTML"===e.tagName)return t.push(document,window),t;e=e.parentElement}}onEnter(){const e=this.state.focusedItem;e?this.selectAddress(e):this.state.addressSuggestionCollection&&this.selectAddress(this.state.addressSuggestionCollection[0])}isSavedAddressCollection(e){return e&&e.length>0&&!!e[0].id}handleAddressSelectionOnUnfocusedInput(){const e=m.ZP.getInstance().getModel(),t=e.latitude&&e.longitude?e:void 0,{addressSuggestionCollection:s}=this.state;s&&s.length>0&&!this.isSavedAddressCollection(s)?this.props.handleAddressSelect(s[0],!0):t?this.props.handleAddressSelect(t,!1,!0):this.props.hideAddressSuggestions()}handleBodyClick(e){let t;switch(!0){case e.path:t=e.path;break;case"function"==typeof e.composedPath:t=e.composedPath();break;default:const s=e.target||e.srcElement;t=this.composedPath(s)}this.isBodyClickOutsideOfSuggestionsContainer(t)&&(this.props.autoSelect&&this.handleAddressSelectionOnUnfocusedInput(),this.gtmLocationService&&this.gtmLocationService.resetLocationAttemptedTracking())}isBodyClickOutsideOfSuggestionsContainer(e){return!e.find((e=>e.classList&&e.classList.contains("validation-wrapper")))}focusItem(e){this.setState({focusedItem:e},(()=>{this.isSuggestionSelected||(this.isSuggestionSelected=!0)}))}selectAddress(e){if(e){if(this.setState({selectedSaveAddress:null}),this.gtmLocationService){const t=e.id?"Saved":"Autocomplete";this.gtmLocationService.initializeLocationAttemptedTracking(t),this.gtmLocationService.trackLocationAttempted(e,this.props.vendor,this.props.formType)}this.props.handleAddressSelect(e),this.isSuggestionSelected=!1}}}v.defaultProps={autoSelect:!0};var R=s("5a5afc411b33944d3a7e"),M=s("5bac396c86413df162b8");class D extends u.PureComponent{static getDerivedStateFromProps(e,t){const s=!i()(e.selectedAddress,t.selectedAddress);return{expeditionType:e.expeditionType,selectedAddress:s?e.selectedAddress:t.selectedAddress,errorState:s?null:t.errorState}}constructor(e){super(e),this.getSuggestions=void 0,this.suggestionsPromise=void 0,this.debouncedPopulateSuggestions=void 0,this.addressSuggestionCollection=void 0,this.suggestionRef=void 0,this.isAttempted=void 0,this.snapShot=void 0,this.gpsPermission="",this.shouldRetrieveSuggestions=!1,this.handleSetLoadingStateEvent=e=>{this.changeStateValue({isLoading:e})},this.handleLocationInputComponentDisplayErrorEvent=e=>{this.setState({errorState:e}),this.hideSuggestions()},this.getAddressSuggestionCollection=()=>this.state.addressSuggestionCollection||[],this.renderLocateMeButtonComponent=e=>{let{placement:t,addressBookPhase3EnabledMweb:s=!1,showLocateMeText:o=!1}=e;return(0,C.jsx)(N.Z,{translations:this.props.translations,isWhereComponent:this.props.isWhereComponent,autoSubmit:this.props.autoSubmit,hiddenError:this.props.hiddenError,gtmLocationService:this.props.gtmLocationService,inputRef:this.props.inputRef,gpsPermission:this.gpsPermission,addressSuggestionCollection:this.addressSuggestionCollection,onSuggestionListChanged:this.props.onSuggestionListChanged,changeStateValue:this.changeStateValue,addressChangeTracker:this.props.addressChangeTracker,selectedAddress:this.state.selectedAddress,vendor:this.props.vendor,formType:this.props.formType,trackInputState:this.props.trackInputState,onChange:this.props.onChange,appConfig:this.props.appConfig,onLocateMeFail:this.props.onLocateMeFail,displayError:this.props.displayError,changeShouldRetrieveSuggestionsValue:this.changeShouldRetrieveSuggestionsValue,isLoading:this.state.isLoading,isLocateMeClicked:this.state.isLocateMeClicked,isLocationFound:this.state.isLocationFound,isMapOpen:this.props.isMapOpen,noAddressOpenMap:this.props.noAddressOpenMap,placement:t,useCurrentLocationText:this.props.translations.location_current_location_cta,addressBookPhase3EnabledMweb:s,onSuggestionListSelected:this.props.onSuggestionListSelected,showLocateMeText:o})},this.getRequiredFieldsWithMapping=()=>{const{multiline_formatted_address:e,fields:t}=this.props.appConfig.address_config,s=e.join(" ").replace(/[\{\}:,']+/g,"").split(" ");for(let e=0;e<s.length;e++)for(let o=0;t&&o<t.length;o++)s[e]===t[o].name&&(s[e]=t[o].df_name);return s.join(", ").replace(/_/g," ")},this.getLocateMeButtonPosition=e=>e===A.yf.modalMap?A.yf.modalMap:A.yf.default,this.initGPSPermissions(),this.getSuggestions=this.initGetSuggestions(),this.suggestionRef=u.createRef(),this.handleInputKeyPress=this.handleInputKeyPress.bind(this),this.OnInputFocus=this.OnInputFocus.bind(this),this.debouncedPopulateSuggestions=r()(this.populateSuggestions,250),this.handleInputChange=this.handleInputChange.bind(this),this.onAddressSelect=this.onAddressSelect.bind(this),this.isAttempted=!1,this.onInputClick=this.onInputClick.bind(this),this.onCancelSearch=this.onCancelSearch.bind(this),this.onClearClick=this.onClearClick.bind(this),this.setTrackingStatus=this.setTrackingStatus.bind(this),this.populateSuggestions=this.populateSuggestions.bind(this),this.setInputValue=this.setInputValue.bind(this),this.changeStateValue=this.changeStateValue.bind(this),this.emptySearchInput=this.emptySearchInput.bind(this),this.hideSuggestions=this.hideSuggestions.bind(this),this.state={selectedAddress:e.selectedAddress||null,expeditionType:null,addressSuggestionCollection:this.addressSuggestionCollection,value:this.emptySearchInput(e.fillInputSearch)?"":this.getInputValue(),placeId:"",focusAddressSuggestionDirection:"",selectedSaveAddress:null,showSuggestions:!1,isLoading:!1,isLocateMeClicked:!1,isLocationFound:!1,captchaResponse:null},this.snapShot=Object.assign({},this.state)}getInputValue(){const{selectedAddress:e}=this.props;if(e){const{formatted_customer_address:t}=e;return t||m.ZP.getInstance().getAddressFormatter().getFormattedAddress(e)}return""}initGetSuggestions(){return(0,h.ZP)(this.props.appConfig,this.props.showSavedAddress,this.props.locationService.getAddressService())}async initGPSPermissions(){if(navigator.permissions&&"function"==typeof navigator.permissions.query)try{const e=await navigator.permissions.query({name:"geolocation"});this.gpsPermission=e?e.state:""}catch(e){this.gpsPermission=""}}componentDidMount(){this.props.focusOnRender&&this.props.inputRef.current&&this.props.inputRef.current.focus(),this.props.hasLocationPermissionError&&this.handleLocateMeError()}registerNoAutocompleteEvents(){this.props.locationService.getEventLord().on("full-address-input-search-view:set-loading-state",this.handleSetLoadingStateEvent),this.props.locationService.getEventLord().on("location-input-component:displayError",this.handleLocationInputComponentDisplayErrorEvent)}emptySearchInput(e){return void 0===e&&(e=!0),!e}componentDidUpdate(e){this.props.selectedAddress&&!i()(e.selectedAddress,this.props.selectedAddress)?this.setState({selectedAddress:this.props.selectedAddress,value:this.getInputValue()}):this.emptySearchInput(this.props.fillInputSearch)&&this.setState({value:""}),this.props.clearAddress!==e.clearAddress&&this.onClearClick()}handleLocateMeError(){this.changeStateValue({isLoading:!1}),this.props.onLocateMeFail?(this.props.onLocateMeFail(),(0,_.v)().emit("geolocation:permission-denied")):(this.shouldRetrieveSuggestions=!0,this.showLocateMeError(),this.props.inputRef&&this.props.inputRef.current&&this.props.inputRef.current.focus()),(0,_.v)().emit("full-address-search:locate-me-error")}showLocateMeError(){this.props.displayError(f.X.NO_GEOLOCATION),this.props.gtmLocationService.trackLocationError("NO_GEOLOCATION","LocateMe"),this.setState({errorState:f.X.NO_GEOLOCATION})}async geocode(){const e=this.state.placeId,t=this.state.value,s=await(e?T.i.getInstance().getDetails({id:e}):T.i.getInstance().getGeocode({address:t}));return this.props.geocodeHandler&&this.props.geocodeHandler(s),s}scrollToInputOnMobile(){const{isMobileDevice:e,userDeviceOs:t}=(0,l.Z)();if(e&&"Android"===t){const e=document.querySelector(".location-form");e&&window&&window.scroll(0,e.offsetTop)}}changeShouldRetrieveSuggestionsValue(e){this.shouldRetrieveSuggestions=e}OnInputFocus(){this.scrollToInputOnMobile(),this.props.focusOnInput&&this.props.focusOnInput(!0),this.setTrackingStatus(O.B.CLICKED),this.props.gtmLocationService&&(this.props.gtmLocationService.initializeLocationAttemptedTracking("Search"),this.props.gtmLocationService.trackLocationClicked(this.state.selectedAddress,this.props.vendor,this.props.formType,"Search")),this.isAttempted=!1,this.shouldRetrieveSuggestions?this.shouldRetrieveSuggestions=!1:this.populateSuggestions(this.state.value,this.getInputElOffset(),M.Te.SAVED_ADDRESS)}setTrackingStatus(e){this.props.trackInputState&&this.props.trackInputState(e)}onInputClick(){this.snapShot||(this.snapShot=Object.assign({},this.state)),this.state.errorState===f.X.EMPTY_INPUT&&this.setState({errorState:null})}getInputElOffset(){if(this.props.inputRef&&this.props.inputRef.current){const{selectionStart:e,selectionEnd:t}=this.props.inputRef.current;return e===t?e:null}return null}populateSuggestions(e,t,s){this.setState({isLoading:!0}),this.suggestionsPromise=this.getSuggestions(e,t,s),this.suggestionsPromise.then(this.populateIfLastSuggestionsPromise(this.suggestionsPromise,s,e).bind(this)).catch((t=>{if(s===M.Te.SAVED_ADDRESS){var o;const e=m.ZP.getInstance().getLocationXhrService().isAppIdExist(t),s=(null==t||null===(o=t.response)||void 0===o?void 0:o.data)||t;e&&this.setState({captchaResponse:s}),this.setState({isLoading:!1})}else{this.setState({errorState:f.X.NO_GEOLOCATION,isLoading:!1});const t=new g.C({formatted_customer_address:e});this.props.gtmLocationService.trackLocationError("NO_GEOLOCATION","Search",t,this.props.formType),this.props.displayError(f.X.NO_GEOLOCATION)}}))}populateIfLastSuggestionsPromise(e,t,s){return o=>{if(this.setState({captchaResponse:null}),this.suggestionsPromise===e){var i;if(!this.props.disableAutoValidation){if(0===o.length&&t===M.Te.AUTOCOMPLETE){this.setState({errorState:f.X.INVALID_ADDRESS_NOT_FOUND});const e=new g.C({formatted_customer_address:s});this.props.gtmLocationService.trackLocationError("NO_RESULTS_FOUND","Search",e,this.props.formType),this.props.displayError(f.X.INVALID_ADDRESS_NOT_FOUND)}else t===M.Te.AUTOCOMPLETE&&this.hideError()}this.addressSuggestionCollection=o,this.props.onSuggestionListChanged&&t===M.Te.AUTOCOMPLETE&&this.props.onSuggestionListChanged(this.addressSuggestionCollection),this.setState({addressSuggestionCollection:this.addressSuggestionCollection,showSuggestions:(null===(i=this.addressSuggestionCollection)||void 0===i?void 0:i.length)>0,isLoading:!1},(()=>{this.props.onSuggestionListChanged&&this.props.onSuggestionListChanged(this.addressSuggestionCollection)}))}}}resetSuggestions(){this.addressSuggestionCollection&&this.addressSuggestionCollection.length>=0&&(this.addressSuggestionCollection=[],this.setState({addressSuggestionCollection:null,showSuggestions:!1})),this.props.onSuggestionListChanged&&this.props.onSuggestionListChanged(this.addressSuggestionCollection)}showSuggestions(e){this.debouncedPopulateSuggestions(this.state.value,this.getInputElOffset(),e),this.hideError()}handleInputKeyPress(e){if(38===e.keyCode)e.preventDefault(),this.suggestionRef.current&&this.suggestionRef.current.moveFocusedItem(I.UP);else if(40===e.keyCode)e.preventDefault(),this.suggestionRef.current&&this.suggestionRef.current.moveFocusedItem(I.DOWN);else if(13===e.keyCode){var t,s;e.preventDefault(),null===(t=this.suggestionRef.current)||void 0===t||null===(s=t.enterCallback)||void 0===s||s.call(t)}else 27===e.keyCode&&this.resetSuggestions()}handleInputChange(e,t){var s;void 0===t&&(t=null);const o=m.ZP.getInstance().getConfig().address_config.autocomplete_min_length||3;this.setTrackingStatus(O.B.ATTEMPTED),this.props.onTouched&&this.props.onTouched(!1),this.props.addressChangeTracker.setLastStepType("Search"),this.setState({errorState:0===(null==e||null===(s=e.target)||void 0===s?void 0:s.value)?f.X.EMPTY_INPUT:null,value:e?e.target.value:t},(()=>{const e=this.state.value.trim().length<o;this.props.gtmLocationService&&(this.isAttempted||(this.props.gtmLocationService.trackLocationAttempted(this.state.selectedAddress,this.props.vendor,this.props.formType),this.isAttempted=!0)),this.showSuggestions(e?M.Te.SAVED_ADDRESS:M.Te.AUTOCOMPLETE),this.hideError()}))}hideError(){this.props.hiddenError(this.props.inputRef)}onAddressChange(e,t){const{onChange:s,onSuggestionListSelected:o}=this.props;s&&s(e,t),null==o||o(e)}handleCachedAddressSelection(e){const{selectedAddress:t,selectedSaveAddress:s}=this.state;this.hideSuggestions(),this.changeStateValue({isLoading:!1}),t||(s?this.onAddressChange(s,!1):this.setState({placeId:e.place_id,selectedAddress:e},(()=>this.onAddressChange(e,!1))))}onCachedAddressSelect(e){this.state.errorState?(this.hideSuggestions(),this.changeStateValue({isLoading:!1})):this.handleCachedAddressSelection(e)}handleAddressSelection(e,t){const{id:s,is_company_address:o=!1}=e,{appConfig:i,disableAutoValidation:a}=this.props,{selectedSaveAddress:r}=this.state;switch(!0){case"b2b"===i.platform&&o:const n=Object.assign({},r,{corporate_reference_id:s,is_company_address:!0});return this.onAddressChange(n,t),void this.changeStateValue({isLoading:!1});case!!r:return this.onAddressChange(r,t),void this.changeStateValue({isLoading:!1});case a:return this.onAddressChange(e,t),void this.changeStateValue({isLoading:!1});default:return void this.geocode().then((e=>{e.object_type="autocomplete",this.onAddressChange(e,t),this.changeStateValue({isLoading:!1})}))}}onAddressSelect(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);const{errorState:o}=this.state,{addressChangeTracker:i,focusOnInput:a,formType:r,gtmLocationService:n,onSuggestionListChanged:d,onTouched:c,vendor:l}=this.props;if(o||this.changeStateValue({isLoading:!0}),a&&a(!1),d&&d(this.addressSuggestionCollection),s)return void this.onCachedAddressSelect(e);c&&c(!0);const _=e.id?"Saved":"Autocomplete";"Saved"===_&&n.trackLocationAttempted(e,l,r),i.setLastStepType(_);const p=e.object_type;this.setState({selectedSaveAddress:"saved address"===p||"company address"===p?e:null,placeId:e.place_id,selectedAddress:e},(()=>{this.resetSuggestions(),this.handleAddressSelection(e,t)}))}hideSuggestions(){this.setState({showSuggestions:!1})}onCancelSearch(){this.props.onCancelSearch?(this.props.onCancelSearch(),this.state.errorState===f.X.EMPTY_INPUT&&this.setState({errorState:null})):(this.setState(this.snapShot),this.snapShot=null,this.hideSuggestions())}onClearClick(){this.hideSuggestions(),this.hideError(),this.props.clearInputRef&&this.props.clearInputRef(!1),this.setState({value:"",selectedAddress:null},(()=>{this.props.inputRef.current&&this.props.inputRef.current.focus()}))}setInputValue(e){e&&this.setState({value:e})}changeStateValue(e){this.setState(e)}render(){const e=this.getAddressSuggestionCollection(),t=E()("validation-wrapper input-box js-input-box","sr input-box js-input-box",{"validation-wrapper-Mweb":this.props.isWhereComponent&&(0,L.J)(this.props.isWhereComponent)},{big:this.props.inputSize&&this.props.inputSize===M.vz.BIG});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:t,children:(0,C.jsxs)("div",{className:"search-input-container",children:[(0,C.jsx)("input",{type:"text",className:"restaurants-search-form__input restaurants__location__input",id:"delivery-information-postal-index",name:"",placeholder:this.props.placeholder,value:this.state.value,autoComplete:"off",onFocus:this.OnInputFocus,onKeyDown:this.handleInputKeyPress,ref:this.props.inputRef,onChange:this.handleInputChange,"data-placeid":this.state.placeId,onClick:this.onInputClick,"data-testid":"restaurants-search-form__input","aria-autocomplete":"list"}),(0,C.jsx)("strong",{className:"invalid-error-message",children:this.props.toolTipMsg}),this.state.showSuggestions&&(0,C.jsx)(v,{appConfig:this.props.appConfig,ref:this.suggestionRef,addressSuggestionCollection:e,showSavedAddress:this.props.showSavedAddress,inputNode:this.props.inputRef&&this.props.inputRef.current?this.props.inputRef.current:void 0,addressSuggestionAction:this.state.focusAddressSuggestionDirection,handleAddressSelect:this.onAddressSelect,vendor:this.props.vendor,formType:this.props.formType,autoSelect:!0,setInputValue:this.setInputValue,translations:this.props.translations,hideAddressSuggestions:this.hideSuggestions}),(0,C.jsx)("label",{htmlFor:"delivery-information-postal-index",className:"msg-title",children:this.props.title}),""===this.state.value&&this.renderLocateMeButtonComponent({placement:this.getLocateMeButtonPosition(A.yf.default),showLocateMeText:!0}),this.state.isLoading&&(0,C.jsx)(c.g,{className:"locate-loading"}),!this.state.isLoading&&""!==this.state.value&&(0,C.jsx)("span",{"data-testid":"input-clear-icon",className:"icon inline-search-cancel-icon",onClick:this.onClearClick,role:"presentation",children:(0,C.jsx)(d(),{})})]})}),(0,C.jsx)("div",{id:"map-view-modal"}),this.state.captchaResponse&&(0,C.jsx)(R.R,{onSubmit:()=>this.populateSuggestions(this.state.value,this.getInputElOffset(),M.Te.SAVED_ADDRESS),captchaResponse:this.state.captchaResponse})]})}}D.contextType=S.K},"5a5afc411b33944d3a7e":(e,t,s)=>{"use strict";s.d(t,{R:()=>C});var o=s("4d9c133d8eb8c4f04928"),i=s("62360b9b8df4952ab993"),a=s("174811872339f1d02c40"),r=s.n(a),n=s("9302435e81c621e827fb");const d=["className","children"],c=e=>{let{className:t,children:s}=e,o=(0,i.Z)(e,d);return(0,n.jsx)("div",Object.assign({},o,{className:r()(t,"modal-body"),children:s}))},l=["link","className","isEnabled","children"],_=e=>{let{link:t="",className:s,isEnabled:o=!0,children:a}=e,d=(0,i.Z)(e,l);return(0,n.jsx)("a",Object.assign({href:t,className:r()(s,{disabled:!o})},d,{children:a}))},p=["className","size"],E=e=>{let{className:t,size:s="lg"}=e,o=(0,i.Z)(e,p);return(0,n.jsx)("div",{className:"modal-mobile-header",children:(0,n.jsx)(_,Object.assign({link:"#"},o,{className:r()("close-button",s,t)}))})};E.displayName="ModalCloseButton";const u=E,h=["className","children"],g=e=>{let{className:t,children:s}=e,o=(0,i.Z)(e,h);return(0,n.jsx)("p",Object.assign({},o,{className:r()(t,"modal-description"),children:s}))},T=["className","children"],m=e=>{let{className:t,children:s}=e,o=(0,i.Z)(e,T);return(0,n.jsx)("div",Object.assign({},o,{className:r()(t,"modal-header"),children:s}))};var f=s("69084d01d3449fc1bc27");const N=["isShown","maskClassNames"],S=e=>{let{isShown:t=!1,maskClassNames:s}=e,o=(0,i.Z)(e,N);return(0,n.jsx)("div",Object.assign({},o,{className:r()("modal-backdrop",s,{hide:!t})}))};S.displayName="ModalMask";const L=S,A=["ariaLabelledby","children","className","onClose","show"],O=e=>{let{ariaLabelledby:t,children:s,className:o,onClose:a,show:d}=e,c=(0,i.Z)(e,A);const l=e=>{"Escape"===e.key&&a(e)},_=e=>{null===e.target.closest(".modal-content")&&a(e)};return(0,f.useEffect)((()=>{const e=l;return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L,{"data-testid":"modal-overlay",isShown:d,onClick:_}),(0,n.jsx)("section",Object.assign({className:r()("react-modal new-modal modal",o,{hide:!d}),tabIndex:-1,role:"dialog","aria-labelledby":t,"aria-hidden":"true",onClick:_},c,{children:(0,n.jsx)("div",{className:"modal-dialog",children:(0,n.jsx)("div",{className:"modal-content",children:s})})}))]})};O.Body=c,O.Header=m,O.Description=g,O.CloseButton=u,O.Mask=L;const b=O,C=e=>(0,n.jsx)(b,{show:!0,onClose:()=>{},children:(0,n.jsx)(b.Body,{children:(0,n.jsx)(o.U,{className:"authentication__captcha",onSuccess:e.onSubmit,response:e.captchaResponse,pageType:"checkout",elementId:"captcha-container-address"})})})},"5bac396c86413df162b8":(e,t,s)=>{"use strict";s.d(t,{Te:()=>i,rv:()=>a,vz:()=>o});let o=function(e){return e.BIG="big",e.SMALL="small",e}({}),i=function(e){return e.AUTOCOMPLETE="autocomplete",e.SAVED_ADDRESS="saved address",e}({}),a=function(e){return e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e}({})},"8898b63d76f1fcc2092e":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("62360b9b8df4952ab993"),i=s("69084d01d3449fc1bc27"),a=s("12be0f0e9e2c7751d613"),r=s("e6d8e6e4db446a4649db"),n=s("9302435e81c621e827fb");const d=["forwardedRef"];const c=function(e,t){class s extends i.Component{constructor(){super(...arguments),this.state={loading:!0,appConfig:void 0}}componentDidMount(){a.ZP.loadAddressServiceConfig(this.props.appConfig).then((e=>{const t=Object.assign({},this.props.appConfig,{address_config:e});this.setState({appConfig:t,loading:!1})}))}render(){if(this.state.loading)return null;{const s=this.props,{forwardedRef:i}=s,a=(0,o.Z)(s,d);return(0,n.jsx)(r.d,{boundaryId:t||"locationComponent",children:(0,n.jsx)(e,Object.assign({},a,{ref:i,appConfig:this.state.appConfig}))})}}}const c=i.forwardRef(((e,t)=>(0,n.jsx)(s,Object.assign({},e,{forwardedRef:t}))));return c.displayName="LocationConfigLoader",c}},"71bb8be3e7a379d028e1":(e,t,s)=>{"use strict";s.d(t,{b:()=>d});var o=s("74401c5b2584e78f1800"),i=s("bdc216a4d248b845f00c"),a=s("9302435e81c621e827fb");const r=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,children:[(0,a.jsx)("defs",{children:(0,a.jsx)("path",{id:"ic-arrow-tail-back",d:"M3.81 11.5H22v1H3.81L10 19.3l-.73.7L2 12l7.27-8 .73.7-6.19 6.8z"})}),(0,a.jsx)("use",{fillRule:"nonzero",xlinkHref:"#ic-arrow-tail-back"})]}),n=()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{fill:"#707070",fillRule:"nonzero",d:"M18.5,2 C18.7454599,2 18.9496084,2.17687516 18.9919443,2.41012437 L19,2.5 L19,21.5 C19,21.7454599 18.8231249,21.9496084 18.5898756,21.9919443 L18.5,22 L13.5,22 C13.2545401,22 13.0503916,21.8231249 13.0080557,21.5898756 L13,21.5 L13,18 L11,18 L11,21.5 C11,21.7454599 10.8231248,21.9496084 10.5898756,21.9919443 L10.5,22 L5.5,22 C5.25454011,22 5.05039163,21.8231249 5.00805567,21.5898756 L5,21.5 L5,2.5 C5,2.25454011 5.17687516,2.05039163 5.41012437,2.00805567 L5.5,2 L18.5,2 Z M17,4 L7,4 L7,20 L9,20 L9,16.5 C9,16.2545401 9.17687516,16.0503916 9.41012437,16.0080557 L9.5,16 L14.5,16 C14.7454599,16 14.9496084,16.1768751 14.9919443,16.4101244 L15,16.5 L15,20 L17,20 L17,4 Z"}),(0,a.jsx)("path",{fill:"#707070",fillRule:"nonzero",d:"M10.5 11C10.7761424 11 11 11.2238576 11 11.5L11 11.5 11 12.5C11 12.7761424 10.7761424 13 10.5 13L10.5 13 9.5 13C9.22385763 13 9 12.7761424 9 12.5L9 12.5 9 11.5C9 11.2238576 9.22385763 11 9.5 11L9.5 11 10.5 11zM14.5 11C14.7761424 11 15 11.2238576 15 11.5L15 11.5 15 12.5C15 12.7761424 14.7761424 13 14.5 13L14.5 13 13.5 13C13.2238576 13 13 12.7761424 13 12.5L13 12.5 13 11.5C13 11.2238576 13.2238576 11 13.5 11L13.5 11 14.5 11zM10.5 7C10.7761424 7 11 7.22385763 11 7.5L11 7.5 11 8.5C11 8.77614237 10.7761424 9 10.5 9L10.5 9 9.5 9C9.22385763 9 9 8.77614237 9 8.5L9 8.5 9 7.5C9 7.22385763 9.22385763 7 9.5 7L9.5 7 10.5 7zM14.5 7C14.7761424 7 15 7.22385763 15 7.5L15 7.5 15 8.5C15 8.77614237 14.7761424 9 14.5 9L14.5 9 13.5 9C13.2238576 9 13 8.77614237 13 8.5L13 8.5 13 7.5C13 7.22385763 13.2238576 7 13.5 7L13.5 7 14.5 7z"})]})}),d=e=>{let{addressCollection:t,isMView:s,locationService:d,onAddressChange:c,onCancelSearch:l}=e;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)("p",{className:"corporate-switch-to-personal",children:(0,a.jsx)("span",{role:"button",tabIndex:0,onKeyDown:l,onClick:l,className:"cancel-search",children:(0,a.jsx)(r,{})})}),(0,a.jsx)("ul",{className:"corporate-address-option-list","data-testid":"location-dropdown__option",children:t&&t.map((e=>{var t;return(0,a.jsx)("li",{"data-testid":"location-dropdown__option-item",children:(0,a.jsx)("div",{role:"button",tabIndex:0,onKeyDown:()=>c(e),onClick:()=>c(e),"data-testid":"location-button-item",children:(0,a.jsxs)("label",{className:"radio-box",children:[(0,a.jsx)(o.Z,{label:"",id:null===(t=e.id)||void 0===t?void 0:t.toString(),defaultChecked:(0,i.Sh)(d.getModel(),e,d.getAddressFormatter().getFormMappings())}),(0,a.jsx)("i",{className:"office-thick-icon icon",children:(0,a.jsx)(n,{})}),(0,a.jsx)("span",{className:"formatted-address",children:d.getFormattedAddress(d.getLocationModelDataFromLocationData(e))})]})})},e.id)}))})]})}},"5a9197c0d5f09d4985ef":(e,t,s)=>{"use strict";s.d(t,{B:()=>_});var o=s("3d76b5ef4afae4f8a944"),i=s.n(o),a=s("a7dceeac37519cfc1804"),r=s("174811872339f1d02c40"),n=s.n(r),d=s("69084d01d3449fc1bc27"),c=s("92dfcc2420a73bb8a53b"),l=s("9302435e81c621e827fb");const _=e=>{let{addressCollection:t,listDisplayed:s,locationService:o,onAddressChange:r,selectedAddress:_,toggleLocationSelection:p}=e;const[E,u]=(0,d.useState)({}),h=(0,a.T)(),{input_label_experiment:g}=c.w;(0,d.useEffect)((()=>{const e=document.querySelector(".location-toggle-btn"),t=()=>{if(e){let t=.9*e.clientWidth;const s=window.innerWidth-32;t>s&&(t=.9*s),u({width:t})}};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const T=n()("location-toggle-btn",{active:s}),m=h(g);return(0,l.jsxs)("div",{className:"location-dropdown","data-testid":"location-dropdown__select",children:[(0,l.jsxs)("button",{className:T,onClick:p,"data-testid":"toggle-button",children:[(0,l.jsx)("span",{style:E,children:_||m}),(0,l.jsx)(i(),{className:"header-order-button-arrow"})]}),s&&(0,l.jsx)("ul",{className:"location-list","data-testid":"location-dropdown__select-list",children:t&&t.map((e=>(0,l.jsx)("li",{"data-testid":"location-dropdown__select-list-item",children:(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:()=>r(e),onKeyDown:()=>r(e),"data-testid":"location-dropdown__select-list-change",children:o.getFormattedAddress(o.getLocationModelDataFromLocationData(e))})},e.id)))})]})}},"0006a4104484688abb24":(e,t,s)=>{"use strict";s.d(t,{a:()=>u});var o=s("d7f2db0229e7c7df3214"),i=s("0e8400aef1ea36fada43"),a=s("69084d01d3449fc1bc27"),r=s("94217eecef624954b619"),n=s("58f9fd2015b2625e1755"),d=s("12be0f0e9e2c7751d613"),c=s("78bee7a5e6e56ceff1d4"),l=s("5a5afc411b33944d3a7e"),_=s("71bb8be3e7a379d028e1"),p=s("5a9197c0d5f09d4985ef"),E=s("9302435e81c621e827fb");const u=e=>{let{locationService:t,appConfig:s,translations:u,selectedAddress:h,expeditionType:g,fullAddressSearchEventName:T,onChange:m,onCancelSearch:f,isMView:N,isDropdown:S,showCaptcha:L}=e;const[A,O]=(0,a.useState)(!1),[b,C]=(0,a.useState)([]),[I,v]=(0,a.useState)(null),[R,M]=(0,a.useState)(0),D=t.getGTMLocationService(),y=()=>{O((e=>!e))},P=async()=>{const e=(0,n.Z)(t.getAddressService(),t.getCustomerId());try{const t=await e();v(null);if(!t.some((e=>e.type===r._.COMPANY))&&R<=2)return void M((e=>e+1));const s=t.filter((e=>e.corporate_reference_id));0===s.length&&o.k.error({error:new Error,message:"Empty address for non-flexi user",extraInfo:{boundaryId:"corporate_admin-data-location"}}),C(s)}catch(e){var s;const t=d.ZP.getInstance().getLocationXhrService(),o=(null==e||null===(s=e.response)||void 0===s?void 0:s.data)||e;t.isAppIdExist(e)&&v(o)}},G=e=>{e.corporate_reference_id||(e.corporate_reference_id=e.id);const s=Object.assign({},e,{isCompanyAddress:!0,formatted_customer_address:t.getFormattedAddress(e)});t.setFromFormat(s);const o=t.getModel();(0,c.Wj)(h,o.formatted_customer_address)&&(o.expedition_type=g,D.trackCorporateLocationClick(o),"function"==typeof m&&m(o),t.getEventLord().emit("address:changed",o),t.getEventLord().emit(T||"full-address-search:submit",o),y())};return(0,a.useEffect)((()=>{P()}),[R]),(0,E.jsx)(i.$,{translation:Object.assign({},u),children:(0,E.jsxs)("div",{className:"corporate-address-bar","data-testid":"corporate-location-refactored",children:[S?(0,E.jsx)(p.B,{addressCollection:b,locationService:t,onAddressChange:G,appConfig:s,listDisplayed:A,toggleLocationSelection:y,selectedAddress:h}):(0,E.jsx)(_.b,{addressCollection:b,locationService:t,onAddressChange:G,isMView:N,onCancelSearch:f}),I&&L&&(0,E.jsx)(l.R,{onSubmit:P,captchaResponse:I})]})})}},ac39dfcda3bf58f38ee3:(e,t,s)=>{"use strict";s.d(t,{tI:()=>h});var o=s("d7f2db0229e7c7df3214"),i=s("0e8400aef1ea36fada43"),a=s("69084d01d3449fc1bc27"),r=(s("2e0796c118320b51c6e6"),s("94217eecef624954b619")),n=s("58f9fd2015b2625e1755"),d=s("12be0f0e9e2c7751d613"),c=s("5a5afc411b33944d3a7e"),l=s("8898b63d76f1fcc2092e"),_=s("71bb8be3e7a379d028e1"),p=s("5a9197c0d5f09d4985ef"),E=s("9302435e81c621e827fb");class u extends a.PureComponent{constructor(e){super(e),this.gtmLocationService=void 0,this.fetchAddresses=async()=>{const e=(0,n.Z)(this.props.locationService.getAddressService(),this.props.locationService.getCustomerId());try{const t=await e();this.setState({captchaResponse:null});if(t.some((e=>e.type===r._.COMPANY))||!(this.state.counter<=2)){const e=t.filter((e=>e.corporate_reference_id));return 0===e.length&&o.k.error({error:new Error,message:"Empty address for non-flexi user",extraInfo:{boundaryId:"corporate_admin-data-location"}}),void this.setState({addressCollection:e})}this.setState({counter:this.state.counter+1},(()=>{this.fetchAddresses()}))}catch(e){var t;const s=d.ZP.getInstance().getLocationXhrService(),o=(null==e||null===(t=e.response)||void 0===t?void 0:t.data)||e;s.isAppIdExist(e)&&this.setState({captchaResponse:o})}},this.toggleLocationSelection=()=>{this.setState({listDisplayed:!this.state.listDisplayed})},this.onAddressChange=e=>{e.corporate_reference_id||(e.corporate_reference_id=e.id);const t=Object.assign({},e,{isCompanyAddress:!0,formatted_customer_address:this.props.locationService.getFormattedAddress(e)});this.props.locationService.setFromFormat(t);const s=this.props.locationService.getModel();this.isAddressChanged(s.formatted_customer_address)&&(s.expedition_type=this.props.expeditionType,this.gtmLocationService.trackCorporateLocationClick(s),"function"==typeof this.props.onChange&&this.props.onChange(s),this.props.locationService.getEventLord().emit("address:changed",s),this.props.locationService.getEventLord().emit(this.props.fullAddressSearchEventName||"full-address-search:submit",s),this.toggleLocationSelection())},this.isAddressChanged=e=>null!==this.props.selectedAddress&&this.props.selectedAddress!==e,this.state={listDisplayed:!1,formMappings:e.locationService.getAddressFormatter().getFormMappings(),addressCollection:[],counter:0,captchaResponse:null},this.gtmLocationService=this.props.locationService.getGTMLocationService()}componentDidMount(){this.fetchAddresses()}render(){const e={addressCollection:this.state.addressCollection,formMappings:this.state.formMappings,locationService:this.props.locationService,onAddressChange:this.onAddressChange};return(0,E.jsx)(i.$,{translation:Object.assign({},this.props.translations),children:(0,E.jsxs)("div",{className:"corporate-address-bar",children:[this.props.isDropdown?(0,E.jsx)(p.B,Object.assign({},e,{appConfig:this.props.appConfig,listDisplayed:this.state.listDisplayed,toggleLocationSelection:this.toggleLocationSelection,selectedAddress:this.props.selectedAddress})):(0,E.jsx)(_.b,Object.assign({},e,{isMView:this.props.isMView,onCancelSearch:this.props.onCancelSearch})),this.state.captchaResponse&&this.props.showCaptcha&&(0,E.jsx)(c.R,{onSubmit:()=>this.fetchAddresses(),captchaResponse:this.state.captchaResponse})]})})}}const h=(0,l.Z)(u,"CorporateLocationInput")},"6fd2852d6f9220b4ea44":(e,t,s)=>{"use strict";s.d(t,{X:()=>o});let o=function(e){return e.EMPTY_INPUT="EMPTY_INPUT",e.INVALID_ADDRESS_NOT_FOUND="INVALID_ADDRESS_NOT_FOUND",e.INVALID_MAP_ADDRESS_NOT_FOUND="INVALID_MAP_ADDRESS_NOT_FOUND",e.INVALID_ADDRESS_COUNTRY_NOT_SUPPORTED="INVALID_ADDRESS_COUNTRY_NOT_SUPPORTED",e.INCOMPLETE_ADDRESS_BUILDING_AND_STREET="INCOMPLETE_ADDRESS_BUILDING_AND_STREET",e.INCOMPLETE_ADDRESS_BUILDING="INCOMPLETE_ADDRESS_BUILDING",e.INCOMPLETE_ADDRESS_STREET="INCOMPLETE_ADDRESS_STREET",e.INCOMPLETE_ADDRESS_POSTCODE="INCOMPLETE_ADDRESS_POSTCODE",e.NO_GEOLOCATION="NO_GEOLOCATION",e.INVALID_ADDRESS="INVALID_ADDRESS",e.ADDRESS_NOT_DELIVERABLE="ADDRESS_NOT_DELIVERABLE",e.NA="N/A",e}({})},"106d7a1cbeb4e2e71857":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var o=s("e57816ce2d5f3e48376c"),i=s("69084d01d3449fc1bc27"),a=s("bd11212dd200c13dd4e4"),r=s("8925fd7ba214b7a70d3b"),n=s("77dd625b88c8b2482c64"),d=s("6fd2852d6f9220b4ea44"),c=s("ad897cd0cd5fe702c99b"),l=s("972a2a99f755405c8851"),_=s("df45c342335190e4d755"),p=s.n(_);let E=function(e){return e.LocateMeCircular="locate-me-circular",e.LocateMeWithText="locate-me-with-text",e}({});var u=s("568ecdc81696e6199594"),h=s("9302435e81c621e827fb");const g=e=>(0,h.jsx)("div",{"data-testid":"locate-me-suggestion",onClick:e.locateMe,onKeyDown:e.locateMe,role:"presentation",className:"locate-me-component",children:!e.isLoading&&(e.showLocateMeText?(0,h.jsx)(l.z,{"data-testid":E.LocateMeWithText,ariaLabel:e.translations&&e.translations.A11Y_ICON_LOCATE_ME,onKeyDown:e.locateMe,className:"locate-me locate-me-btn\n            "+(e.isMapOpen?"text-map-opened":"text-map-closed")+" \n            "+(e.placement===u.yf.default?"default-locate-me-with-text":"")+"\n            "+(e.placement===u.yf.modalMap?"map-locate-me-with-text":"")+"\n            "+(e.isLocateMeClicked?"locate-me-clicked":"")+"\n            "+(e.isLocationFound?"location-found":"")+"\n            ",variant:e.isMapOpen&&e.placement===u.yf.modalMap?"secondary":"text",prefix:(0,h.jsx)(p(),{}),children:e.translations&&e.translations.A11Y_ICON_LOCATE_ME}):(0,h.jsx)(c.Y,{"data-testid":E.LocateMeCircular,ariaLabel:e.translations?e.translations.A11Y_ICON_LOCATE_ME:"",onKeyDown:e.locateMe,className:"locate-me locate-me-btn-refresh\n            "+(e.isMapOpen?"map-opened":"map-closed")+" \n            "+(e.placement===u.yf.modalMap?"map-locate-me":"")+"\n            "+(e.isLocateMeClicked?"locate-me-clicked":"")+"\n            "+(e.isLocationFound?"location-found":"")+"\n        ",children:(0,h.jsx)(p(),{id:"locate-me"})}))});var T=s("549640134fdb6d7e36d7");const m=e=>{const t=()=>{var t;t=T.B.ATTEMPTED,e.trackInputState&&e.trackInputState(t),e.addressChangeTracker.setLastStepType("LocateMe"),e.gtmLocationService.trackLocateMeStart(),e.gtmLocationService.initializeLocationAttemptedTracking("LocateMe");const s=e.selectedAddress||new a.C;e.gtmLocationService.trackLocationClicked(s,e.vendor,e.formType,"LocateMe"),e.gtmLocationService.trackLocationAttempted(s,e.vendor,e.formType)},s=(t,s)=>{const o="granted"===s?n.KK.GPS_ENABLED:n.KK.GPS_PERMISSION_DENIED,i=o===n.KK.GPS_ENABLED;"prompt"===t&&e.gtmLocationService.trackGeolocationDialogStatus(o,i)},handleLocateMeError=()=>{var t,s;(e.changeStateValue({isLoading:!1,isLocateMeClicked:!1,isLocationFound:!1}),e.onLocateMeFail)?(e.onLocateMeFail(),(0,o.v)().emit("geolocation:permission-denied")):(e.changeShouldRetrieveSuggestionsValue(!0),e.displayError(d.X.NO_GEOLOCATION),e.gtmLocationService.trackLocationError("NO_GEOLOCATION","LocateMe"),e.changeStateValue({errorState:d.X.NO_GEOLOCATION}),e.inputRef&&null!==(t=e.inputRef)&&void 0!==t&&null!==(s=t.current)&&void 0!==s&&s.focus&&e.inputRef.current.focus());(0,o.v)().emit("full-address-search:locate-me-error")},c=()=>{e.addressSuggestionCollection&&e.addressSuggestionCollection.length>=0&&e.changeStateValue({addressSuggestionCollection:[],showSuggestions:!1}),e.onSuggestionListChanged&&e.onSuggestionListChanged(e.addressSuggestionCollection);const i=new r.Z(e.gtmLocationService);e.hiddenError(e.inputRef),t(),e.changeStateValue({isLoading:!0,isLocateMeClicked:!0}),i.getAddress().then((t=>{var i,r;e.changeStateValue({isLoading:!1}),s(e.gpsPermission,"granted"),(r=t)instanceof a.C&&(e.changeStateValue({value:r.formatted_customer_address,isLocateMeClicked:!1,isLocationFound:!0}),e.onChange&&e.onChange(r,!e.autoSubmit)),(0,o.v)().emit("full-address-search:locate-me-end"),null===(i=e.onSuggestionListSelected)||void 0===i||i.call(e,t)})).catch((()=>{s(e.gpsPermission,"denied"),handleLocateMeError()}))};return(0,i.useEffect)((()=>{e.noAddressOpenMap&&c()}),[e.noAddressOpenMap]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(g,{translations:e.translations,locateMe:c,isLocateMeClicked:e.isLocateMeClicked,isLocationFound:e.isLocationFound,isMapOpen:e.isMapOpen,placement:e.placement,useCurrentLocationText:e.useCurrentLocationText,appConfig:e.appConfig,isWhereComponent:e.isWhereComponent,isLoading:e.isLoading,showLocateMeText:e.showLocateMeText})})}},e6d8e6e4db446a4649db:(e,t,s)=>{"use strict";s.d(t,{d:()=>d});var o=s("62360b9b8df4952ab993"),i=s("ac129530af3fa799bed9"),a=s("b7713ec20a37c71a6f98"),r=s("9302435e81c621e827fb");const n=["children","beforeCapture","boundaryId"],d=e=>{let{children:t,beforeCapture:s,boundaryId:d}=e,c=(0,o.Z)(e,n);return(0,r.jsx)(a.SV,Object.assign({beforeCapture:(e,t,o)=>{e.setTags({boundaryId:d,withErrorBoundary:!0,serviceName:"errorTracking",networkType:(0,i._)(),screenSize:(0,i.t)()}),null==s||s(e,t,o)}},c,{children:t}))}},"6602d2ed10acb4d71eb7":(e,t,s)=>{"use strict";s.d(t,{K:()=>o});const o=(0,s("69084d01d3449fc1bc27").createContext)({})},"3ff5230752f8be307b07":(e,t,s)=>{"use strict";s.d(t,{H:()=>a});s("69084d01d3449fc1bc27");var o=s("6602d2ed10acb4d71eb7"),i=s("9302435e81c621e827fb");const a=e=>{let{children:t}=e;return(0,i.jsx)(o.K.Provider,{value:{},children:t})};a.displayName="LocationExperimentsProvider"},f799360550622a669e28:(e,t,s)=>{"use strict";s.d(t,{Pc:()=>b});var o=s("54bdd803dcbe7795ce01"),i=s.n(o),a=s("8f58e784196e6568c885"),r=s.n(a),n=s("bc7e913009ead4a02f8c"),d=s("d7f2db0229e7c7df3214"),c=s("0e8400aef1ea36fada43"),l=s("69084d01d3449fc1bc27"),_=s("2e0796c118320b51c6e6"),p=s("bd11212dd200c13dd4e4"),E=s("b48d419be3e1903edcd4"),u=s("fac2effa2380bfd3e70d"),h=s("12be0f0e9e2c7751d613"),g=s("f481ef00e50d282f38a9"),T=s("c006a31a1a2ace68e61f"),m=s("8898b63d76f1fcc2092e"),f=s("6fd2852d6f9220b4ea44"),N=s("3ff5230752f8be307b07"),S=s("a7f44a4d9a149fde3658"),L=s("549640134fdb6d7e36d7"),A=s("9302435e81c621e827fb");class O extends l.PureComponent{static getDerivedStateFromProps(e){return{showSuggestions:e.showSuggestions}}constructor(e){super(e),this.addressChangeTracker=void 0,this.alwaysShowMapFlag=void 0,this.inputNode=void 0,this.inputNodeModal=void 0,this.inputComponentRef=void 0,this.translations=void 0,this.latestSubmittedAddress=void 0,this.locationModel=void 0,this.googleMapScriptLoader=void 0,this.gtmLocationService=void 0,this.cachedAddress=void 0,this.trackingState=void 0,this.Overlay=void 0,this.handleDropdownVisibility=()=>{const{showMap:e}=this.state,{showMapView:t}=this.props,s=document.querySelector(".bds-c-modal__dialog-window");null!=s&&s.style&&(s.style.visibility=e||t?"hidden":"visible")},this.isEditMode=()=>this.props.isWhereComponent&&(0,S.J)(this.props.isWhereComponent),this.geocodeHandler=e=>{this.setState({geocodeAddress:e})},this.onSuggestionListSelected=e=>{var t,s;null===(t=(s=this.props).onSuggestionListSelected)||void 0===t||t.call(s,e)},this.Overlay=(0,n.ZP)({resolved:{},chunkName:()=>"map-modal-overlay",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!s.m[t]},importAsync:()=>Promise.resolve().then(s.bind(s,"b0345e1c58c9fd727545")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return s(t)},resolve(){return"b0345e1c58c9fd727545"}}),this.inputNode=l.createRef(),this.inputNodeModal=l.createRef(),this.inputComponentRef=l.createRef(),this.alwaysShowMapFlag=r()(e.appConfig,"features.flags.always-map","N/A"),this.addressChangeTracker=e.locationService.getAddressChangeTracker(),this.locationModel=e.locationService.getModel(),this.translations=e.translations,this.trackingState=L.B.NA,this.state={hasLocationPermissionError:!1,showMap:e.showMapView||!1,selectedAddress:this.locationModel?new p.C(this.locationModel):null,showSuggestions:!1,expeditionType:e.expeditionType||"delivery",errorMessage:"",isError:!1,noAddressOpenMap:!1,enableButton:!1,geocodeAddress:null},this.cachedAddress=this.state.selectedAddress?this.state.selectedAddress:null,this.latestSubmittedAddress=this.state.selectedAddress,this.showMap=this.showMap.bind(this),this.closeMap=this.closeMap.bind(this),this.hideSuggestions=this.hideSuggestions.bind(this),this.onChange=this.onChange.bind(this),this.onInputTouch=this.onInputTouch.bind(this),this.submitGeocode=this.submitGeocode.bind(this),this.submitAddress=this.submitAddress.bind(this),this.displayError=this.displayError.bind(this),this.geocode=this.geocode.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.handleDropdownVisibility=this.handleDropdownVisibility.bind(this),this.validateUserAddressLocally=this.validateUserAddressLocally.bind(this),this.getErrorTranslation=this.getErrorTranslation.bind(this),this.googleMapScriptLoader=(0,u.h)(e.appConfig),this.gtmLocationService=e.locationService.getGTMLocationService(),this.trackEventsOnSubmitClick=this.trackEventsOnSubmitClick.bind(this),this.setSubmitTrackingState=this.setSubmitTrackingState.bind(this),this.handleInputAddressSubmit=this.handleInputAddressSubmit.bind(this),this.handleLocateMeFail=this.handleLocateMeFail.bind(this)}componentDidMount(){this.handleDropdownVisibility(),this.setupEventListener(),this.state.selectedAddress&&this.addressChangeTracker.setLastStepType("RestaurantsSearchButton")}componentWillUnmount(){this.handleDropdownVisibility()}componentDidUpdate(e,t){var s,o;if(t.showMap===this.state.showMap&&e.showMapView===this.props.showMapView||this.handleDropdownVisibility(),this.state.noAddressOpenMap&&null!==(s=this.inputNode)&&void 0!==s&&null!==(o=s.current)&&void 0!==o&&o.value){const e={trigger:{isUpdate:!1,type:"Manual"},expeditionType:this.state.expeditionType};this.submitGeocode(e.trigger,e.expeditionType,!0)}}setupEventListener(){this.props.locationService.getEventLord().on(this.props.geoCodeAddressEventName||"geocode:address",(e=>{this.handleInputAddressSubmit(e.trigger,e.expeditionType)})),this.props.locationService.getEventLord().on("address:changed",(e=>{this.setState({selectedAddress:new p.C(e)}),this.props.locationService.setModel(new p.C(e)),this.locationModel=this.props.locationService.getModel(),this.props.locationService.getEventLord().emit("address:saved")})),this.props.vendorCart&&this.props.locationService.getEventLord().on(this.props.changeExpeditionTypeEventName||"change:expedition_type",(()=>{this.setState({expeditionType:this.props.vendorCart.get("expedition_type")})}));const e=document.querySelector(".bds-c-modal__dialog"),t=document.querySelector(".bds-c-modal__dialog-window");let s=!1;const o=document.getElementById("location-search-button");o&&o.addEventListener("click",(()=>{const e=this.locationModel?new p.C(this.locationModel):null;this.setState({selectedAddress:e})})),t&&t.addEventListener("click",(()=>{s=!0})),e&&e.addEventListener("click",(()=>{var e,t;!s&&(null===(e=(t=this.props).onCancelSearch)||void 0===e||e.call(t)),s=!1}))}handleInputAddressSubmit(e,t){const s=this.inputNode.current?this.inputNode.current.value:"";s||this.setState({noAddressOpenMap:!0}),this.trackingState=s?this.trackingState:L.B.ERRORED,this.trackEventsOnSubmitClick(),this.submitGeocode(e,t)}setSubmitTrackingState(e){this.trackingState=e}trackEventsOnSubmitClick(){switch(this.trackingState){case L.B.CLICKED:this.gtmLocationService.initializeLocationAttemptedTracking("RestaurantsSearchButton"),this.gtmLocationService.trackLocationAttempted(this.locationModel);break;case L.B.ERRORED:this.gtmLocationService.trackLocationClicked(this.locationModel,this.props.vendor,"NA","RestaurantsSearchButton");break;case L.B.ATTEMPTED:case L.B.SUBMITTED:break;case L.B.NA:default:this.gtmLocationService.trackLocationClicked(this.locationModel,this.props.vendor,"NA","RestaurantsSearchButton"),this.gtmLocationService.initializeLocationAttemptedTracking("RestaurantsSearchButton"),this.gtmLocationService.trackLocationAttempted(this.locationModel)}}hideSuggestions(){this.setState({showSuggestions:!1})}showMap(){this.setState({showMap:!0})}closeMap(){(this.state.showMap||this.props.onCloseMap)&&(this.setState({showMap:!1,hasLocationPermissionError:!1}),this.props.onCloseMap&&this.props.onCloseMap())}displayError(e,t){void 0===t&&(t="");const s=""!==t?t:this.getErrorTranslation(e);this.setState({errorMessage:s,isError:!0}),this.props.locationService.getEventLord().emit("fullAddressSearchView:error"),this.props.locationService.getEventLord().emit("location-input-component:displayError",e)}getErrorTranslation(e){const t=this.translations.error_invalid_address_not_found_experiment;switch(e){case f.X.INVALID_MAP_ADDRESS_NOT_FOUND:return this.translations.error_invalid_address_not_found;case f.X.INVALID_ADDRESS_NOT_FOUND:case f.X.INVALID_ADDRESS:return t;case f.X.EMPTY_INPUT:return this.translations.error_empty_input;case f.X.INVALID_ADDRESS_COUNTRY_NOT_SUPPORTED:return this.translations.error_invalid_address_country_not_supported;case f.X.INCOMPLETE_ADDRESS_POSTCODE:return this.translations.error_incomplete_address_postcode;case f.X.INCOMPLETE_ADDRESS_STREET:return this.translations.error_incomplete_address_street;case f.X.INCOMPLETE_ADDRESS_BUILDING:return this.translations.error_incomplete_address_building;case f.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:return this.translations.error_incomplete_address_building_street;case f.X.NO_GEOLOCATION:return this.translations.error_no_geolocation;default:return d.k.error({error:new Error(e),message:"FullAddressInputSearchError:",extraInfo:{error:e}}),t}}hideTooltip(){this.setState({errorMessage:"",isError:!1})}handleAddressSubmission(e){var t,s;const o=new p.C(Object.assign({},e,{expedition_type:this.state.expeditionType}));this.props.onChange&&this.props.onChange(o),this.props.locationService.getEventLord().emit("address:changed",e),this.props.locationService.getEventLord().emit(this.props.fullAddressSearchEventName||"full-address-search:submit",o),null===(t=(s=this.props).onModalSubmit)||void 0===t||t.call(s,e)}submitAddress(e,t){this.closeMap(),this.setState({selectedAddress:e}),t&&this.trackSubmit(t,e),this.addressChangeTracker.setLastStepType(null),this.handleAddressSubmission(e)}onInputTouch(){this.setState({selectedAddress:null})}setLoadingState(e){this.inputComponentRef.current&&this.inputComponentRef.current.handleSetLoadingStateEvent&&this.inputComponentRef.current.handleSetLoadingStateEvent(e)}async submitGeocode(e,t,s){s&&this.setState({noAddressOpenMap:!1}),this.hideSuggestions();const o=this.state.selectedAddress,a=o&&o.formatted_customer_address?o.formatted_customer_address:this.inputNode.current?this.inputNode.current.value:"",r=o?o.place_id:void 0;if(a){t&&await new Promise((e=>{this.setState({expeditionType:t},e)})),this.setLoadingState(!0);const{isValid:s,error:n}=this.validateUserAddressLocally();if(!s){this.displayError(n);const t=this.trackingState===L.B.NA?"RestaurantsSearchButton":e.type;return this.gtmLocationService.trackLocationError("INVALID_ADDRESS",t,this.state.selectedAddress),void this.setLoadingState(!1)}o&&o.id||o&&i()(o,this.cachedAddress)?(this.hideTooltip(),this.setLoadingState(!1),this.parseGeocodedAddress(e,o)):this.geocode(a,r).then((e=>e)).then((t=>{if(this.setLoadingState(!1),!t)return this.displayError(f.X.INVALID_ADDRESS_NOT_FOUND),void this.gtmLocationService.trackLocationError("INVALID_ADDRESS",e.type,this.state.selectedAddress);this.hideTooltip(),this.setState({selectedAddress:t}),this.parseGeocodedAddress(e,t)})).catch((()=>{this.setLoadingState(!1),this.gtmLocationService.trackLocationError("INVALID_ADDRESS",e.type,this.state.selectedAddress),this.displayError(f.X.INVALID_ADDRESS_NOT_FOUND)}))}else{this.displayError(f.X.EMPTY_INPUT);const t=this.trackingState===L.B.ERRORED?"RestaurantsSearchButton":e.type;this.gtmLocationService.trackLocationError("EMPTY_INPUT",t,this.state.selectedAddress)}}async geocode(e,t){if(this.state.geocodeAddress&&this.state.selectedAddress===this.state.geocodeAddress)return this.state.geocodeAddress;try{return await(t?E.i.getInstance().getDetails({id:t}):E.i.getInstance().getGeocode({address:e}))}catch(e){return Promise.reject(e)}}trackSubmit(e,t){let s=!1;this.props.trackUpdate&&this.latestSubmittedAddress&&(s=this.latestSubmittedAddress.place_id!==t.place_id),this.addressChangeTracker.setSubmitTrigger(Object.assign({},e,{isUpdate:s})),this.latestSubmittedAddress=t,this.addressChangeTracker.track(t)}parseGeocodedAddress(e,t){var s;this.addressChangeTracker.setSubmitTrigger(e);let o=!1;switch(!0){case!!t.id:case this.cachedAddress&&this.cachedAddress.place_id===t.place_id:o=!1;break;case"yes"===this.alwaysShowMapFlag:case!h.ZP.getInstance().isAddressValid(t,this.alwaysShowMapFlag):o=!0}if(this.props.isWhereComponent&&(0,S.J)(this.props.isWhereComponent)&&"home"!==(null===(s=this.props.locationService.getTagManager())||void 0===s?void 0:s.pageType)){const e=!h.ZP.getInstance().isAddressValid(t,this.alwaysShowMapFlag);this.setState({enableButton:!e}),this.gtmLocationService.initializeLocationAttemptedTracking("Search"),this.gtmLocationService.trackLocationAttempted(this.props.locationService.getModel(),this.props.vendor,g.P.NEW_ADDRESS),this.showMap()}else o?this.showMap():this.submitAddress(t,e)}validateUserAddressLocally(){const e=this.inputNode.current&&this.inputNode.current.value;return e?this.isValidUserInput(e,this.props.appConfig)?{isValid:!0}:{isValid:!1,error:f.X.INCOMPLETE_ADDRESS_POSTCODE}:{isValid:!1,error:f.X.EMPTY_INPUT}}isValidUserInput(e,t){const s=r()(t,"address_config.valid_address_input");return null!==e.trim().match(s)}onChange(e,t){void 0===t&&(t=!1),this.setState({selectedAddress:e},(()=>{if(this.props.autoSubmit&&!t){const e={trigger:{isUpdate:!1,type:"Manual"},expeditionType:this.state.expeditionType};this.submitGeocode(e.trigger,e.expeditionType)}})),this.hideTooltip()}handleLocateMeFail(){this.setState({showMap:!0,hasLocationPermissionError:!0})}render(){const e=this.translations.input_label_experiment,t=this.translations.location_input_placeholder||"";return(0,A.jsxs)(N.H,{gtmLocationService:this.gtmLocationService,locationModel:this.locationModel,locationConfig:this.props.appConfig,children:[" ",(0,A.jsx)(c.$,{translation:Object.assign({},this.translations),children:(0,A.jsxs)(l.Fragment,{children:[this.Overlay&&(this.state.showMap||this.props.showMapView)&&(0,A.jsx)(this.Overlay,{hideAddressList:this.props.hideAddressList,enableButton:this.state.enableButton,isWhereComponent:this.props.isWhereComponent,onSubmitAddress:this.props.onSubmitAddress,disableInitialMessage:this.state.hasLocationPermissionError,hasLocationPermissionError:this.state.hasLocationPermissionError,onClose:this.closeMap,googleMapScriptLoader:this.googleMapScriptLoader,appConfig:this.props.appConfig,elementId:"map-id",model:this.props.editedAddress&&this.isEditMode()?this.props.editedAddress:this.state.selectedAddress,selectedAddress:this.props.editedAddress&&this.isEditMode()?this.props.editedAddress:this.state.selectedAddress,clearEditMode:this.props.clearEditMode,isEditMode:this.props.editedAddress&&this.isEditMode(),savedAddresses:this.props.savedAddresses,gtmLocationService:this.gtmLocationService,expeditionType:this.state.expeditionType,focusOnRender:!1,showSavedAddress:!0,showSuggestions:this.state.showSuggestions,addressChangeTracker:this.addressChangeTracker,inputRef:this.inputNodeModal,errorTranslator:this.getErrorTranslation,hiddenError:this.hideTooltip,onSubmit:this.submitAddress,placeholder:t,title:e,modalTitle:this.translations.location_map_title,mapPinTitle:this.translations.map_tooltip,mapSubmitTitle:this.translations.map_submit_btn,locationService:this.props.locationService,vendor:this.props.vendor,disableValidation:this.props.disableAutoInputValidation,translations:this.translations,onMapClose:this.closeMap}),(0,A.jsx)(T.z,{isWhereComponent:this.props.isWhereComponent,fillInputSearch:this.props.fillInputSearch,autoSubmit:this.props.autoSubmit,ref:this.inputComponentRef,inputRef:this.inputNode,model:this.state.selectedAddress,appConfig:this.props.appConfig,gtmLocationService:this.gtmLocationService,expeditionType:this.state.expeditionType,focusOnRender:!1,showSavedAddress:this.props.showSavedAddress,showSuggestions:this.state.showSuggestions,onLocateMeFail:this.handleLocateMeFail,selectedAddress:this.state.selectedAddress,addressChangeTracker:this.addressChangeTracker,onChange:this.onChange,onTouched:this.onInputTouch,displayError:this.displayError,hiddenError:this.hideTooltip,placeholder:this.props.showPlaceholder?t:"",title:e,inputSize:this.props.inputSize,locationService:this.props.locationService,toolTipMsg:this.state.errorMessage,onCancelSearch:this.props.onCancelSearch,disableAutoValidation:this.props.disableAutoInputValidation,vendor:this.props.vendor,trackInputState:this.setSubmitTrackingState,translations:this.translations,isMapOpen:!1,noAddressOpenMap:this.state.noAddressOpenMap,onSuggestionListChanged:this.props.onSuggestionListChanged,isManuallyTypedAddress:!0,onMapClose:this.closeMap,geocodeHandler:this.geocodeHandler,onSuggestionListSelected:this.onSuggestionListSelected})]})})]})}}const b=(0,m.Z)(O,"LocationInput"),C=e=>{const t=e.wrapper?e.wrapper:document.getElementById("address-search-container");return(0,_.render)((0,A.jsx)(b,Object.assign({},e,{onSubmitAddress:e.onSubmitAddress,savedAddresses:e.savedAddresses,clearEditMode:e.clearEditMode,editedAddress:e.editedAddress,isWhereComponent:e.isWhereComponent,fillInputSearch:e.fillInputSearch,locationService:e.locationService,appConfig:e.appConfig,tooltipPlacement:e.tooltipPlacement,googleMapScriptLoader:e.googleMapScriptLoader,expeditionType:e.expeditionType,vendorCart:e.vendorCart,focusOnRender:e.focusOnRender,spinnerHTMLElement:e.spinnerHTMLElement,showSavedAddress:e.showSavedAddress,suggestionsContainer:e.suggestionsContainer,showSuggestions:e.showSuggestions,onChange:e.onChange,showPlaceholder:e.showPlaceholder})),t)}},e078e5ef009d76e85511:(e,t,s)=>{"use strict";s.d(t,{I:()=>b});var o=s("8f58e784196e6568c885"),i=s.n(o),a=s("d7f2db0229e7c7df3214"),r=s("0e8400aef1ea36fada43"),n=s("69084d01d3449fc1bc27"),d=s("bd11212dd200c13dd4e4"),c=s("b48d419be3e1903edcd4"),l=s("fac2effa2380bfd3e70d"),_=s("12be0f0e9e2c7751d613"),p=s("f481ef00e50d282f38a9"),E=s("f0113ad522d4984536bd"),u=s("6fd2852d6f9220b4ea44"),h=s("3ff5230752f8be307b07"),g=s("64d1811020626b629fb5"),T=s("549640134fdb6d7e36d7"),m=s("a7f44a4d9a149fde3658");const f=(e,t)=>{const s=document.querySelector(".bds-c-modal__dialog-window");null!=s&&s.style&&(s.style.visibility=e||t?"hidden":"visible")},N=e=>e&&(0,m.J)(e),S=(e,t)=>{e.initializeLocationAttemptedTracking("RestaurantsSearchButton"),e.trackLocationAttempted(t)},L=(e,t,s)=>{e.trackLocationClicked(t,s,"NA","RestaurantsSearchButton")},A=(e,t)=>{var s;const o=null===(s=e.current)||void 0===s?void 0:s.value;return o?((e,t)=>{const s=i()(t,"address_config.valid_address_input");return null!==e.trim().match(s)})(o,t)?{isValid:!0}:{isValid:!1,error:u.X.INCOMPLETE_ADDRESS_POSTCODE}:{isValid:!1,error:u.X.EMPTY_INPUT}};var O=s("9302435e81c621e827fb");const b=(0,n.forwardRef)(((e,t)=>{const{locationService:s,translations:o,showMapView:m,appConfig:b,vendor:C,isWhereComponent:I,expeditionType:v,onCloseMap:R,onChange:M,fullAddressSearchEventName:D,onModalSubmit:y,trackUpdate:P,autoSubmit:G,geoCodeAddressEventName:B,vendorCart:w,changeExpeditionTypeEventName:x,disableAutoInputValidation:U,showSavedAddress:k,onSubmitAddress:X,hideAddressList:F,editedAddress:j,fillInputSearch:H,savedAddresses:V,clearEditMode:Y,onCancelSearch:K,inputSize:Z,showPlaceholder:z,onSuggestionListChanged:W,onSuggestionListSelected:q}=e,J=s.getModel(),Q=s.getGTMLocationService(),$=s.getAddressChangeTracker(),[ee,te]=(0,n.useState)(m||!1),[se,oe]=(0,n.useState)(J?new d.C(J):null),[ie,ae]=(0,n.useState)(null),[re,ne]=(0,n.useState)(v||"delivery"),[de,ce]=(0,n.useState)(T.B.NA),[le,_e]=(0,n.useState)(!1),[pe,Ee]=(0,n.useState)(!1),[ue,he]=(0,n.useState)(!1),[ge,Te]=(0,n.useState)(""),[me,fe]=(0,n.useState)(!1),Ne=(0,n.createRef)(),Se=(0,n.createRef)(),Le=(0,n.createRef)(),Ae=o.input_label_experiment,Oe=o.location_input_placeholder||"",be=i()(b,"features.flags.always-map","N/A"),Ce=()=>{(ee||R)&&(te(!1),he(!1),null==R||R())},Ie=e=>{switch(e){case u.X.INVALID_MAP_ADDRESS_NOT_FOUND:return o.error_invalid_address_not_found;case u.X.INVALID_ADDRESS_NOT_FOUND:case u.X.INVALID_ADDRESS:return o.error_invalid_address_not_found_experiment;case u.X.EMPTY_INPUT:return o.error_empty_input;case u.X.INVALID_ADDRESS_COUNTRY_NOT_SUPPORTED:return o.error_invalid_address_country_not_supported;case u.X.INCOMPLETE_ADDRESS_POSTCODE:return o.error_incomplete_address_postcode;case u.X.INCOMPLETE_ADDRESS_STREET:return o.error_incomplete_address_street;case u.X.INCOMPLETE_ADDRESS_BUILDING:return o.error_incomplete_address_building;case u.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:return o.error_incomplete_address_building_street;case u.X.NO_GEOLOCATION:return o.error_no_geolocation;default:return a.k.error({error:new Error(e),message:"FullAddressInputSearchError:",extraInfo:{error:e}}),o.error_invalid_address_not_found_experiment}},ve=function displayError(e,t){void 0===t&&(t="");const o=""!==t?t:Ie(e);Te(o),s.getEventLord().emit("fullAddressSearchView:error"),s.getEventLord().emit("location-input-component:displayError",e)},Re=e=>{Le.current&&Le.current.handleSetLoadingStateEvent&&Le.current.handleSetLoadingStateEvent(e)},Me=(e,t)=>{Ce(),oe(e),t&&((e,t)=>{let s=!1;P&&se&&(s=se.place_id!==t.place_id),$.setSubmitTrigger(Object.assign({},e,{isUpdate:s})),$.track(t)})(t,e),$.setLastStepType(null),(e=>{const t=new d.C(Object.assign({},e,{expedition_type:re}));null==M||M(t),s.getEventLord().emit("address:changed",e),s.getEventLord().emit(D||"full-address-search:submit",t),null==y||y(e)})(e)},De=(e,t)=>{var o;$.setSubmitTrigger(e);let i=!1;switch(!0){case!!t.id:i=!1;break;case"yes"===be:case!_.ZP.getInstance().isAddressValid(t,be):i=!0}if(N(I)&&"home"!==(null===(o=s.getTagManager())||void 0===o?void 0:o.pageType)){const e=!_.ZP.getInstance().isAddressValid(t,be);fe(!e),Q.initializeLocationAttemptedTracking("Search"),Q.trackLocationAttempted(s.getModel(),C,p.P.NEW_ADDRESS),te(!0)}else i?te(!0):Me(t,e)},ye=async(e,t,s)=>{try{const o=await(async(e,t)=>{if(ie&&se===ie)return ie;try{return await(t?c.i.getInstance().getDetails({id:t}):c.i.getInstance().getGeocode({address:e}))}catch(e){return Promise.reject(e)}})(e,t);if(Re(!1),!o)return ve(u.X.INVALID_ADDRESS_NOT_FOUND),void Q.trackLocationError("INVALID_ADDRESS",s.type,se);Te(""),oe(o),De(s,o)}catch(e){Re(!1),Q.trackLocationError("INVALID_ADDRESS",s.type,se),ve(u.X.INVALID_ADDRESS_NOT_FOUND)}},Pe=async(e,t,s)=>{var o,i,a;s&&_e(!1),Ee(!1);const r=null!==(o=null!==(i=null==se?void 0:se.formatted_customer_address)&&void 0!==i?i:null===(a=Ne.current)||void 0===a?void 0:a.value)&&void 0!==o?o:"",n=null==se?void 0:se.place_id;if(!r)return ve(u.X.EMPTY_INPUT),void((e,t,s,o)=>{const i=t===T.B.ERRORED?"RestaurantsSearchButton":e.type;s.trackLocationError("EMPTY_INPUT",i,o)})(e,de,Q,se);{t&&ne(t),Re(!0);const{isValid:s,error:o}=A(Ne,b);if(!s)return ve(o),((e,t,s,o)=>{const i=t===T.B.NA?"RestaurantsSearchButton":e.type;s.trackLocationError("INVALID_ADDRESS",i,o)})(e,de,Q,se),void Re(!1);se&&se.id?(Te(""),Re(!1),De(e,se)):ye(r,n,e)}},Ge=(e,t)=>{(Ne.current?Ne.current.value:"")||(_e(!0),ce(T.B.ERRORED)),(()=>{switch(de){case T.B.CLICKED:S(Q,J);break;case T.B.ERRORED:L(Q,J,C);break;case T.B.ATTEMPTED:case T.B.SUBMITTED:break;case T.B.NA:default:L(Q,J,C),S(Q,J)}})(),Pe(e,t)};return(0,n.useImperativeHandle)(t,(()=>({handleInputAddressSubmit:Ge}))),(0,n.useEffect)((()=>{f(ee,m)}),[ee,m,ue]),(0,n.useEffect)((()=>{var e;if(le&&null!=Ne&&null!==(e=Ne.current)&&void 0!==e&&e.value){const e={trigger:{isUpdate:!1,type:"Manual"},expeditionType:re};Pe(e.trigger,e.expeditionType,!0)}}),[le,Ne]),(0,n.useEffect)((()=>(f(ee,m),(()=>{s.getEventLord().on(B||"geocode:address",(e=>{Ge(e.trigger,e.expeditionType)})),s.getEventLord().on("address:changed",(e=>{oe(new d.C(e)),s.setModel(new d.C(e)),s.getEventLord().emit("address:saved")})),w&&s.getEventLord().on(x||"change:expedition_type",(()=>{ne(w.get("expedition_type"))}));const t=document.querySelector(".bds-c-modal__dialog"),o=document.querySelector(".bds-c-modal__dialog-window");let i=!1;const a=document.getElementById("location-search-button");a&&a.addEventListener("click",(()=>{const e=J?new d.C(J):null;oe(e)})),o&&o.addEventListener("click",(()=>{i=!0})),t&&t.addEventListener("click",(()=>{var t;!i&&(null===(t=e.onCancelSearch)||void 0===t||t.call(e)),i=!1}))})(),se&&$.setLastStepType("RestaurantsSearchButton"),()=>{f(ee,m)})),[]),(0,O.jsx)("div",{"data-testid":"location-input-component-refactored",children:(0,O.jsxs)(h.H,{gtmLocationService:Q,locationModel:J,locationConfig:b,children:[" ",(0,O.jsxs)(r.$,{translation:Object.assign({},o),children:[(ee||m)&&(0,O.jsx)(g.S,{hideAddressList:F,enableButton:me,isWhereComponent:I,onSubmitAddress:X,disableInitialMessage:ue,hasLocationPermissionError:ue,onClose:Ce,googleMapScriptLoader:(0,l.h)(b),appConfig:b,elementId:"map-id",model:j&&N(I)?j:se,selectedAddress:j&&N(I)?j:se,clearEditMode:Y,isEditMode:!!j&&N(I),savedAddresses:V,gtmLocationService:Q,expeditionType:re,focusOnRender:!1,showSavedAddress:!0,showSuggestions:pe,addressChangeTracker:$,inputRef:Se,errorTranslator:Ie,hiddenError:()=>Te(""),onSubmit:Me,placeholder:Oe,title:Ae,modalTitle:o.location_map_title,mapPinTitle:o.map_tooltip,mapSubmitTitle:o.map_submit_btn,locationService:s,vendor:C,disableValidation:U,translations:o,onMapClose:Ce}),(0,O.jsx)(E.O,{isWhereComponent:I,fillInputSearch:H,autoSubmit:G,ref:Le,inputRef:Ne,model:se,appConfig:b,gtmLocationService:Q,expeditionType:re,focusOnRender:!1,showSavedAddress:k,showSuggestions:pe,onLocateMeFail:()=>{he(!0),te(!0)},selectedAddress:se,addressChangeTracker:$,onChange:function(e,t){if(void 0===t&&(t=!1),oe(e),G&&!t){const e={trigger:{isUpdate:!1,type:"Manual"},expeditionType:re};Pe(e.trigger,e.expeditionType)}Te("")},onTouched:()=>oe(null),displayError:ve,hiddenError:()=>Te(""),placeholder:z?Oe:"",title:Ae,inputSize:Z,locationService:s,toolTipMsg:ge,onCancelSearch:K,disableAutoValidation:U,vendor:C,trackInputState:()=>ce(de),translations:o,isMapOpen:!1,noAddressOpenMap:le,onSuggestionListChanged:W,isManuallyTypedAddress:!0,onMapClose:Ce,geocodeHandler:e=>{ae(e)},onSuggestionListSelected:e=>{null==q||q(e)}})]})]})})}));b.displayName="LocationInputComponentRefactor"},"65f09e17af9344d3a6eb":(e,t,s)=>{"use strict";s.d(t,{D:()=>c});var o=s("b6cb1298f374616152a5"),i=s.n(o),a=s("d1970d14043b553c0c4f"),r=s("775358d40899413d6f88"),n=s("3fdb80c9b6a51ecdf3f5"),d=s("9302435e81c621e827fb");const c=e=>{const{open:t,onClose:s,translations:c,selectedTranslations:l}=e;return(0,d.jsxs)(i(),{isOpen:t,onClose:s,closable:!0,width:[40,90,90,60],className:"location-re-allow-modal",children:[(0,d.jsx)(o.ModalTitle,{title:c.location_modal_title_location_settings}),(0,d.jsx)(o.ModalBody,{children:(0,d.jsxs)(n.C,{as:"p",type:"paragraph-md",marginBottom:"md",children:[l[0]," ",(0,d.jsx)("br",{}),(0,d.jsx)("ol",{type:"1",className:"steps-list",children:l.map(((e,t)=>"object"==typeof e?(0,d.jsx)("li",{children:Object.values(e)},t):t>0?(0,d.jsx)("li",{children:e},t):void 0))})]})}),(0,d.jsx)(o.ModalFooter,{children:(0,d.jsx)(a.x,{justifyContent:"center",direction:["row","column-reverse","column-reverse"],className:"cancel-confirmation-cta",children:(0,d.jsx)(r.Button,{className:"ma-xxxs",kind:"primary",onClick:s,"data-testid":"cancel-dialog-cta",children:c.location_modal_cta_location_settings})})})]})};c.displayName="LocationReAllowModal"},e9e6380e25bd8922b1c8:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=[{elementType:"labels.icon",stylers:[{color:"#bdbdbd"}]},{elementType:"labels.text.fill",stylers:[{color:"#707070"}]},{featureType:"landscape",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit.station.rail",elementType:"labels.icon",stylers:[{visibility:"off"}]}]},"76a065ad83922c2f0327":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("12be0f0e9e2c7751d613");const i=(e,t)=>{var s;const i=o.ZP.getInstance().getAddressErrorFields(t),a=null==e||null===(s=e.address_config)||void 0===s?void 0:s.form_mappings;return i.map((e=>{return a?(t=a,s=e,Object.keys(t).find((e=>t[e]===s))||e):e;var t,s}))}},a7f44a4d9a149fde3658:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var o=s("12be0f0e9e2c7751d613");const i=function(e,t){void 0===t&&(t=!1);const s=""!==o.ZP.getInstance().getCustomerId();return t?s:s&&e}},f0dd78d59fe2c6214da6:(e,t,s)=>{"use strict";s.d(t,{L:()=>S});var o=s("281cbdced79d8f3d2562"),i=s.n(o),a=s("d4f0325937cb45b4d7c7"),r=s("84267edb5a64fe750d05"),n=s.n(r),d=s("da2e670d31182ce91bb9"),c=s.n(d),l=s("69084d01d3449fc1bc27"),_=s("1c2f52c061810467b454"),p=s("7cb6dd6c261a56cdba1f"),E=s("54594dde5dc2714a1b38"),u=s("76a065ad83922c2f0327"),h=s("b48d419be3e1903edcd4"),g=s("e9e6380e25bd8922b1c8"),T=s("568ecdc81696e6199594");const m=(e,t,s,o,i,a)=>{if(s&&!t&&e)return void(o&&e.setCenter({lat:Number(o.latitude),lng:Number(o.longitude)}));const r=new window.google.maps.LatLngBounds;i&&((e,t)=>{Object.keys(e).forEach((s=>e[s]&&e[s].position&&!t.contains(e[s].position)&&t.extend(e[s].position)))})(r,i);const n=r.getCenter(),d=r.getNorthEast(),c=r.getSouthWest();if(e){e.panTo({lat:n.lat(),lng:n.lng()});const t=[{lat:c.lat(),lng:c.lng()},{lat:d.lat(),lng:d.lng()}];a?e.fitBounds(new window.google.maps.LatLngBounds(...t),a()):e.fitBounds(...t)}};var f=s("a7f44a4d9a149fde3658"),N=s("9302435e81c621e827fb");const S=l.forwardRef(((e,t)=>{var s;const[o,r]=(0,l.useState)(null),[d,S]=(0,l.useState)(!1),[L,A]=(0,l.useState)(null),O=(0,l.useRef)(null),{address:b,onDraggingChange:C,placeStaticMarkers:I,isBoundToMarkers:v,markers:R,handleMapState:M}=e,D=()=>{const t=((e,t,s)=>Object.assign({center:{lat:Number(e.latitude),lng:Number(e.longitude)},zoom:17,disableDefaultUI:!0,streetViewControl:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,scrollwheel:!1,draggable:!!t,styles:g.Z,gestureHandling:"greedy"},s||{}))(b,e.onDraggingChange,e.appConfig);O.current&&window.google&&r(new window.google.maps.Map(O.current,t))},y=function(t,s){if(void 0===s&&(s=!0),t instanceof Error)return void(e.handleAddressChange&&e.handleAddressChange(null,["NO_GEOLOCATION"],"Map"));const o=(0,u.Z)(e.appConfig,t);s&&e.handleAddressChange&&e.handleAddressChange(t,o,"Map"),A(t)},P=function(e,t,s){void 0===t&&(t=!0),void 0===s&&(s=null),s?y(s,t):(async e=>{try{const t="function"==typeof e.lat?e.lat():e.lat,s="function"==typeof e.lng?e.lng():e.lng,o=await h.i.getInstance().getReverse({lat:t,lng:s});return Object.assign({},o,{latitude:t,longitude:s})}catch(e){throw new Error("Geo location error")}})(e).then((e=>{y(e,t)})),C&&C(!1)},G=()=>{D(),I&&(window.onresize=i()((()=>m(o,v,d,L,R,e.getMapPadding)),200))},B=function(e,t){void 0===t&&(t=!1);const s={lat:e.latitude||0,lng:e.longitude||0};null==o||o.setCenter(s);const i=L&&(e.latitude!==L.latitude||e.longitude!==L.longitude);"autocomplete"===e.object_type||"saved address"===e.object_type?y(e,i||!1):e.latitude&&e.longitude&&P({lat:e.latitude,lng:e.longitude},i||!1,t?e:null)};(0,l.useImperativeHandle)(t,(()=>({setCenter:B})));return(0,l.useEffect)((()=>{var t,s,o;t=G,null===(s=e.googleMapScriptLoader)||void 0===s||null===(o=s.loadGoogleMapLib())||void 0===o||o.then((()=>t()))}),[]),(0,l.useEffect)((()=>{e.markers&&"undefined"!=typeof google&&m(o,v,d,L,R,e.getMapPadding),e.isExternallyUsed&&e.address&&B(e.address)}),[e.address]),(0,l.useEffect)((()=>{e.handleAddressChange&&o&&(o.addListener("dragend",(()=>((e,t,s)=>{if(e){const o=e.getCenter();o&&s({lat:o.lat(),lng:o.lng()}),t&&t.setLastStepType("Map")}})(o,e.addressChangeTracker,P))),o.addListener("dragstart",(()=>((e,t)=>{e&&e(T.rd.loading),t&&t(!0)})(M,C)))),I&&o&&(I(o.data),o.addListener("tilesloaded",(()=>m(o,v,d,L,R,e.getMapPadding))),m(o,v,d,L,R,e.getMapPadding)),e.drawCourierRoute&&o&&e.drawCourierRoute(o),e.staticMarkerLatLng&&o&&new window.google.maps.Marker({position:e.staticMarkerLatLng,map:o})}),[o]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{id:e.elementId,ref:O,"data-testid":"map-view-screen-refactored"}),(0,N.jsxs)("div",{className:"location-icon-container dragging-stop",children:[(0,N.jsx)("div",{id:"tooltip-wrapper",children:e.mapPinTitle&&(0,N.jsxs)("div",{className:"tooltip top tooltip-info",children:[(0,N.jsx)("div",{className:"tooltip-arrow"}),(0,N.jsx)("div",{className:"tooltip-inner",children:e.mapPinTitle})]})}),(0,N.jsx)("span",{className:"map-modal__map-center-icon",children:e.labeledMapPin?(0,N.jsx)(a.Z,{"data-testid":"saved-address-icon",className:"saved-address-icon",children:(0,_.R)(null===(s=e.address)||void 0===s?void 0:s.type,"neutral-primary",!0)}):e.handleAddressChange?(0,N.jsx)(c(),{fill:"interaction-primary"}):!R&&((0,f.J)(!1,!0)?(0,N.jsx)(n(),{"data-testid":"ic-location-filled-pin"}):(0,N.jsx)(p.g,{}))}),(0,N.jsx)("div",{className:"map-zooms-container",children:(0,N.jsx)(E.Z,{onZoomInClick:()=>((e,t,s,o)=>{e&&(e.setZoom((e.getZoom()||0)+1),t||s(!0),o&&o(T.rk.ZOOM_IN))})(o,d,S,e.trackMapInteracted||(()=>{})),onZoomOutClick:()=>((e,t,s,o)=>{e&&(e.setZoom((e.getZoom()||0)-1),t||s(!0),o&&o(T.rk.ZOOM_OUT))})(o,d,S,e.trackMapInteracted||(()=>{}))})})]})]})}));S.displayName="MapViewScreenRefactor"},"46fe19f68ac3ac73285c":(e,t,s)=>{"use strict";s.d(t,{x:()=>A});var o=s("281cbdced79d8f3d2562"),i=s.n(o),a=s("d4f0325937cb45b4d7c7"),r=s("84267edb5a64fe750d05"),n=s.n(r),d=s("174811872339f1d02c40"),c=s.n(d),l=s("69084d01d3449fc1bc27"),_=s("1c2f52c061810467b454"),p=s("b48d419be3e1903edcd4"),E=s("7cb6dd6c261a56cdba1f"),u=s("54594dde5dc2714a1b38"),h=s("76a065ad83922c2f0327"),g=s("a7f44a4d9a149fde3658"),T=s("d1970d14043b553c0c4f"),m=s("3fdb80c9b6a51ecdf3f5"),f=s("9302435e81c621e827fb");const N=e=>{let{tooltipMessage:t}=e;const[s,o]=(0,l.useState)(t);(0,l.useEffect)((()=>{t&&o(t)}),[t]);const i=s&&t,a=s&&!t;return(0,f.jsx)(T.x,{alignItems:"center",children:(0,f.jsx)(T.x,{borderRadius:"md",background:"neutral-primary",paddingY:"xs",paddingX:"sm","data-testid":"tooltip-on-map",className:c()("tooltip-msg-otp",{"tooltip-msg-show":i,"tooltip-msg-hide":a}),children:(0,f.jsx)(m.Z,{type:"paragraph-xs",color:"white",children:s})})})};var S=s("e9e6380e25bd8922b1c8"),L=s("568ecdc81696e6199594");class A extends l.PureComponent{constructor(e){super(e),this.map=void 0,this.currentAddress=void 0,this.googleMap=void 0,this.handleZoomInClick=()=>{if(this.map){this.map.setZoom(this.map.getZoom()+1);const{hasZoomChanged:e}=this.state;e||this.setState(Object.assign({},this.state,{hasZoomChanged:!0})),this.props.trackMapInteracted&&this.props.trackMapInteracted(L.rk.ZOOM_IN)}},this.handleZoomOutClick=()=>{if(this.map){this.map.setZoom(this.map.getZoom()-1);const{hasZoomChanged:e}=this.state;e||this.setState(Object.assign({},this.state,{hasZoomChanged:!0})),this.props.trackMapInteracted&&this.props.trackMapInteracted(L.rk.ZOOM_OUT)}},this.fixMapBounds=this.fixMapBounds.bind(this),this.centerChanged=this.centerChanged.bind(this),this.triggerDragStart=this.triggerDragStart.bind(this),this.setCenter=this.setCenter.bind(this),this.handleChange=this.handleChange.bind(this),this.googleMapLoader=this.googleMapLoader.bind(this),this.initMapScreen=this.initMapScreen.bind(this),this.handleComponentUpdate=this.handleComponentUpdate.bind(this),this.currentAddress=e.address,this.googleMap=l.createRef(),this.map=null,this.state={hasZoomChanged:!1}}handleComponentUpdate(){this.props.markers&&"undefined"!=typeof google&&this.fixMapBounds()}componentDidUpdate(e){this.handleComponentUpdate(),this.props.isExternallyUsed&&e.address!==this.props.address&&this.setCenter(this.props.address)}initMap(){const{address:e}=this.props,t=Object.assign({center:{lat:Number(e.latitude),lng:Number(e.longitude)},zoom:17,disableDefaultUI:!0,streetViewControl:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,scrollwheel:!1,draggable:!!this.props.onDraggingChange,gestureHandling:"greedy"},this.props.mapOptions?this.props.mapOptions:{});t.styles=S.Z,this.googleMap.current&&window.google&&(this.map=new window.google.maps.Map(this.googleMap.current,t)),this.props.handleAddressChange&&this.map&&(this.map.addListener("dragend",this.handleChange),this.map.addListener("dragstart",this.triggerDragStart)),this.props.placeStaticMarkers&&this.map&&(this.props.placeStaticMarkers(this.map.data),this.map.addListener("tilesloaded",this.fixMapBounds),this.fixMapBounds()),this.props.drawCourierRoute&&this.map&&this.props.drawCourierRoute(this.map),this.props.staticMarkerLatLng&&this.map&&new window.google.maps.Marker({position:this.props.staticMarkerLatLng,map:this.map})}handleChange(){if(this.map){const e=this.map.getCenter();this.centerChanged(e),this.props.addressChangeTracker&&this.props.addressChangeTracker.setLastStepType("Map")}}render(){var e;const t=c()("location-icon-container dragging-stop");return(0,f.jsxs)(l.Fragment,{children:[(0,f.jsx)("div",{id:this.props.elementId,ref:this.googleMap,"data-testid":this.props.elementId}),(0,f.jsxs)("div",{className:t,children:[(0,f.jsx)("div",{id:"tooltip-wrapper",children:this.props.mapPinTitle&&(0,f.jsxs)("div",{className:"tooltip top tooltip-info",children:[(0,f.jsx)("div",{className:"tooltip-arrow"}),(0,f.jsx)("div",{className:"tooltip-inner",children:this.props.mapPinTitle})]})}),(0,f.jsx)("span",{className:"map-modal__map-center-icon",children:this.props.labeledMapPin?(0,f.jsx)(a.Z,{"data-testid":"saved-address-icon",className:"saved-address-icon",children:(0,_.R)(null===(e=this.props.address)||void 0===e?void 0:e.type,"neutral-primary",!0)}):this.props.handleAddressChange?(0,f.jsx)(n(),{fill:"interaction-primary"}):!this.props.markers&&((0,g.J)(!1,!0)?(0,f.jsx)(n(),{"data-testid":"ic-location-filled-pin"}):(0,f.jsx)(E.g,{}))}),(0,f.jsx)("div",{className:"map-zooms-container",children:(0,f.jsx)(u.Z,{onZoomInClick:this.handleZoomInClick,onZoomOutClick:this.handleZoomOutClick})}),(0,f.jsx)(N,{tooltipMessage:this.props.tooltipMessage})]})]})}initMapScreen(){this.initMap(),this.props.placeStaticMarkers&&(window.onresize=i()(this.fixMapBounds,200))}componentDidMount(){this.googleMapLoader(this.initMapScreen)}googleMapLoader(e){var t,s;null===(t=this.props.googleMapScriptLoader)||void 0===t||null===(s=t.loadGoogleMapLib())||void 0===s||s.then((()=>{e()}))}setCenter(e,t){var s;void 0===t&&(t=!1);const o={lat:e.latitude,lng:e.longitude};null===(s=this.map)||void 0===s||s.setCenter(o);const i=e.latitude!==this.currentAddress.latitude||e.longitude!==this.currentAddress.longitude;"autocomplete"===e.object_type||"saved address"===e.object_type?this.updateMap(e,i):e.latitude&&e.longitude&&this.centerChanged({lat:e.latitude,lng:e.longitude},i,t?e:null)}async getCenterAddress(e){try{const t="function"==typeof e.lat?e.lat():e.lat,s="function"==typeof e.lng?e.lng():e.lng,o=await p.i.getInstance().getReverse({lat:t,lng:s});return Object.assign({},o,{latitude:t,longitude:s})}catch(e){return new Error("Geo location error")}}extendBounds(e){Object.keys(this.props.markers).forEach((t=>this.props.markers[t]&&this.props.markers[t].position&&!e.contains(this.props.markers[t].position)&&e.extend(this.props.markers[t].position)))}fixMapBounds(){if(this.state.hasZoomChanged&&!this.props.isBoundToMarkers)return void this.map.setCenter({lat:Number(this.currentAddress.latitude),lng:Number(this.currentAddress.longitude)});const e=new window.google.maps.LatLngBounds;this.props.markers&&this.extendBounds(e);const t=e.getCenter(),s=e.getNorthEast(),o=e.getSouthWest();this.map.panTo({lat:t.lat(),lng:t.lng()});const i=[{lat:o.lat(),lng:o.lng()},{lat:s.lat(),lng:s.lng()}];this.props.getMapPadding?this.map.fitBounds(new window.google.maps.LatLngBounds(...i),this.props.getMapPadding()):this.map.fitBounds(...i)}updateMap(e,t){if(void 0===t&&(t=!0),e instanceof Error)return void(this.props.handleAddressChange&&this.props.handleAddressChange(null,["NO_GEOLOCATION"],"Map"));const s=(0,h.Z)(this.props.appConfig,e);t&&this.props.handleAddressChange&&this.props.handleAddressChange(e,s,"Map"),this.currentAddress=e}triggerDragStart(){this.props.handleMapState&&this.props.handleMapState(L.rd.loading),this.props.onDraggingChange&&this.props.onDraggingChange(!0)}centerChanged(e,t,s){void 0===t&&(t=!0),void 0===s&&(s=null),s?this.updateMap(s,t):this.getCenterAddress(e).then((e=>{this.updateMap(e,t)})),this.props.onDraggingChange&&this.props.onDraggingChange(!1)}}A.defaultProps={isBoundToMarkers:!0}},"4afdcdad839acbbd0fc7":(e,t,s)=>{"use strict";s.d(t,{E:()=>_e});var o=s("d1970d14043b553c0c4f"),i=s("12be0f0e9e2c7751d613");function a(e,t){var s,o,a,r,n,d;return(null==t||null===(s=t.features)||void 0===s||null===(o=s.flags)||void 0===o?void 0:o[e])||(null===(a=i.ZP.getInstance())||void 0===a||null===(r=a.getConfig())||void 0===r||null===(n=r.features)||void 0===n||null===(d=n.flags)||void 0===d?void 0:d[e])||void 0}var r=s("74c6c209c888df18fef2"),n=s("69084d01d3449fc1bc27");const d=(0,n.createContext)([]);var c=s("e2ba54487d3e9f01ee4a"),l=s("fe5b39d46df4fd0185dc"),_=s.n(l),p=s("d7f2db0229e7c7df3214"),E=s("0e8400aef1ea36fada43"),u=(s("2e0796c118320b51c6e6"),s("dfa53259c79654747bdb")),h=s("3fdb80c9b6a51ecdf3f5"),g=s("972a2a99f755405c8851"),T=s("4d9c133d8eb8c4f04928"),m=s("a7dceeac37519cfc1804"),f=s("174811872339f1d02c40"),N=s.n(f),S=s("a7f44a4d9a149fde3658"),L=s("bd11212dd200c13dd4e4"),A=s("6f2468c415bb728048f0");const O=(0,s("eeff3c378ab26d13c976").HP)((async e=>{const t={headers:{Accept:"application/json"}};try{return await(0,A.get)(e,t)}catch(e){return}}),{maxAge:36e5,cachePromiseRejection:!1});var b=s("92dfcc2420a73bb8a53b");function C(e,t){return!!e&&(!t||0===t.toString().length)}var I=s("94217eecef624954b619");function v(e,t){if(!e||!t)return!1;return!new RegExp(e).test(t.toString())}const R=(e,t)=>e!==I.r.PHONE||!v("^(\\+)?(\\d+)?$",t);function M(e,t,s){void 0===s&&(s=!1);const o={};return e.forEach((e=>{if(e.mapping&&s)return;const i=!!e.validation&&v(e.validation.match,t[e.name]),a=C(e.is_required||!1,t[e.name]);(i||a)&&(e.translation_keys?o[e.name]=e.translation_keys.error_translation_key:o[e.name]=((i?"invalid":"")+" "+(a?"empty":"")).trim())})),o}var D=s("ef7f39a531ad1aecc167");var y=s("1b7f4259f1d13a4c5a09"),P=s("cb411deb6baaf4549f5f"),G=s("1c2f52c061810467b454"),B=s("9302435e81c621e827fb");const w=e=>{let{address:t,onLabelSelect:s,selectedAddress:i,gtmLocationService:a}=e;const[r,c]=(0,n.useState)(t),l=(0,m.T)(),_=t.label&&r.type===I._.OTHER?t.label:"",[p,E]=(0,n.useState)(r.type===I._.OTHER&&!!r.label),[u,g]=(0,n.useState)(_),T=n.useContext(d),f=(e=>[{type:I._.HOME,name:e(b.w.NEXTGEN_HOME),label:"Home"},{type:I._.WORK,name:e(b.w.NEXTGEN_WORK),label:"Work"},{type:I._.PARTNER,name:e(b.w.address_label_partner),label:"Partner"},{type:I._.OTHER,name:e(b.w.address_label_other),label:void 0}])(l),{address_label_title:N,address_label_other_field:S}=b.w;return(0,B.jsxs)(o.x,{className:"label-container",children:[(0,B.jsx)(h.C,{type:"label-md",children:l(N)}),(0,B.jsx)(o.x,{justifyContent:"start",padding:"xs",direction:"row",className:"label-group",children:f.map((e=>(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(y.ZP,{"data-testid":"label-pill",label:e.name,id:e.name,onClick:()=>(e=>{const t=(0,D.id)(e);E(e===I._.OTHER);const o=Object.assign({},r,{type:e,label:t});c(o);const n=(0,D.Aq)(T,e,null==i?void 0:i.id,t);a.trackAddressLabelClicked(t||"Other",i,n),s(o,n)})(e.type),leadingIcon:(0,G.R)(e.type),type:"radio",name:"address-label",size:"small"})})))}),p&&(0,B.jsx)(P.TextInput,{id:"other_label_input",label:l(S),onChange:e=>{e.preventDefault(),g(e.target.value)},value:u,"data-testid":"other_label_input",onBlur:()=>{const e=Object.assign({},r,{type:I._.OTHER,label:u});c(e);const t=(0,D.Aq)(T,I._.OTHER,null==i?void 0:i.id,u);a.trackAddressOtherSubmitted(i,u,t),s(e,t)}})]})};w.displayName="LabelContainer";var x=s("d4f0325937cb45b4d7c7");const U=function(e){switch(void 0===e&&(e="text"),e){case"number":return I.r.NUMBER;case"phone_number":return I.r.PHONE;default:return I.r.TEXT}};var k=s("03c289f56e93a3c37d04");const X=e=>{let{country:t}=e;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(x.Z,{className:"tel-input",direction:"row",alignItems:"center",justifyContent:"start","data-testid":""+t.dial_code,children:[(0,B.jsx)(x.Z,{className:"flag "+t.code.toLowerCase(),marginRight:"xxs"}),(0,B.jsx)(h.C,{type:"paragraph-sm",marginLeft:"xxs",children:t.dial_code})]})})},F=e=>{let{countryCodeList:t,isoCountryCode:s,savedCountryCode:o,onCountryCodeChange:i}=e;const[a,r]=(0,n.useState)(""),[d,c]=(0,n.useState)([]);(0,n.useEffect)((()=>{r(o||"")}),[o]),(0,n.useEffect)((()=>{const e=(e,t)=>{let{code:s,dial_code:i}=e;return o?o===i:(null==s?void 0:s.toLowerCase())===t||(null==s?void 0:s.toLowerCase())===a.toLowerCase()};c(((t,s)=>t.map((t=>({label:(0,B.jsx)(X,{country:t}),value:t.dial_code,selected:e(t,s)}))))(t,s))}),[t,a,s,o]);return(0,B.jsx)(B.Fragment,{children:d.length>0&&(0,B.jsx)(k.L,{id:"country-code",options:d,onChange:e=>{r(e.value||""),i(e.value||"")},zIndex:3,"data-testid":"country-code-dropdown"})})},j=e=>{let{countryCodeList:t,defaultCountryCode:s,error:o,formSubmitted:i,isoCountryCode:a,isValidationDisable:r,is_required:d,label:c,name:l,onBlur:_,onChange:p,onCountryCodeChange:E,onFocus:u,properties:h,selectedCountryCode:g,text_max_length:T,validation:m,value:f}=e;const[S,L]=(0,n.useState)(""),[A,O]=(0,n.useState)(""),[b,I]=(0,n.useState)(!1),[M,D]=(0,n.useState)(!1),y=""+A+S;(0,n.useEffect)((()=>{L(f&&(s||g)?f.replace(s,"").replace(g,""):""),O(g||s||"")}),[f,s,g]);const G=(e,t)=>{const s=e?""+t+e:e,o=!C(!!d,s),i=!m||!e||!v(m.match,s);return r||o&&i};return(0,B.jsxs)(x.Z,{direction:"row",width:100,children:[(0,B.jsx)(F,{onCountryCodeChange:e=>{if(O(e),E){E(e);const t=G(S,e);p(""+e+S||"",t?void 0:o)}},savedCountryCode:A,countryCodeList:t,isoCountryCode:a}),(0,B.jsxs)(x.Z,{className:(()=>{const e=S?y:"",t="input-box phone";return r?t:N()(t,{isEmpty:(M||i)&&C(!!d,e),invalid:(M||i)&&M&&!b&&m&&v(m.match,e)})})(),marginLeft:"sm",children:[(0,B.jsx)(P.TextInput,{type:U(h.field_type),name:l,value:S||"",onChange:e=>{I(!0);const{value:t,maxLength:s,type:i}=e.target,a=t?""+A+t:t,r=G(t,A);((e,t,s)=>e.length<=t&&R(s,e))(a,s,i)&&(L(t),p(a||"",r?void 0:o)),D(!0)},onFocus:u,onBlur:()=>{_&&_(C(!!d,S)),I(!1),D(!0)},placeholder:" ",id:l,maxLength:T||15,"data-testid":"phone-input",label:c||""}),(0,B.jsx)("strong",{className:"invalid-error-message","data-testid":"phone-input-error",children:o})]})]})},H=e=>{const[t,s]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1);(0,n.useEffect)((()=>{s(e.value)}),[e.value]);return(0,B.jsxs)("div",{className:(()=>{const s=t,i=e.mapping&&e.properties.is_dynamic_field&&!e.properties.is_always_shown,a="input-box js-input-box";return e.isValidationDisable?a:N()(a,{isEmpty:(o||e.formSubmitted)&&C(!!e.is_required,s),invalid:(o||e.formSubmitted)&&o&&e.validation&&v(e.validation.match,s),split:!i&&e.properties.is_split_view,full:!!i||!e.properties.is_split_view})})(),children:[(0,B.jsx)(P.TextInput,{type:U(e.properties.field_type),name:e.name,value:t||"",onChange:o=>{const a=o.target.value,r=!C(!!e.is_required,a),n=!e.validation||!v(e.validation.match,a),d=e.isValidationDisable||r&&n;var c,l,_;c=a,l=o.target.maxLength,_=o.target.type,c.length<=l&&R(_,c)?(e.onChange(a||"",d?void 0:e.error),s(a)):e.onChange(t||"",d?void 0:e.error),i(!0)},onFocus:e.onFocus,onBlur:()=>{e.onBlur&&e.onBlur(C(!!e.is_required,t)),i(!0)},placeholder:" ",id:e.name,maxLength:e.text_max_length||600,label:e.label||"","data-testId":"form-text-input"}),(0,B.jsx)("strong",{className:"invalid-error-message",children:e.error})]})},V=e=>{const[t,s]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1);(0,n.useEffect)((()=>{s(e.value)}),[e.value]);return(0,B.jsxs)("div",{className:(()=>{const s=t,i="input-box js-input-box";return e.isValidationDisable?i:N()(i,{isEmpty:(o||e.formSubmitted)&&C(!!e.is_required,s),invalid:(o||e.formSubmitted)&&o&&e.validation&&v(e.validation.match,s),split:e.properties.is_split_view,full:!e.properties.is_split_view})})(),children:[(0,B.jsx)("textarea",{name:e.name,value:t||"",onChange:t=>{const o=t.target.value,a=e.isValidationDisable||e.validation&&!v(e.validation.match,o)&&!C(!!e.is_required,o);e.onChange(o||"",a?void 0:e.error),i(!0),s(o)},onBlur:()=>{i(!0)},placeholder:" ",id:e.name,maxLength:e.text_max_length||600,"data-testid":"form-textarea"}),(0,B.jsx)("label",{htmlFor:e.name,className:"msg-title",children:e.label}),(0,B.jsx)("strong",{className:"invalid-error-message",children:e.error})]})},Y=e=>{const t=(0,m.T)(),s=function(e){const[t,s]=(0,n.useState)(e),[o,i]=(0,n.useState)({}),a={};return{setValue:function(e,r,n){t[e]=r,n&&void 0===o[e]?o[e]=n:n||delete o[e],i(o),s(t),a.fn&&a.fn(t,o)},setValues:function(e,o){s(e),o&&i(o),a.fn&&a.fn(t,o)},changeHandler:function(e){a.fn=e},values:t,errors:o}}({}),o=Object.assign({},s),[a,r]=(0,n.useState)(!1),[d,l]=(0,n.useState)(!1),[_,p]=(0,n.useState)(!1),[E,f]=(0,n.useState)({type:"error",message:e.errorMessage,show:e.showError}),[A,C]=(0,n.useState)(!1),[I,v]=(0,n.useState)([]),R=i.ZP.getInstance().getConfig(),y=()=>e.addressId?"EditAddress":"NewAddress",P=e=>e.properties.is_dynamic_field?"DynamicField":e.is_required?"Field":void 0,G=e=>e.translation_keys&&e.translation_keys.hint_translation_key?e.translation_keys.hint_translation_key:"",x=s=>{var i;const r=s.translation_keys?s.translation_keys.error_translation_key:"",n=s.name,d=Object.assign({},s,{value:o.values[n],formSubmitted:a,isValidationDisable:!!e.isValidationDisable&&!!s.mapping,onChange:(t,i)=>{var a;const r=t.trim();o.setValue(n,r,i),null===(a=e.onFieldChange)||void 0===a||a.call(e,n,t,i),((t,s)=>{const o=P(t);o&&(s.initializeLocationAttemptedTracking(o),_||(s.trackLocationAttempted(e.values,void 0,y()),p(!0)))})(s,e.gtmLocationService)},onCountryCodeChange:e=>{o.setValue("phone_country_code",e)},onFocus:()=>{p(!1),((t,s)=>{const o=P(t);o&&s.trackLocationClicked(e.values,void 0,y(),o)})(s,e.gtmLocationService)},onBlur:t=>{((t,s,o)=>{const i=P(t);"Field"===i&&o&&s.trackLocationError("EMPTY_INPUT",i,e.values,y(),void 0)})(s,e.gtmLocationService,t)},label:t(G(s))||t(s.label),error:t(r)});switch(!0){case"text_multiple_line"===s.properties.input_type:return(0,B.jsx)(V,Object.assign({},d),n);case"phone_number"===s.properties.field_type:return(0,B.jsx)(j,Object.assign({},d,{defaultCountryCode:(null===(i=e.selectedAddress)||void 0===i?void 0:i.phone_country_code)||(c=I,l=R.isoCountryCode,null===(E=c.filter((e=>{let{code:t}=e;return(null==t?void 0:t.toLowerCase())===l}))[0])||void 0===E?void 0:E.dial_code),isoCountryCode:R.isoCountryCode,selectedCountryCode:o.values.phone_country_code,countryCodeList:I}),n);case"text_single_line"===s.properties.input_type:default:return(0,B.jsx)(H,Object.assign({},d,{appConfig:e.appConfig}),n)}var c,l,E},U=(0,n.useCallback)(o.setValues,[]);(0,n.useEffect)((()=>{r(!1);const t=M(e.fields,e.values,e.isValidationDisable),s=Object.keys(t);l(s.length>0),U(e.values,t)}),[e.values,e.fields,e.isValidationDisable,U]),(0,n.useEffect)((()=>{e.fields.filter((e=>"phone_number"===e.name))&&(async e=>{if(e.countryCodeApiUrl){const t=await O(e.countryCodeApiUrl);return(null==t?void 0:t.data)||[]}return[]})(R).then((e=>{v(e)}))}),[R,e.fields]),(0,n.useEffect)((()=>{const{address_label_duplicate:s}=b.w;switch(!0){case e.showError:f({type:"error",message:e.errorMessage,show:e.showError});break;case A:f({type:"warning",message:t(s).replace("%Label%",(0,D.FE)((0,D.Kt)(t),new L.C(e.values))||""),show:!0});break;default:f({show:!1})}}),[e.showError,A,e.values.label,e.values,e.errorMessage,t]);const k=t=>{var s;t&&t.preventDefault(),null===(s=e.setAddressUnsavedError)||void 0===s||s.call(e,!1);const i=M(e.fields,e.values,e.isValidationDisable),a=Object.keys(i);!e.onSubmit||a.length>0||((e.isValidationDisable||0===Object.keys(o.errors).length)&&e.onSubmit(o.values),r(!0))};o.changeHandler(((e,t)=>{l(Object.keys(t).length>0)}));const X=e.fields.filter((e=>(0,c.Ux)(e))),F=0===X.length?"":X[0].translation_keys&&X[0].translation_keys.dynamic_field_title_translation_key?t(X[0].translation_keys.dynamic_field_title_translation_key):"",Y=e.appConfig&&(0,S.J)(!1,!0);return(0,B.jsxs)("form",{className:"address-form",onSubmit:k,"data-testid":"address-form",children:[(0,B.jsxs)("div",{id:e.isWhereComponent?"":"labelContainerWithSubmitWrapper",children:[(0,B.jsxs)("div",{className:N()("map-box-wrapper",Y?"full-width-wrapper":void 0),children:[e.map,X.length>0&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h.Z,{as:"h3",type:"label-sm-secondary",children:t(F)}),(0,B.jsx)("div",{className:"address-form fields-wrapper",children:X.map((e=>x(e)))[0]})]})]}),Y&&e.isWhereComponent&&(0,B.jsx)(h.Z,{marginBottom:"st",type:"label-md",children:t(b.w.address_details_title)}),(0,B.jsx)("div",{className:N()("fields-wrapper",Y&&!e.isWhereComponent?"fields-width-wrapper":void 0),children:e.fields.filter((e=>(0,c.UY)(e))).map((e=>x(e)))})]}),e.showLabel&&(0,B.jsx)(w,{"data-testid":"address-label",address:e.values,onLabelSelect:function(t,s){var i;void 0===s&&(s=!1),o.setValue("type",t.type),o.setValue("label",t.label),null===(i=e.setAddressUnsavedError)||void 0===i||i.call(e,!1),C(s)},selectedAddress:e.selectedAddress,gtmLocationService:e.gtmLocationService}),e.captchaResponse&&(0,B.jsx)(T.U,{className:"authentication__captcha",onSuccess:k,response:e.captchaResponse,pageType:"checkout",elementId:"captcha-container-address"}),E.show&&(0,B.jsx)(u.Banner,{"data-testid":"address-message",kind:E.type,center:!1,full:!0,big:!1,children:E.message}),(0,B.jsx)(g.z,{"data-testid":"mbl-submit-form",layout:"full-width-primary",id:"submit-form",disabled:d,onClick:k,children:t(b.w.mbl_submit_btn)})]})};Y.displayName="Form";var K=s("78bd3eef3fe8b6a51287"),Z=s("f481ef00e50d282f38a9"),z=s("77dd625b88c8b2482c64"),W=s("8898b63d76f1fcc2092e"),q=s("3ff5230752f8be307b07"),J=s("6c98f6eb5d8c8e24aa4d"),Q=s.n(J),$=s("46fe19f68ac3ac73285c"),ee=s("f0dd78d59fe2c6214da6");const te=e=>{let{isMultiLine:t,line1:s,line2:o}=e;return(0,B.jsxs)("div",{className:"address","data-testid":"map-box-address-info",children:[t&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"address-part-1","data-testid":"map-box-address-info-part-1",children:s}),(0,B.jsx)("div",{className:"address-part-2","data-testid":"map-box-address-info-part-2",children:o})]}),!t&&(0,B.jsx)("div",{className:"address-part-1","data-testid":"map-box-address-info-part-1",children:o})]})},se=(e,t)=>i.ZP.getInstance().getAddressFormatter().getFormattedAddress(t,e.replace("plz","postcode")).trim().replace("Unnamed Road","").replace(/,$/,""),oe=e=>{let{appConfig:t,address:s,mapRef:i,onEdit:n,translation:d,googleMapScriptLoader:c,isWhereComponent:l,labeledMapPin:_}=e;if(!s)return null;const p=se(t.address_config.multiline_formatted_address[0],s),E=t.address_config.multiline_formatted_address[1]?se(t.address_config.multiline_formatted_address[1],s):"",u=N()("map-box",{"reduced-map-box":!l}),h=!!a(r.bk.LOCATION_CODE_REFACTOR),T=p.length>0;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{"data-testid":"map-box",className:u,children:[h?(0,B.jsx)(ee.L,{address:s,ref:i,appConfig:t,elementId:"map-box",googleMapScriptLoader:c,labeledMapPin:_}):(0,B.jsx)($.x,{address:s,ref:i,appConfig:t,elementId:"map-box",googleMapScriptLoader:c,labeledMapPin:_}),(0,B.jsx)("div",{className:"map-cover"})]}),(0,S.J)(!1,!0)?(0,B.jsxs)("div",{className:"info",children:[(0,B.jsxs)(o.x,{direction:"row",children:[(0,B.jsx)("span",{className:"address-icon",children:(0,B.jsx)(Q(),{fill:"neutral-primary"})}),(0,B.jsx)(te,{line1:p,isMultiLine:T,line2:E})]}),(0,B.jsx)(g.z,{className:"edit","data-testid":"map-box-edit",onClick:n,variant:"text",removeSideSpacing:!0,children:d.edit})]}):(0,B.jsxs)("div",{className:"info",children:[(0,B.jsx)(te,{line1:p,isMultiLine:T,line2:E}),(0,B.jsx)(g.z,{className:"edit","data-testid":"map-box-edit",onClick:n,variant:"text",removeSideSpacing:!0,children:d.edit})]})]})};oe.displayName="MapBox";var ie=s("b0345e1c58c9fd727545"),ae=s("6fd2852d6f9220b4ea44");const re=(e,t)=>{const s=t.location_error_no_result_text;switch(e){case ae.X.INVALID_MAP_ADDRESS_NOT_FOUND:return t.error_invalid_address_not_found;case ae.X.INVALID_ADDRESS_NOT_FOUND:case ae.X.INVALID_ADDRESS:return s;case ae.X.EMPTY_INPUT:return t.error_empty_input;case ae.X.INVALID_ADDRESS_COUNTRY_NOT_SUPPORTED:return t.error_invalid_address_country_not_supported;case ae.X.INCOMPLETE_ADDRESS_POSTCODE:return t.error_incomplete_address_postcode;case ae.X.INCOMPLETE_ADDRESS_STREET:return t.error_incomplete_address_street;case ae.X.INCOMPLETE_ADDRESS_BUILDING:return t.error_incomplete_address_building;case ae.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:return t.error_incomplete_address_building_street;case ae.X.NO_GEOLOCATION:return t.error_no_geolocation;case ae.X.ADDRESS_NOT_DELIVERABLE:return t.NEXTGEN_CHECKOUT_NOT_DELIVERABLE;default:return p.k.error({error:e,message:"FullAddressInputSearchError:"+e}),s}};class ne extends n.Component{constructor(e){super(e),this.translations=void 0,this.inputNodeModal=void 0,this.mapRef=void 0,this.formConfig=void 0,this.gtmLocationService=void 0,this.addressChangeTracker=void 0,this.initalMetaData=void 0,this.onEdit=e=>{const{isWhereComponent:t,addressBookModalOnEdit:s}=this.props;t&&s?s(e):this.openMapModal(e)},this.gtmLocationService=i.ZP.getInstance().getGTMLocationService(),this.addressChangeTracker=i.ZP.getInstance().getAddressChangeTracker(),this.formConfig={fields:[]},this.inputNodeModal=n.createRef(),this.mapRef=n.createRef(),this.state={fields:[],isMapModalOpen:!1,formValues:{},selectedAddress:new L.C,errors:[],captchaResponse:null,showError:!1,showNonDeliverableError:!1,errorMessage:"",showRestaurantRecommendations:!1,outOfBoundsAddress:new L.C},this.translations=e.translations,this.openMapModal=this.openMapModal.bind(this),this.closeMapModal=this.closeMapModal.bind(this),this.onSubmitModal=this.onSubmitModal.bind(this),this.onSubmit=this.onSubmit.bind(this),this.getErrorTranslation=this.getErrorTranslation.bind(this),this.setAddressUnsavedError=this.setAddressUnsavedError.bind(this)}handleShowRestaurantRecommendationsHandler(){this.setState({isMapModalOpen:!1})}componentDidMount(){this.setupEventListener(),i.ZP.getInstance().getFormConfig().then((async e=>{this.formConfig=e;const t=this.getInitialAddress(),s=t?i.ZP.getInstance().getFormFormat(t):{};this.initalMetaData=await this.getInitialMetaData();const o=this.filterFields(new L.C(s)),a=this.formConfig.fields.filter((e=>!e.mapping)),r=this.cleanFieldsForNewAddress(this.props.address,a),n=this.props.isNewAddress?r:t,d=this.cleanNewAddressValueObject(s,o);this.props.isMapModalOpen&&this.addressChangeTracker.setLastStepType("New"),this.props.isWhereComponent&&(0,S.J)(this.props.isWhereComponent)&&!this.props.isNewAddress?this.setState({fields:this.props.fields?this.props.fields:o,formValues:this.props.formValues?this.props.formValues:d,selectedAddress:this.props.editedAddress?this.props.editedAddress:n,isMapModalOpen:!!this.props.isMapModalOpen}):this.setState({fields:o,formValues:d,selectedAddress:n||void 0,isMapModalOpen:!!this.props.isMapModalOpen}),this.trackAddressLoad(o),this.trackAddressFormABTest(this.props.appConfig,e.id)})),this.gtmLocationService.trackMblLoading(this.props.address)}async getInitialMetaData(){if(this.props.address&&this.props.address.id){return await this.getAddressMetaData(this.props.address.id)}if(this.props.address&&"meta"in this.props.address)try{return JSON.parse(this.props.address.meta)}catch(e){}return{provider:(0,c.ph)()}}setAddressUnsavedError(e){const{NEXTGEN_ADDRESS_UNSAVED_ERROR:t}=this.translations;this.setState({showError:e,errorMessage:t})}setupEventListener(){i.ZP.getInstance().getEventLord().on("location:address-not-saved",(()=>{this.setAddressUnsavedError(!0)}))}getInitialAddress(){return this.props.address}cleanFieldsForNewAddress(e,t){const s=this.props.appConfig.address_config.format,o=Object.assign({},e);t.forEach((e=>{o[e.name]=void 0}));const a=i.ZP.getInstance().getAddressFormatter().getFormattedAddress(o,s);return o.formatted_customer_address=a,new L.C(o)}cleanNewAddressValueObject(e,t,s){if(void 0===e&&(e={}),void 0===s&&(s=!1),!e.addressId&&!s){const s={};return t.forEach((t=>{t.mapping&&(s[t.name]=e[t.name])})),s}const o={};return t.forEach((t=>{o[t.name]=e[t.name],"phone_number"===t.name&&(o.phone_country_code=e.phone_country_code)})),"Unnamed Road"===o.address_line1&&delete o.address_line1,o.type=e.type?e.type:I._.OTHER,o.label=e.label,o}openMapModal(e){e.preventDefault(),this.addressChangeTracker.setLastStepType("EditButton"),this.state.selectedAddress&&this.gtmLocationService.trackLocationClicked(this.state.selectedAddress,void 0,"EditAddress","EditButton"),this.setState({isMapModalOpen:!0})}closeMapModal(){this.setState({isMapModalOpen:!1});const e=this.state.selectedAddress&&this.state.selectedAddress.id?Z.P.EDIT_ADDRESS:Z.P.NEW_ADDRESS;this.gtmLocationService.trackEditAddressCanceled(this.state.selectedAddress,"Map",e)}getErrorTranslation(e){return re(e,this.translations)}async getAddressMetaData(e){let t={provider:(0,c.ph)()};const s=await this.props.address;if(s&&s.meta)try{t=JSON.parse(s.meta)}catch(t){p.k.error({error:new Error,message:"cannot parse the address meta data for:"+e})}return t}onSubmitModal(e,t){this.state.selectedAddress&&(!this.state.selectedAddress||e.latitude===this.state.selectedAddress.latitude&&e.longitude===this.state.selectedAddress.longitude)||(this.initalMetaData=void 0),this.mapRef&&this.mapRef.current&&e&&this.mapRef.current.setCenter(e,!0);const s=i.ZP.getInstance().getFormFormat(e),o=this.filterFields(new L.C(s)),a=Object.assign({},this.state.formValues);this.formConfig.fields.forEach((e=>{e.mapping&&delete a[e.name]}));const r=this.cleanNewAddressValueObject(Object.assign({},s,a),o,!0);this.setState({fields:o,trigger:t,selectedAddress:e,isMapModalOpen:!1,formValues:r},(()=>this.trackAddressUpdate(o)))}getFormattedAddressForUpdatedAddress(e){const t=this.props.appConfig.address_config.format;return i.ZP.getInstance().getAddressFormatter().getFormattedAddress(e,t)}onSubmit(e){const t=this.state.selectedAddress?i.ZP.getInstance().getFormFormat(this.state.selectedAddress):{},s=this.formConfig.fields.filter((e=>(0,c.pB)(e))).map((e=>e.name)),o=this.getMetaFormData(s,e,t);this.trackAddressSubmission(this.state.fields);const a=Object.assign({},t,e,{meta:JSON.stringify(o)}),r=this.props.address&&this.props.address.id?Z.P.EDIT_ADDRESS:Z.P.NEW_ADDRESS,n=new L.C(Object.assign({},a,{formatted_customer_address:this.getFormattedAddressForUpdatedAddress(a)}));this.saveAddress(n).then((async e=>{const t=Object.assign({is_saving_failed:!1},e);"function"==typeof this.props.onSubmit&&this.props.onSubmit(t,[],r),this.setState({captchaResponse:null})})).catch((async e=>{var t;const s=i.ZP.getInstance().getLocationXhrService(),o=s.isAppIdExist(e),a=(null==e||null===(t=e.response)||void 0===t?void 0:t.data)||e;if(o)this.setState({captchaResponse:a});else{var d,c,l,_,p;const t=s.isAxiosProvider()?null===(d=e.response)||void 0===d||null===(c=d.data)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message:null===(_=e.data)||void 0===_?void 0:_.message,o=this.props.address&&this.props.address.id?this.props.address.id:void 0,i=null!==(p=this.props.address)&&void 0!==p&&p.id?this.props.address.type:I._.OTHER,a=Object.assign({},n,{is_saving_failed:!0,id:o,type:i});this.setState({errorMessage:this.translations[t]||this.translations.INVALID_ADDRESS_ERROR,showError:!0}),this.props.onSubmit(a,[t],r)}}))}trackAddressFormABTest(e,t){const s=(0,K._Z)(e);[z.ps.VARIATION1,z.ps.VARIATION2,z.ps.CONTROL].includes(s)&&this.gtmLocationService.trackABTestParticipated("address-form",s+"_"+t)}trackAddressSubmission(e){const t=this.getDynamicFieldsForTracking(e,this.state.formValues);this.gtmLocationService.trackSubmittedAddressOnCheckout(this.state.selectedAddress,this.getLocationSubmissionType(this.props.address),t,this.props.savedAddressesCount,this.getFormType(this.props.address)),this.addressChangeTracker.setLastStepType(null)}trackAddressUpdate(e){const t=this.getDynamicFieldsForTracking(e,this.state.formValues),s=this.addressChangeTracker.getLastStepType();this.gtmLocationService.trackAddressUpdated(this.state.selectedAddress,s,t,this.getFormType(this.props.address))}trackAddressLoad(e){const t=this.getDynamicFieldsForTracking(e,this.state.formValues);this.gtmLocationService.trackCheckoutAddressLoaded(this.state.selectedAddress,t,this.props.savedAddressesCount,this.getFormType(this.props.address))}getDynamicFieldsForTracking(e,t){return e.reduce(((e,s)=>((0,c.Ux)(s)&&(e[s.name]=!!t[s.name]),e)),{})}getLocationSubmissionType(e){const t=this.addressChangeTracker.getLastStepType(),s=this.getAddressId(e)?"Saved":"New";return _()(["Map","Autocomplete","Search","LocateMe","Field","DynamicField"],t)?t:s}getFormType(e){return this.getAddressId(e)?"EditAddress":"NewAddress"}getAddressId(e){return e?e.id:void 0}saveAddress(e){const t=i.ZP.getInstance(),s=t.getAddressService(),o=t.getConfig().address_config.form_id;return this.props.address&&this.props.address.id?s.updateAddress(Object.assign({},e,{id:this.props.address.id,form_id:o})).then((e=>{const t=e.data?e.data:e;return Object.assign({is_saving_failed:!1},t)})).catch((e=>{throw e})):i.ZP.getInstance().getAddressService().createAddress(Object.assign({},e,{type:(0,D.Fz)(e.type)||I._.OTHER,form_id:o})).then((e=>{const t=e.data?e.data:e;return Object.assign({is_saving_failed:!1},t)})).catch((e=>{throw e}))}getMetaFormData(e,t,s){const o={provider:(0,c.ph)()},i=Object.assign({},t),a=Object.assign({},s);if(a.meta&&(this.props.address.id||this.props.isNewAddress)){const t=this.props.address.meta?JSON.parse(String(this.props.address.meta)):{};var r;if(null!=t&&t.dynamic_fields)e.forEach((e=>{var s,o;"google"===(null===(s=t.dynamic_fields)||void 0===s||null===(o=s[e])||void 0===o?void 0:o.source)&&delete t.dynamic_fields[e]})),0!==(null===(r=Object.keys(t.dynamic_fields))||void 0===r?void 0:r.length)&&(o.dynamic_fields=Object.assign({},t.dynamic_fields))}return e.forEach((e=>{var t;i[e]&&(o.dynamic_fields||(o.dynamic_fields={}),o.dynamic_fields[e]||(a[e]?i[e]===a[e]||0===(null===(t=i[e])||void 0===t?void 0:t.length)&&!a[e]||(o.dynamic_fields[e]={source:"user_edited"}):o.dynamic_fields[e]={source:"user"}));null!=o&&o.dynamic_fields&&0===Object.keys(null==o?void 0:o.dynamic_fields).length&&delete o.dynamic_fields})),o}filterFields(e){const{fields:t,dynamic_fields_properties:s}=this.formConfig,o=null==s?void 0:s.exclude_from_cities,i=(null==o?void 0:o.some((t=>e.city_id&&e.city_id.toString()===t)))?[]:this.filterGoogleDynamicField(t,e).slice(0,1),a=t.filter((e=>(0,c.UY)(e)));return i[0]?[...i,...a]:[...a]}filterGoogleDynamicField(e,t){return e.filter((e=>e.mapping)).filter((e=>(0,c.Ux)(e))).filter((e=>{var s,o,i,a,r,n,d,c,l;const _=t&&t[e.name]?t[e.name]:void 0;return"address_line1"===e.name&&"Unnamed Road"===_||(!_||("user"===(null===(s=this.initalMetaData)||void 0===s||null===(o=s.dynamic_fields)||void 0===o||null===(i=o[e.name])||void 0===i?void 0:i.source)||"user_edited"===(null===(a=this.initalMetaData)||void 0===a||null===(r=a.dynamic_fields)||void 0===r||null===(n=r[e.name])||void 0===n?void 0:n.source)||"google"!==(null===(d=this.initalMetaData)||void 0===d||null===(c=d.dynamic_fields)||void 0===c||null===(l=c[e.name])||void 0===l?void 0:l.source)&&(!(this.initalMetaData&&this.initalMetaData.dynamic_fields&&!this.initalMetaData.dynamic_fields[e.name]||this.initalMetaData&&!this.initalMetaData.dynamic_fields)&&!_)))}))}filterMapBoxAddressData(e){const t=this.state.fields.filter((e=>e.mapping&&e.properties.is_dynamic_field&&!e.properties.is_always_shown))[0];if(this.initalMetaData&&e&&t){var s;const o=Object.assign({},e);return null!==(s=this.initalMetaData)&&void 0!==s&&s.dynamic_fields&&Object.keys(this.initalMetaData.dynamic_fields).forEach((e=>{var s,i,a,r,n,d;if(("user"===(null===(s=this.initalMetaData)||void 0===s||null===(i=s.dynamic_fields)||void 0===i||null===(a=i[e])||void 0===a?void 0:a.source)||"user_edited"===(null===(r=this.initalMetaData)||void 0===r||null===(n=r.dynamic_fields)||void 0===n||null===(d=n[e])||void 0===d?void 0:d.source))&&e===(null==t?void 0:t.name)){const t=this.getUserLocationDataKeyByLocationModel(e);delete o[t],delete o[e]}})),new L.C(o)}return e}getUserLocationDataKeyByLocationModel(e){const t=i.ZP.getInstance().getAddressFormatter().getFormMappings();let s=e;return Object.keys(t).forEach((o=>{t[o]===e&&(s=o)})),s}getMapComponent(){return(0,B.jsx)(oe,{appConfig:this.props.appConfig,isWhereComponent:this.props.isWhereComponent,mapRef:this.mapRef,address:this.filterMapBoxAddressData(this.state.selectedAddress),onEdit:this.onEdit,translation:{edit:this.translations.NEXTGEN_MBL_EDIT_MAP||"NEXTGEN_MBL_EDIT_MAP"},googleMapScriptLoader:i.ZP.getInstance().getGoogleMapScriptLoader(),GTMLocationService:i.ZP.getInstance().getGTMLocationService(),labeledMapPin:!0})}render(){const e=i.ZP.getInstance(),t=e.getConfig(),s=e.getModel(),o=this.translations.input_label_experiment;return 0===this.state.fields.length?null:(0,B.jsx)(q.H,{locationConfig:t,gtmLocationService:this.gtmLocationService,locationModel:s,children:(0,B.jsxs)(E.$,{translation:Object.assign({},this.translations),children:[this.state.isMapModalOpen&&(0,B.jsx)(ie.Overlay,{disableValidation:this.state.showNonDeliverableError,disableInitialMessage:!0,onClose:this.closeMapModal,googleMapScriptLoader:i.ZP.getInstance().getGoogleMapScriptLoader(),appConfig:t,elementId:"map-id-modal",model:null,selectedAddress:this.state.selectedAddress||null,gtmLocationService:i.ZP.getInstance().getGTMLocationService(),expeditionType:"",focusOnRender:!0,showSavedAddress:!1,showSuggestions:!0,addressChangeTracker:this.addressChangeTracker,inputRef:this.inputNodeModal,errorTranslator:this.getErrorTranslation,onSubmit:this.onSubmitModal,placeholder:o,title:o,modalTitle:this.translations.location_map_title,mapPinTitle:this.translations.map_tooltip,mapSubmitTitle:this.translations.mbl_map_submit_btn,locationService:i.ZP.getInstance(),translations:this.translations,vendor:this.props.vendor,handleOutOfBoundsAddress:this.props.handleOutOfBoundsAddress}),(0,B.jsx)(Y,{isWhereComponent:this.props.isWhereComponent,map:this.getMapComponent(),isValidationDisable:!1,fields:this.state.fields,values:this.state.formValues,onSubmit:this.onSubmit,gtmLocationService:this.gtmLocationService,captchaResponse:this.state.captchaResponse,showError:this.state.showError,setAddressUnsavedError:this.setAddressUnsavedError,showLabel:!0,addressId:this.props.address.id,selectedAddress:this.state.selectedAddress,errorMessage:this.state.errorMessage,appConfig:this.props.appConfig,onEdit:this.onEdit,mapRef:this.mapRef,translations:this.translations})]})})}}const de=(0,W.Z)(ne,"AddressFormComponent");var ce=s("64d1811020626b629fb5");const le=(0,W.Z)((e=>{let{address:t,translations:s,appConfig:o,isWhereComponent:a,addressBookModalOnEdit:r,savedAddressesCount:d,isNewAddress:l,vendor:p,handleOutOfBoundsAddress:u,editedAddress:h,formValues:g,onSubmit:T,isMapModalOpen:m,fields:f}=e;const[N,A]=(0,n.useState)(!1),[O,b]=(0,n.useState)(!1),[C,v]=(0,n.useState)(""),[R,M]=(0,n.useState)(new L.C),[y,P]=(0,n.useState)({}),[G,w]=(0,n.useState)({fields:[]}),[x,U]=(0,n.useState)(void 0),[k,X]=(0,n.useState)([]),[F,j]=(0,n.useState)(null),H=i.ZP.getInstance().getAddressChangeTracker(),V=i.ZP.getInstance().getGTMLocationService(),W=(0,n.createRef)(),J=(0,n.createRef)(),Q=i.ZP.getInstance(),$=Q.getModel(),ee=s.input_label_experiment,setAddressUnsavedError=e=>{const{NEXTGEN_ADDRESS_UNSAVED_ERROR:t}=s;b(e),v(t)},te=e=>{a&&r?r(e):(e.preventDefault(),H.setLastStepType("EditButton"),R&&V.trackLocationClicked(R,void 0,"EditAddress","EditButton"),A(!0))},se=(e,o)=>{(async e=>{const s=Q.getAddressService(),o=Q.getConfig().address_config.form_id;if(t&&t.id)try{const i=await s.updateAddress(Object.assign({},e,{id:t.id,form_id:o})),a=i.data?i.data:i;return Object.assign({is_saving_failed:!1},a)}catch(e){throw e}else try{const t=await i.ZP.getInstance().getAddressService().createAddress(Object.assign({},e,{type:(0,D.Fz)(e.type)||I._.OTHER,form_id:o})),s=t.data?t.data:t;return Object.assign({is_saving_failed:!1},s)}catch(e){throw e}})(e).then((async e=>{const t=Object.assign({is_saving_failed:!1},e);"function"==typeof T&&T(t,[],o),j(null)})).catch((async a=>{var r;const n=i.ZP.getInstance().getLocationXhrService(),d=n.isAppIdExist(a),c=(null==a||null===(r=a.response)||void 0===r?void 0:r.data)||a;if(d)j(c);else{var l,_,p,E;const i=n.isAxiosProvider()?null===(l=a.response)||void 0===l||null===(_=l.data)||void 0===_||null===(p=_.data)||void 0===p?void 0:p.message:null===(E=a.data)||void 0===E?void 0:E.message,r=null!=t&&t.id?t.type:I._.OTHER,d=Object.assign({},e,{is_saving_failed:!0,id:null==t?void 0:t.id,type:r});v(s[i]||s.INVALID_ADDRESS_ERROR),b(!0),T(d,[i],o)}}))},ie=e=>{const s=(0,c.A0)(e,y);V.trackSubmittedAddressOnCheckout(R,(e=>{const t=H.getLastStepType(),s=(0,c.Yu)(e)?"Saved":"New";return _()(["Map","Autocomplete","Search","LocateMe","Field","DynamicField"],t)?t:s})(t),s,d,(0,c.IL)(t)),H.setLastStepType(null)},ae=e=>{const s=(0,c.A0)(e,y);V.trackCheckoutAddressLoaded(R,s,d,(0,c.IL)(t))};return(0,n.useEffect)((()=>{i.ZP.getInstance().getEventLord().on("location:address-not-saved",(()=>{setAddressUnsavedError(!0)})),i.ZP.getInstance().getFormConfig().then((async e=>{w(e);const s=t?i.ZP.getInstance().getFormFormat(t):{},r=await(0,c.ts)(t);U(r);const n=(0,c.qH)(new L.C(s),x,e),d=G.fields.filter((e=>!e.mapping)),_=(0,c.DJ)(t,d,o),p=l?_:t,E=(0,c.Ob)(s,n);m&&H.setLastStepType("New"),a&&(0,S.J)(a)&&!l?(X(f||n),P(g||E),M(h||p),A(!!m)):(X(n),P(E),M(p||void 0),A(!!m)),ae(n),((e,t,s)=>{const o=(0,K._Z)(e);[z.ps.VARIATION1,z.ps.VARIATION2,z.ps.CONTROL].includes(o)&&s.trackABTestParticipated("address-form",o+"_"+t)})(o,e.id,V)})),V.trackMblLoading(t)}),[t,f,g]),0===k.length?null:(0,B.jsx)(q.H,{locationConfig:o,gtmLocationService:V,locationModel:$,children:(0,B.jsx)(E.$,{translation:Object.assign({},s),children:(0,B.jsxs)("div",{"data-testid":"address-form-refactored",children:[N&&(0,B.jsx)(ce.S,{disableValidation:!1,disableInitialMessage:!0,onClose:()=>{A(!1);const e=R&&R.id?Z.P.EDIT_ADDRESS:Z.P.NEW_ADDRESS;V.trackEditAddressCanceled(R,"Map",e)},googleMapScriptLoader:i.ZP.getInstance().getGoogleMapScriptLoader(),appConfig:o,elementId:"map-id-modal",model:null,selectedAddress:R||null,gtmLocationService:i.ZP.getInstance().getGTMLocationService(),expeditionType:"",focusOnRender:!0,showSavedAddress:!1,showSuggestions:!0,addressChangeTracker:H,inputRef:J,errorTranslator:e=>re(e,s),onSubmit:e=>{e&&(!e||e.latitude==e.latitude&&e.longitude==e.longitude)||U(void 0),W&&W.current&&e&&W.current.setCenter(e,!0);const s=i.ZP.getInstance().getFormFormat(e),o=(0,c.qH)(new L.C(s),x,G),a=Object.assign({},y);G.fields.forEach((e=>{e.mapping&&delete a[e.name]}));const r=(0,c.Ob)(Object.assign({},s,a),k,!0);X(o),M(e),A(!1),P(r),(0,c.K4)(o,r,e,t,V,H)},placeholder:ee,title:ee,modalTitle:s.location_map_title,mapPinTitle:s.map_tooltip,mapSubmitTitle:s.mbl_map_submit_btn,locationService:i.ZP.getInstance(),translations:s,vendor:p,handleOutOfBoundsAddress:u}),(0,B.jsx)(Y,{isWhereComponent:a,map:(0,B.jsx)(oe,{appConfig:o,isWhereComponent:a,mapRef:W,address:t,onEdit:te,translation:{edit:s.NEXTGEN_MBL_EDIT_MAP||"NEXTGEN_MBL_EDIT_MAP"},googleMapScriptLoader:i.ZP.getInstance().getGoogleMapScriptLoader(),GTMLocationService:i.ZP.getInstance().getGTMLocationService(),labeledMapPin:!0}),isValidationDisable:!1,fields:k,values:y,onSubmit:e=>{const s=R?i.ZP.getInstance().getFormFormat(R):{},a=G.fields.filter((e=>(0,c.pB)(e))).map((e=>e.name)),r=(0,c.Oe)(a,e,s,t,l);ie(k);const n=Object.assign({},s,e,{meta:JSON.stringify(r)}),d=t&&t.id?Z.P.EDIT_ADDRESS:Z.P.NEW_ADDRESS,_=new L.C(Object.assign({},n,{formatted_customer_address:(0,c.HF)(n,o)}));se(_,d)},gtmLocationService:V,captchaResponse:F,showError:O,setAddressUnsavedError,showLabel:!0,addressId:t.id,selectedAddress:R,errorMessage:C,appConfig:o,onEdit:te,mapRef:W,translations:s})]})})})}),"AddressFormComponentRefactor"),_e=e=>{let{address:t,appConfig:s,vendor:n,isNewAddress:l,addressBookModalOnEdit:_,isWhereComponent:p,savedAddresses:E=[],fields:u,formValues:h,editedAddress:g,translations:T,onSubmitAddress:m,onSubmitOverlay:f}=e;const N=!!a(r.bk.LOCATION_CODE_REFACTOR),S=l?Object.assign({},t,{addressId:void 0,id:void 0}):Object.assign({},t,{addressId:null==t?void 0:t.id}),L=l?Object.assign({},g,{addressId:void 0,id:void 0}):Object.assign({},g,{addressId:null==g?void 0:g.id}),A=(e,t,s)=>{t&&t.length>0?(0,c.up)(e,s,n):(i.ZP.getInstance().setFromFormat(e),m&&m(S,e),f(e))};return(0,B.jsx)(d.Provider,{value:E,children:(0,B.jsx)(o.x,{id:"address-book-modal","data-testid":"address-book-modal",children:(0,B.jsx)(o.x,{className:"checkout__step__item-content",children:N?(0,B.jsx)(le,{editedAddress:L,address:S,appConfig:s,isMapModalOpen:!1,tooltipPlacement:"",onSubmit:A,isNewAddress:l,vendor:n,addressBookModalOnEdit:_,isWhereComponent:p,fields:u,formValues:h,translations:T}):(0,B.jsx)(de,{editedAddress:L,address:S,appConfig:s,isMapModalOpen:!1,tooltipPlacement:"",onSubmit:A,isNewAddress:l,vendor:n,addressBookModalOnEdit:_,isWhereComponent:p,fields:u,formValues:h,translations:T})})})})}},"64d1811020626b629fb5":(e,t,s)=>{"use strict";s.d(t,{S:()=>K});var o=s("8f58e784196e6568c885"),i=s.n(o),a=s("775358d40899413d6f88"),r=s("7daf93421a8dd512ae86"),n=s("6c98f6eb5d8c8e24aa4d"),d=s.n(n),c=s("545a53d22bf405183074"),l=s("4d4238b3f32bba880178"),_=s("174811872339f1d02c40"),p=s.n(_),E=s("69084d01d3449fc1bc27"),u=s("bd11212dd200c13dd4e4"),h=s("12be0f0e9e2c7751d613"),g=s("e2ba54487d3e9f01ee4a"),T=s("6a875476d6c8921ae192"),m=s("f0113ad522d4984536bd"),f=s("5bac396c86413df162b8"),N=s("6fd2852d6f9220b4ea44"),S=s("e6d8e6e4db446a4649db"),L=s("65f09e17af9344d3a6eb"),A=s("76a065ad83922c2f0327"),O=s("f481ef00e50d282f38a9"),b=s("a7f44a4d9a149fde3658"),C=s("568ecdc81696e6199594");const I=e=>{const t=document.querySelector(".map-overlay");null!=t&&t.style&&(t.style.visibility=e)},v=(e,t)=>{let s=O.P.NA;return"map-id-modal"===e&&(s=t&&t.id?O.P.EDIT_ADDRESS:O.P.NEW_ADDRESS),s},R=e=>{let t;switch(e){case C.rd.disabled:t="disabled";break;case C.rd.loading:t="button-loading";break;case C.rd.centerChanged:default:t=""}return t};var M=s("612b336c0f913ea90457"),D=s.n(M),y=s("d1dac60098c8250f89ac"),P=s.n(y),G=s("a6da214b01c68e4df171"),B=s.n(G),w=s("35bc048dd3c823cf1a19"),x=s.n(w),U=s("9302435e81c621e827fb");const k=(e,t,s,o,i)=>{switch(e){case"Chrome":((e,t,s,o)=>{let i;i="desktop"===e?[s.location_modal_loc_settings_chrome_list,{firstLine:s.location_modal_loc_settings_chrome_des_list_1a,icon:(0,U.jsx)("span",{className:"icon-align-middle icon-margin",children:(0,U.jsx)(B(),{color:"neutral-secondary"})}),secondLine:s.location_modal_loc_settings_chrome_des_list_1b},s.location_modal_loc_settings_chrome_des_list_2]:"Android"===t?[s.location_modal_loc_settings_chrome_list,{firstLine:s.location_modal_loc_settings_chrome_adr_list_1a,icon:(0,U.jsx)("span",{className:"icon-align-bottom",children:(0,U.jsx)(x(),{color:"neutral-secondary"})}),secondLine:s.location_modal_loc_settings_chrome_adr_list_1b},s.location_modal_loc_settings_chrome_adr_list_2,s.location_modal_loc_settings_chrome_adr_list_3]:[s.location_modal_loc_settings_ios_list,s.location_modal_loc_settings_ios_list_1,s.location_modal_loc_settings_chrome_ios_list_2,s.location_modal_loc_settings_ios_list_3],o(i)})(t,s,o,i);break;case"Firefox":((e,t,s,o)=>{let i;i="desktop"===e?[s.location_modal_loc_settings_firefox_list,{firstLine:s.location_modal_loc_settings_firefox_des_list_1,icon:(0,U.jsx)("span",{className:"icon-align-bottom icon-margin",children:(0,U.jsx)(d(),{color:"neutral-secondary"})})},{firstLine:s.location_modal_loc_settings_firefox_des_list_2a,icon:(0,U.jsx)("span",{className:"icon-align-bottom",children:(0,U.jsx)(P(),{color:"neutral-secondary"})}),secondLine:s.location_modal_loc_settings_firefox_des_list_2b},s.location_modal_loc_settings_firefox_des_list_3,s.location_modal_loc_settings_firefox_des_list_4]:"Android"===t?[s.location_modal_loc_settings_firefox_list,{firstLine:s.location_modal_loc_settings_firefox_adr_list_1a,icon:(0,U.jsx)("span",{className:"icon-align-bottom",children:(0,U.jsx)(x(),{color:"neutral-secondary"})}),secondLine:s.location_modal_loc_settings_firefox_adr_list_1b},s.location_modal_loc_settings_firefox_adr_list_2,s.location_modal_loc_settings_firefox_adr_list_3]:[s.location_modal_loc_settings_ios_list,s.location_modal_loc_settings_ios_list_1,s.location_modal_loc_settings_firefox_ios_list_2,s.location_modal_loc_settings_ios_list_3],o(i)})(t,s,o,i);break;case"Safari":((e,t,s)=>{let o;o="desktop"===e?[t.location_modal_loc_settings_safari_des_list,{firstLine:t.location_modal_loc_settings_safari_des_list_1a,icon:(0,U.jsx)("span",{className:"icon-align-middle icon-margin",children:(0,U.jsx)(D(),{color:"neutral-secondary"})}),secondLine:t.location_modal_loc_settings_safari_des_list_1b},t.location_modal_loc_settings_safari_des_list_2,t.location_modal_loc_settings_safari_des_list_3a+" \n       "+window.location.host.slice(4),t.location_modal_loc_settings_safari_des_list_3b]:[t.location_modal_loc_settings_ios_list,t.location_modal_loc_settings_ios_list_1,t.location_modal_loc_settings_safari_ios_list_2,t.location_modal_loc_settings_ios_list_3],s(o)})(t,o,i)}};var X=s("38152ea6185d9cb37651"),F=s.n(X);const j=function(e){void 0===e&&(e=[]);const t=[{condition:["NO_GEOLOCATION"],state:N.X.NO_GEOLOCATION},{condition:["street","building"],state:N.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET},{condition:["postcode"],state:N.X.INCOMPLETE_ADDRESS_POSTCODE},{condition:["street"],state:N.X.INCOMPLETE_ADDRESS_STREET},{condition:["building"],state:N.X.INCOMPLETE_ADDRESS_BUILDING}];for(const{condition:s,state:o}of t)if(0===F()(s,e).length)return o;return N.X.INVALID_MAP_ADDRESS_NOT_FOUND},H=(e,t)=>{e||(t(!0),setTimeout((()=>{t(!1)}),1e3))};var V=s("f0dd78d59fe2c6214da6"),Y=s("4afdcdad839acbbd0fc7");const K=e=>{let{appConfig:t,disableInitialMessage:s,isWhereComponent:o,isEditMode:n,enableButton:_,selectedAddress:O,mapSubmitTitle:M,gtmLocationService:D,elementId:y,mapOptions:P,googleMapScriptLoader:G,mapPinTitle:B,hiddenError:w,disableValidation:x,inputRef:X,addressChangeTracker:F,errorTranslator:K,modalTitle:Z,translations:z,vendor:W,onSubmitAddress:q,onSubmit:J,onClose:Q,title:$,locationService:ee,placeholder:te,handleOutOfBoundsAddress:se,hideAddressList:oe,onMapClose:ie,clearEditMode:ae,hasLocationPermissionError:re,focusOnRender:ne,showSuggestions:de,model:ce,savedAddresses:le,expeditionType:_e,showSavedAddress:pe}=e;const Ee="yes"===i()(t,"features.flags.always-map","N/A"),ue=Ee||s||((e,t,s)=>{if(e&&(0,b.J)(e))return t||s})(o,n,_),he=ue?C.rd.null:C.rd.disabled,[ge,Te]=(0,E.useState)(((e,t)=>{if(!e||e&&!e.latitude&&!e.longitude){const e=t.address_config.default_location;return new u.C(e)}return e})(O,t)),[me,fe]=(0,E.useState)(!0),[Ne,Se]=(0,E.useState)(null),[Le,Ae]=(0,E.useState)(he),[Oe,be]=(0,E.useState)(!1),[Ce,Ie]=(0,E.useState)(!1),[ve,Re]=(0,E.useState)(!1),[Me,De]=(0,E.useState)(!0),[ye,Pe]=(0,E.useState)(!1),[Ge,Be]=(0,E.useState)(!1),[we,xe]=(0,E.useState)(!1),[Ue,ke]=(0,E.useState)([]),[Xe,Fe]=(0,E.useState)([]),[je,He]=(0,E.useState)({}),Ve=(0,E.createRef)(),Ye=(0,E.createRef)(),Ke=me&&Ee,[Ze,ze]=(0,E.useState)(!1),hiddenError=e=>{Ne&&(Se(null),null==w||w(e))},displayError=e=>{const{userBrowserType:t,deviceType:s,userDeviceOs:o}=(0,l.Z)(),i=K(e);i===z.error_no_geolocation&&(k(t,s,o,z,ke),ze(!0)),i&&H(Ce,Ie),fe(!1),Ae(C.rd.disabled),Se(i)},We=e=>{h.ZP.getInstance().getFormConfig().then((async t=>{let s=await(0,g.ts)(ge||O);O&&(!O||e.latitude===O.latitude&&e.longitude===O.longitude)||(s=void 0),Ve&&Ve.current&&e&&Ve.current.setCenter(e);const{formValues:o,fields:i}=((e,t,s)=>{const o=h.ZP.getInstance().getFormFormat(s),i=(0,g.qH)(new u.C(o),e,t),a=h.ZP.getInstance().getFormFormat(O),r=(0,g.qH)(new u.C(a),e,t),n=(0,g.Ob)(a,r,!0),d=Object.assign({},n);return t.fields.forEach((e=>{e.mapping&&delete d[e.name]})),{formValues:(0,g.Ob)(Object.assign({},o,d),i,!0),fields:i}})(s,t,e);Fe(i),He(o),Te(e),e&&(0,g.K4)(i,o,e,O,D,F)}))};return(0,E.useEffect)((()=>(I("visible"),D.trackMapDisplay(F.getLastStepType(),ge,v(y,ge)),F.setLastStepType(null),s||setTimeout((()=>{((e,t,s,o,i)=>{const a=(0,A.Z)(e,t);(null==a?void 0:a.length)>0&&!s&&i(o(j(a)))})(t,ge,Ee,K,Se)}),200),oe&&o&&oe(),()=>{I("hidden"),null==ae||ae()})),[]),(0,U.jsx)(S.d,{boundaryId:"overlay-component-id",children:(0,U.jsxs)(c.ZP,{className:"overlay-modal",isOpen:!0,onClose:Q,"data-testid":"overlay-refactored",children:[(0,U.jsxs)(c.l6,{children:[(0,U.jsxs)(c.hz,{children:[(0,U.jsx)(c.ol,{variant:"basic","data-testid":"close-presentation",ariaLabel:"Close"}),!ve&&(0,U.jsx)(c.xB,{title:Z,subtitle:z.NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE,"data-testid":"modal-title",titleIcon:(0,U.jsx)(d(),{fill:"brand-secondary"})}),(0,U.jsxs)(c.fe,{children:[!ve&&(0,U.jsxs)("div",{"data-testid":"map-overlay",children:[(0,U.jsxs)("div",{className:"address-search-container","data-testid":"address-search-container-modal",children:[(0,U.jsx)(m.O,{fillInputSearch:!0,hasLocationPermissionError:re,inputRef:X,model:ce,appConfig:t,gtmLocationService:D,expeditionType:_e,focusOnRender:ne,showSavedAddress:pe,showSuggestions:de,selectedAddress:ge,addressChangeTracker:F,onChange:e=>{Ve.current&&(Ve.current.setCenter(e),fe(!1)),Te(new u.C(e)),De(!0)},displayError,hiddenError,placeholder:window.innerWidth<768?te:" ",title:$,inputSize:f.vz.SMALL,locationService:ee,vendor:W,formType:v(y,ge),disableAutoValidation:x,translations:z,isMapOpen:!0,noAddressOpenMap:!1,isManuallyTypedAddress:Me,onMapClose:ie,clearInputRef:e=>Be(e),clearAddress:Ge}),we&&(0,U.jsx)(L.D,{open:we,onClose:()=>xe(!1),translations:z,selectedTranslations:Ue})]}),(0,U.jsxs)("div",{className:"map-modal__map map-box",children:[!Ke&&Ne&&(0,U.jsx)("div",{className:p()("message-box"),children:Ze?(0,U.jsx)(r.$,{variant:"information",text:Ne,showIcon:!0,actionLabel:z.location_error_cta_no_geolocation,onActionClick:()=>xe(!0),"data-testid":"has-error-msg"}):(0,U.jsx)(r.$,{variant:"information",text:Ne,showIcon:!0,"data-testid":"has-error-msg"})}),(0,U.jsx)(V.L,{ref:Ve,googleMapScriptLoader:G,appConfig:t,elementId:y,mapOptions:P,address:ge,handleMapState:e=>Ae(e),handleAddressChange:function(e,s,o){if(void 0===s&&(s=[]),D.initializeLocationAttemptedTracking(F.getLastStepType()),(e=>{"Map"!==e||Oe||(D.trackLocationAttempted(ge,void 0,v(y,ge)),be(!0))})(o),e)if(Ee)s=h.ZP.getInstance().getCoordinatesError(e);else{const o=(0,A.Z)(t,e);s=s.concat(o)}let i="";if(!x&&s&&s.length>0){const t=j(s);i=K(t),((e,t,s,o)=>{switch(e){case N.X.NO_GEOLOCATION:o.trackLocationError("NO_GEOLOCATION",t,s);break;case N.X.INCOMPLETE_ADDRESS_POSTCODE:o.trackLocationError("INCOMPLETE_ADDRESS.POSTAL_CODE",t,s);break;case N.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:case N.X.INCOMPLETE_ADDRESS_STREET:o.trackLocationError("INCOMPLETE_ADDRESS.STREET_NAME",t,s);break;case N.X.INCOMPLETE_ADDRESS_BUILDING:o.trackLocationError("INCOMPLETE_ADDRESS.BUILDING",t,s);break;default:o.trackLocationError("INVALID_ADDRESS",t,s)}})(t,o,e,D)}((e,t,s)=>{const o=!x&&((e,t,s)=>t?!s&&e.length>0:e.length>0)(t,me,Ee)?e:null,i=new u.C(s);Ae(!x&&t.length>0?C.rd.disabled:C.rd.null),Se(o),null!==s&&Te(i),o||hiddenError(X),Ye.current&&(Ye.current.value=i.formatted_customer_address||"")})(i,s,e)},onDraggingChange:e=>{X&&X.current&&X.current.blur(),Pe(e),De(!1),e&&fe(!1),hiddenError(X)},mapPinTitle:Ke?B:null,addressChangeTracker:F})]})]}),ve&&o&&(0,U.jsx)(Y.E,{onSubmitAddress:q,onSubmitOverlay:J,address:ge&&!n?ge:O,editedAddress:ge||O,onClose:Q,appConfig:t,addressBookModalOnEdit:e=>{e.preventDefault(),Re(!1)},isWhereComponent:o,vendor:W,savedAddresses:le,isNewAddress:!n,fields:Xe,formValues:je,translations:z})]})]}),!ve&&(0,U.jsx)(c.mz,{children:(0,U.jsx)("div",{role:"presentation",className:"actions-container",onClick:()=>{fe(!1),Le===C.rd.disabled&&H(Ce,Ie)},children:(0,U.jsx)(a.Button,{className:p()("button map-submit-button",R(Le)),id:"submit-location","data-testid":"map-modal-submit",onClick:e=>{e.preventDefault(),X.current&&!X.current.value?displayError(N.X.EMPTY_INPUT):ge&&W?((e,s)=>{(0,T.J)(e,t,ee,s).then((t=>{if(t)J(e);else{displayError(N.X.ADDRESS_NOT_DELIVERABLE);const t=e.id?"EditAddress":"NewAddress";ee.getGTMLocationService().trackLocationError("NOT_DELIVERABLE","Map",e,t,s),null==se||se(e)}}))})(ge,W):ge&&((e=>!!e&&(0,b.J)(e))(o)?(n&&We(ge),Re(!0)):J(ge))},disabled:Le===C.rd.disabled||!!Ne||ye,children:M})})})]}),(0,U.jsx)(c._n,{})]})})}},b0345e1c58c9fd727545:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Overlay:()=>V,TABLET_BREAKPOINT:()=>j,default:()=>Y});var o=s("8f58e784196e6568c885"),i=s.n(o),a=s("38152ea6185d9cb37651"),r=s.n(a),n=s("7daf93421a8dd512ae86"),d=s("612b336c0f913ea90457"),c=s.n(d),l=s("d1dac60098c8250f89ac"),_=s.n(l),p=s("6c98f6eb5d8c8e24aa4d"),E=s.n(p),u=s("a6da214b01c68e4df171"),h=s.n(u),g=s("35bc048dd3c823cf1a19"),T=s.n(g),m=s("545a53d22bf405183074"),f=s("972a2a99f755405c8851"),N=s("4d4238b3f32bba880178"),S=s("e57816ce2d5f3e48376c"),L=s("174811872339f1d02c40"),A=s.n(L),O=s("69084d01d3449fc1bc27"),b=s("bd11212dd200c13dd4e4");var C=s("12be0f0e9e2c7751d613"),I=s("f481ef00e50d282f38a9"),v=s("e2ba54487d3e9f01ee4a"),R=s("6a875476d6c8921ae192"),M=s("c006a31a1a2ace68e61f"),D=s("5bac396c86413df162b8"),y=s("6fd2852d6f9220b4ea44"),P=s("e6d8e6e4db446a4649db"),G=s("6602d2ed10acb4d71eb7"),B=s("65f09e17af9344d3a6eb"),w=s("76a065ad83922c2f0327"),x=s("a7f44a4d9a149fde3658"),U=s("46fe19f68ac3ac73285c"),k=s("4afdcdad839acbbd0fc7"),X=s("568ecdc81696e6199594"),F=s("9302435e81c621e827fb");const j=768,H=()=>window.innerWidth<j;class V extends O.Component{constructor(e){super(e),this.mapRef=void 0,this.inputRef=void 0,this.firstMessageImpression=!0,this.locationPermissionGranted=!0,this.alwaysShowMapFlag=void 0,this.isMapUpdated=void 0,this.initalMetaData=void 0,this.formConfig=void 0,this.isInputDirty=!1,this.isSubmitButtonEnabledAddressBookModal=()=>{if(this.props.isWhereComponent&&(0,x.J)(this.props.isWhereComponent))return this.props.isEditMode||this.props.enableButton},this.onSubmitAddressBookModal=e=>{C.ZP.getInstance().getFormConfig().then((async t=>{this.formConfig=t,this.initalMetaData=await(0,v.ts)(this.state.selectedAddress?this.state.selectedAddress:this.props.selectedAddress),this.props.selectedAddress&&(!this.props.selectedAddress||e.latitude===this.props.selectedAddress.latitude&&e.longitude===this.props.selectedAddress.longitude)||(this.initalMetaData=void 0),this.mapRef&&this.mapRef.current&&e&&this.mapRef.current.setCenter(e);const s=C.ZP.getInstance().getFormFormat(e),o=(0,v.qH)(new b.C(s),this.initalMetaData,this.formConfig),i=C.ZP.getInstance().getFormFormat(this.props.selectedAddress),a=(0,v.qH)(new b.C(i),this.initalMetaData,this.formConfig),r=(0,v.Ob)(i,a,!0),n=Object.assign({},r);this.formConfig.fields.forEach((e=>{e.mapping&&delete n[e.name]}));const d=(0,v.Ob)(Object.assign({},s,n),o,!0);this.setState({fields:o,formValues:d,selectedAddress:e},(()=>{this.state.selectedAddress&&(0,v.K4)(o,this.state.formValues,this.state.selectedAddress,this.props.selectedAddress,this.props.gtmLocationService,this.props.addressChangeTracker)}))}))},this.getRequiredFieldsWithMapping=()=>{const{multiline_formatted_address:e,fields:t}=this.props.appConfig.address_config,s=e.join(" ").replace(/[\{\}:,']+/g,"").split(" ");for(let e=0;e<s.length;e++)for(let o=0;t&&o<t.length;o++)s[e]===t[o].name&&(s[e]=t[o].df_name);return s.join(", ").replace(/_/g," ")},this.setAddressSubmitLoadingState=e=>{this.props.locationService.getEventLord().emit("full-address-input-search-view:set-loading-state",e)},this.handleMapViewScreenDragStart=()=>{this.setButtonState(X.rd.loading),this.onDraggingChange(!0)},this.handleMapViewDragEnd=(e,t)=>{const s=t.map.getCenter();this.handleMapViewCenterChange(s),this.props.addressChangeTracker&&this.props.addressChangeTracker.setLastStepType("Map"),this.onDraggingChange(!1)},this.handleMapViewCenterChange=async e=>{try{const t=await async function(e,t){let{latitude:s,longitude:o}=t;return await e.getGeocoderV2Service().getReverse({lat:s,lng:o})}(this.props.locationService,{latitude:e.lat,longitude:e.lng}),s=Object.assign({},t,{latitude:e.lat,longitude:e.lng}),o=(0,w.Z)(this.props.appConfig,s);this.handleAddressChange(s,o,"Map")}catch(e){this.handleAddressChange(null,["NO_GEOLOCATION"],"Map")}},this.mapRef=O.createRef(),this.inputRef=O.createRef(),this.isMapUpdated=!1,this.alwaysShowMapFlag="yes"===i()(e.appConfig,"features.flags.always-map","N/A");const t=this.setAddressModel(e.selectedAddress);this.formConfig={fields:[]},this.state={buttonState:this.alwaysShowMapFlag||e.disableInitialMessage||this.isSubmitButtonEnabledAddressBookModal()?X.rd.null:X.rd.disabled,selectedAddress:t,isDragging:!1,shaking:!1,errorMsg:null,showSubmitButton:!0,isManuallyTypedAddress:!0,isOpen:!1,selectedTranslations:[],enableLocationAccess:!1,showNewAddressForm:!1,fields:[],formValues:{},clearAddress:!1},this.setButtonState=this.setButtonState.bind(this),this.handleAddressChange=this.handleAddressChange.bind(this),this.submitLocation=this.submitLocation.bind(this),this.onChange=this.onChange.bind(this),this.onDraggingChange=this.onDraggingChange.bind(this),this.touchSubmitLocation=this.touchSubmitLocation.bind(this),this.displayError=this.displayError.bind(this),this.hiddenError=this.hiddenError.bind(this),this.listenLocationPermissions(),this.getSelectedAddress=this.getSelectedAddress.bind(this),this.handleInputFocus=this.handleInputFocus.bind(this),this.showNewaddressbookModal=this.showNewaddressbookModal.bind(this),this.addressBookModalOnEdit=this.addressBookModalOnEdit.bind(this),this.handleViewOverlay=this.handleViewOverlay.bind(this)}componentDidMount(){this.handleViewOverlay("visible"),this.props.gtmLocationService.trackMapDisplay(this.props.addressChangeTracker.getLastStepType(),this.state.selectedAddress,this.getFormType()),this.props.addressChangeTracker.setLastStepType(null),this.props.disableInitialMessage||setTimeout(this.localValidation.bind(this),200),this.props.hideAddressList&&this.props.isWhereComponent&&this.props.hideAddressList()}componentWillUnmount(){this.handleViewOverlay("hidden"),this.props.clearEditMode&&this.props.clearEditMode()}handleViewOverlay(e){const t=document.querySelector(".map-overlay");null!=t&&t.style&&(t.style.visibility=e)}setAddressModel(e){if(!e||e&&!e.latitude&&!e.longitude){const e=this.props.appConfig.address_config.default_location;return new b.C(e)}return e}getFormType(){let e=I.P.NA;return"map-id-modal"===this.props.elementId&&(e=this.state.selectedAddress&&this.state.selectedAddress.id?I.P.EDIT_ADDRESS:I.P.NEW_ADDRESS),e}listenLocationPermissions(){(0,S.v)().on("geolocation:permission-denied",(()=>{this.firstMessageImpression=!1,this.locationPermissionGranted=!1}))}localValidation(){const e="yes"===i()(this.props.appConfig,"features.flags.always-map","N/A"),t=(0,w.Z)(this.props.appConfig,this.state.selectedAddress);if((null==t?void 0:t.length)>0&&!e&&this.locationPermissionGranted){const e=this.getErrorStateByErrorTexts(t),s=this.props.errorTranslator(e);this.setState({errorMsg:s})}}setButtonState(e){this.setState({buttonState:e})}getButtonClass(){let e;switch(this.state.buttonState){case X.rd.disabled:e="disabled";break;case X.rd.loading:e="button-loading";break;case X.rd.centerChanged:default:e=""}return e}getErrorStateByErrorTexts(e){return void 0===e&&(e=[]),0===r()(["NO_GEOLOCATION"],e).length?y.X.NO_GEOLOCATION:0===r()(["street","building"],e).length?y.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:0===r()(["postcode"],e).length?y.X.INCOMPLETE_ADDRESS_POSTCODE:0===r()(e,["street"]).length?y.X.INCOMPLETE_ADDRESS_STREET:0===r()(["building"],e).length?y.X.INCOMPLETE_ADDRESS_BUILDING:y.X.INVALID_MAP_ADDRESS_NOT_FOUND}showNewaddressbookModal(){return!!this.props.isWhereComponent&&(0,x.J)(this.props.isWhereComponent)}trackError(e,t,s){switch(e){case y.X.NO_GEOLOCATION:this.props.gtmLocationService.trackLocationError("NO_GEOLOCATION",t,s);break;case y.X.INCOMPLETE_ADDRESS_POSTCODE:this.props.gtmLocationService.trackLocationError("INCOMPLETE_ADDRESS.POSTAL_CODE",t,s);break;case y.X.INCOMPLETE_ADDRESS_BUILDING_AND_STREET:case y.X.INCOMPLETE_ADDRESS_STREET:this.props.gtmLocationService.trackLocationError("INCOMPLETE_ADDRESS.STREET_NAME",t,s);break;case y.X.INCOMPLETE_ADDRESS_BUILDING:this.props.gtmLocationService.trackLocationError("INCOMPLETE_ADDRESS.BUILDING",t,s);break;default:this.props.gtmLocationService.trackLocationError("INVALID_ADDRESS",t,s)}}handleAddressChange(e,t,s){if(void 0===t&&(t=[]),this.props.gtmLocationService.initializeLocationAttemptedTracking(this.props.addressChangeTracker.getLastStepType()),this.trackMapUpdated(s),e)if(this.alwaysShowMapFlag)t=C.ZP.getInstance().getCoordinatesError(e);else{const s=(0,w.Z)(this.props.appConfig,e);t=t.concat(s)}let o="";if(!this.props.disableValidation&&t&&t.length>0){const i=this.getErrorStateByErrorTexts(t);o=this.props.errorTranslator(i),this.trackError(i,s,e)}const i=!this.props.disableValidation&&this.showErrorMsg(t)?o:null,a=new b.C(e);this.setState((s=>{const o={buttonState:!this.props.disableValidation&&t.length>0?X.rd.disabled:X.rd.null,errorMsg:i};return null!==e&&(o.selectedAddress=a),Object.assign({},s,o)})),this.isInputDirty=!1,i||this.hiddenError(this.props.inputRef),this.inputRef.current&&(this.inputRef.current.value=a.formatted_customer_address||"")}trackMapUpdated(e){"Map"!==e||this.isMapUpdated||(this.props.gtmLocationService.trackLocationAttempted(this.state.selectedAddress,void 0,this.getFormType()),this.isMapUpdated=!0)}showErrorMsg(e){const t="yes"===i()(this.props.appConfig,"features.flags.always-map","N/A");return this.firstMessageImpression?!t&&e.length>0:e.length>0}checkDeliverability(e,t){const{appConfig:s,locationService:o,onSubmit:i}=this.props;(0,R.J)(e,s,o,t).then((s=>{if(s)i(e);else{this.displayError(y.X.ADDRESS_NOT_DELIVERABLE);const s=e.id?"EditAddress":"NewAddress";o.getGTMLocationService().trackLocationError("NOT_DELIVERABLE","Map",e,s,t),this.props.handleOutOfBoundsAddress&&this.props.handleOutOfBoundsAddress(e)}}))}submitLocation(e){e.preventDefault();const{selectedAddress:t}=this.state,{inputRef:s,onSubmit:o,vendor:i}=this.props;s.current&&!s.current.value?this.displayError(y.X.EMPTY_INPUT):t&&i?this.checkDeliverability(t,i):t&&(this.showNewaddressbookModal()?(this.props.isEditMode&&this.onSubmitAddressBookModal(t),this.setState({showNewAddressForm:!0})):o(t))}addressBookModalOnEdit(e){e.preventDefault(),this.setState({showNewAddressForm:!1})}touchSubmitLocation(){this.firstMessageImpression=!1,this.state.buttonState===X.rd.disabled&&this.triggerShaking()}triggerShaking(){this.state.shaking||this.setState({shaking:!0},(()=>{setTimeout((()=>{this.setState({shaking:!1})}),1e3)}))}onDraggingChange(e){this.props.inputRef&&this.props.inputRef.current&&this.props.inputRef.current.blur(),this.setState({isDragging:e,showSubmitButton:!0,isManuallyTypedAddress:!1}),e&&(this.firstMessageImpression=!1),this.hiddenError(this.props.inputRef)}onChange(e){this.setState({selectedAddress:new b.C(e),isManuallyTypedAddress:!0}),this.isInputDirty=!1,this.mapRef.current&&(this.mapRef.current.setCenter(e),this.firstMessageImpression=!1)}handleSelectChromeTranslations(e,t){let s;s="desktop"===e?[this.props.translations.location_modal_loc_settings_chrome_list,{firstLine:this.props.translations.location_modal_loc_settings_chrome_des_list_1a,icon:(0,F.jsx)("span",{className:"icon-align-middle icon-margin",children:(0,F.jsx)(h(),{color:"neutral-secondary"})}),secondLine:this.props.translations.location_modal_loc_settings_chrome_des_list_1b},this.props.translations.location_modal_loc_settings_chrome_des_list_2]:"Android"===t?[this.props.translations.location_modal_loc_settings_chrome_list,{firstLine:this.props.translations.location_modal_loc_settings_chrome_adr_list_1a,icon:(0,F.jsx)("span",{className:"icon-align-bottom",children:(0,F.jsx)(T(),{color:"neutral-secondary"})}),secondLine:this.props.translations.location_modal_loc_settings_chrome_adr_list_1b},this.props.translations.location_modal_loc_settings_chrome_adr_list_2,this.props.translations.location_modal_loc_settings_chrome_adr_list_3]:[this.props.translations.location_modal_loc_settings_ios_list,this.props.translations.location_modal_loc_settings_ios_list_1,this.props.translations.location_modal_loc_settings_chrome_ios_list_2,this.props.translations.location_modal_loc_settings_ios_list_3],this.setState({selectedTranslations:s})}handleSelectFirefoxTranslations(e,t){let s;s="desktop"===e?[this.props.translations.location_modal_loc_settings_firefox_list,{firstLine:this.props.translations.location_modal_loc_settings_firefox_des_list_1,icon:(0,F.jsx)("span",{className:"icon-align-bottom icon-margin",children:(0,F.jsx)(E(),{color:"neutral-secondary"})})},{firstLine:this.props.translations.location_modal_loc_settings_firefox_des_list_2a,icon:(0,F.jsx)("span",{className:"icon-align-bottom",children:(0,F.jsx)(_(),{color:"neutral-secondary"})}),secondLine:this.props.translations.location_modal_loc_settings_firefox_des_list_2b},this.props.translations.location_modal_loc_settings_firefox_des_list_3,this.props.translations.location_modal_loc_settings_firefox_des_list_4]:"Android"===t?[this.props.translations.location_modal_loc_settings_firefox_list,{firstLine:this.props.translations.location_modal_loc_settings_firefox_adr_list_1a,icon:(0,F.jsx)("span",{className:"icon-align-bottom",children:(0,F.jsx)(T(),{color:"neutral-secondary"})}),secondLine:this.props.translations.location_modal_loc_settings_firefox_adr_list_1b},this.props.translations.location_modal_loc_settings_firefox_adr_list_2,this.props.translations.location_modal_loc_settings_firefox_adr_list_3]:[this.props.translations.location_modal_loc_settings_ios_list,this.props.translations.location_modal_loc_settings_ios_list_1,this.props.translations.location_modal_loc_settings_firefox_ios_list_2,this.props.translations.location_modal_loc_settings_ios_list_3],this.setState({selectedTranslations:s})}handleSelectSafariTranslations(e){let t;t="desktop"===e?[this.props.translations.location_modal_loc_settings_safari_des_list,{firstLine:this.props.translations.location_modal_loc_settings_safari_des_list_1a,icon:(0,F.jsx)("span",{className:"icon-align-middle icon-margin",children:(0,F.jsx)(c(),{color:"neutral-secondary"})}),secondLine:this.props.translations.location_modal_loc_settings_safari_des_list_1b},this.props.translations.location_modal_loc_settings_safari_des_list_2,this.props.translations.location_modal_loc_settings_safari_des_list_3a+" \n               "+window.location.host.slice(4),this.props.translations.location_modal_loc_settings_safari_des_list_3b]:[this.props.translations.location_modal_loc_settings_ios_list,this.props.translations.location_modal_loc_settings_ios_list_1,this.props.translations.location_modal_loc_settings_safari_ios_list_2,this.props.translations.location_modal_loc_settings_ios_list_3],this.setState({selectedTranslations:t})}displayError(e){const{userBrowserType:t,deviceType:s,userDeviceOs:o}=(0,N.Z)(),{translations:i,errorTranslator:a}=this.props,r=a(e);r===i.error_no_geolocation&&("Chrome"===t?this.handleSelectChromeTranslations(s,o):"Firefox"===t?this.handleSelectFirefoxTranslations(s,o):"Safari"===t&&this.handleSelectSafariTranslations(s),this.setState({enableLocationAccess:!0})),this.state.errorMsg&&this.triggerShaking(),this.firstMessageImpression=!1,this.setState({buttonState:X.rd.disabled,errorMsg:r})}hiddenError(e){this.state.errorMsg&&(this.setState({errorMsg:null}),this.props.hiddenError&&this.props.hiddenError(e))}getSelectedAddress(){return this.state.selectedAddress}handleInputFocus(e){H()&&this.setState({showSubmitButton:!e})}handleOpenModal(e){this.setState({isOpen:e})}clearInputRef(e){this.setState({clearAddress:e})}render(){const e=this.firstMessageImpression&&this.alwaysShowMapFlag;return(0,F.jsx)(P.d,{boundaryId:"overlay-component-id",children:(0,F.jsxs)(m.ZP,{className:"overlay-modal",isOpen:!0,onClose:this.props.onClose,children:[(0,F.jsxs)(m.l6,{children:[(0,F.jsxs)(m.hz,{children:[(0,F.jsx)(m.ol,{variant:"basic","data-testid":"close-presentation",ariaLabel:"Close"}),!this.state.showNewAddressForm&&(0,F.jsx)(m.xB,{title:this.props.modalTitle,subtitle:this.props.translations.NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE,"data-testid":"modal-title",titleIcon:(0,F.jsx)(E(),{fill:"neutral-primary"})}),(0,F.jsxs)(m.fe,{children:[!this.state.showNewAddressForm&&(0,F.jsxs)("div",{"data-testid":"map-overlay",children:[(0,F.jsxs)("div",{className:"address-search-container","data-testid":"address-search-container-modal",children:[(0,F.jsx)(M.z,{fillInputSearch:!0,hasLocationPermissionError:this.props.hasLocationPermissionError,inputRef:this.props.inputRef,model:this.props.model,appConfig:this.props.appConfig,gtmLocationService:this.props.gtmLocationService,expeditionType:this.props.expeditionType,focusOnRender:this.props.focusOnRender,showSavedAddress:this.props.showSavedAddress,showSuggestions:this.props.showSuggestions,selectedAddress:this.getSelectedAddress(),addressChangeTracker:this.props.addressChangeTracker,onChange:this.onChange,displayError:this.displayError,hiddenError:this.hiddenError,placeholder:H()?this.props.placeholder:" ",title:this.props.title,inputSize:D.vz.SMALL,locationService:this.props.locationService,vendor:this.props.vendor,formType:this.getFormType(),disableAutoValidation:this.props.disableValidation,focusOnInput:this.handleInputFocus,translations:this.props.translations,isMapOpen:!0,noAddressOpenMap:!1,isManuallyTypedAddress:this.state.isManuallyTypedAddress,onMapClose:this.props.onMapClose,clearInputRef:e=>this.clearInputRef(e),clearAddress:this.state.clearAddress}),this.state.isOpen&&(0,F.jsx)(B.D,{open:this.state.isOpen,onClose:()=>this.handleOpenModal(!1),translations:this.props.translations,selectedTranslations:this.state.selectedTranslations})]}),(0,F.jsxs)("div",{className:"map-modal__map map-box",children:[!e&&this.state.errorMsg&&(0,F.jsx)("div",{className:A()("message-box"),children:this.state.enableLocationAccess?(0,F.jsx)(n.$,{variant:"information",text:this.state.errorMsg,showIcon:!0,actionLabel:this.props.translations.location_error_cta_no_geolocation,onActionClick:()=>this.handleOpenModal(!0),"data-testid":"has-error-msg"}):(0,F.jsx)(n.$,{variant:"information",text:this.state.errorMsg,showIcon:!0,"data-testid":"has-error-msg"})}),(0,F.jsx)(U.x,{ref:this.mapRef,googleMapScriptLoader:this.props.googleMapScriptLoader,appConfig:this.props.appConfig,elementId:this.props.elementId,mapOptions:this.props.mapOptions,address:this.state.selectedAddress,handleMapState:this.setButtonState,handleAddressChange:this.handleAddressChange,onDraggingChange:this.onDraggingChange,mapPinTitle:e?this.props.mapPinTitle:null,addressChangeTracker:this.props.addressChangeTracker})]})]}),this.state.showNewAddressForm&&this.props.isWhereComponent&&(0,F.jsx)(k.E,{onSubmitAddress:this.props.onSubmitAddress,onSubmitOverlay:this.props.onSubmit,address:this.state.selectedAddress&&!this.props.isEditMode?this.state.selectedAddress:this.props.selectedAddress,editedAddress:this.state.selectedAddress?this.state.selectedAddress:this.props.selectedAddress,onClose:this.props.onClose,appConfig:this.props.appConfig,addressBookModalOnEdit:this.addressBookModalOnEdit,isWhereComponent:this.props.isWhereComponent,vendor:this.props.vendor,savedAddresses:this.props.savedAddresses,isNewAddress:!this.props.isEditMode,fields:this.state.fields,formValues:this.state.formValues,translations:this.props.translations})]})]}),!this.state.showNewAddressForm&&(0,F.jsx)(m.mz,{children:(0,F.jsx)("div",{role:"presentation",className:"actions-container",onClick:this.touchSubmitLocation,children:(0,F.jsx)(f.z,{className:A()("button map-submit-button",this.getButtonClass()),id:"submit-location","data-testid":"map-modal-submit",onClick:this.submitLocation,disabled:this.state.buttonState===X.rd.disabled||!!this.state.errorMsg||this.state.isDragging,children:this.props.mapSubmitTitle})})})]}),(0,F.jsx)(m._n,{})]})})}}V.contextType=G.K;const Y=V},"568ecdc81696e6199594":(e,t,s)=>{"use strict";s.d(t,{rd:()=>o,rk:()=>i,yf:()=>a});let o=function(e){return e.disabled="disabled",e.loading="loading",e.centerChanged="",e.null="",e}({}),i=function(e){return e.ZOOM_IN="zoom_in",e.ZOOM_OUT="zoom_out",e}({}),a=function(e){return e.default="default",e.modalMap="modalMap",e}({})},"54594dde5dc2714a1b38":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var o=s("5622240cf8b218ddf7cf"),i=s.n(o),a=s("a51137ae9c0fed902067"),r=s.n(a),n=s("9302435e81c621e827fb");const d=e=>{let{onZoomInClick:t,onZoomOutClick:s}=e;return(0,n.jsxs)("div",{className:"zoom-control",children:[(0,n.jsx)("div",{"data-testid":"map-zoom-in-button",className:"zoom-button",onClick:t,children:(0,n.jsx)(r(),{fill:"interaction-secondary",width:24,height:24})}),(0,n.jsx)("div",{className:"divider"}),(0,n.jsx)("div",{"data-testid":"map-zoom-out-button",className:"zoom-button",onClick:s,children:(0,n.jsx)(i(),{fill:"interaction-secondary",width:24,height:24})})]})}},"549640134fdb6d7e36d7":(e,t,s)=>{"use strict";s.d(t,{B:()=>o});let o=function(e){return e.CLICKED="Clicked",e.ATTEMPTED="Attempted",e.SUBMITTED="Submitted",e.ERRORED="Errored",e.NA="NA",e}({})},bdc216a4d248b845f00c:(e,t,s)=>{"use strict";s.d(t,{NX:()=>a,Qy:()=>getCoordinatesError,Sh:()=>r,t9:()=>i});const o=["city","postcode","address_line1","building"],i=(e,t)=>{const{map_validations:s,required_fields:i}=t.address_config,{optional_fields:a=[],required_fields:r=[]}=Object.assign({},s),n=[...a||[],...r];let d=n.length>0?[...n]:i||o;"SG"!==e.country_code||"Sentosa, Singapore"!==e.formatted_customer_address||e.postcode||(d=d.filter((e=>"postcode"!==e)));const c=null==a?void 0:a.find((t=>void 0!==e[t]));c&&(d=d.filter((e=>e===c||r.includes(e))));const l="number"!=typeof e.latitude||"number"!=typeof e.longitude?["location"]:[];return d.reduce(((t,s)=>e[s]?t:[...t,s]),l)},getCoordinatesError=e=>"number"!=typeof e.latitude||"number"!=typeof e.longitude?["location"]:[],a=function(e,t,s){return void 0===s&&(s="n/a"),"yes"===s?0===getCoordinatesError(e).length:0===i(e,t).length},r=(e,t,s)=>{const o=t=>Boolean(e&&e.latitude===t.latitude&&e.longitude===t.longitude&&(!t.company||e.company===t.company)&&(!t[s.flat_number]||e.flat_number===t[s.flat_number]));return t.filter?t.filter((e=>o(e.attributes))).length>0:o(t)}},"207ea314cce7e9d4498b":(e,t,s)=>{"use strict";s.d(t,{z:()=>o});const o={LOCAL_STORAGE_KEY:"location-model-1",LOCAL_STORAGE_KEY_V2:"location-model-v2",PERSUES_CLIENT_ID:"dhhPerseusGuestId",DH_PROVIDER_TRACKED_STATUS:"dhProviderTracked",GEOLOCATOR_PROVIDER_TRACKED_STATUS:"locationGeoLocatorTrackedStatus",COOKIE_STORAGE_KEY:"user-address-model"}},"1c2f52c061810467b454":(e,t,s)=>{"use strict";s.d(t,{R:()=>D,v:()=>M});var o=s("25f871b926a308f9cf03"),i=s.n(o),a=s("4251de03d478be1be4fa"),r=s.n(a),n=s("b885315ea9edeabb2c2d"),d=s.n(n),c=s("3bf46fb44d8d9872d5db"),l=s.n(c),_=s("1afafb1030638799873e"),p=s.n(_),E=s("6c98f6eb5d8c8e24aa4d"),u=s.n(E),h=s("4bc8a8a5e7e314d8175d"),g=s.n(h),T=s("b7daca8bbc8942ed46a0"),m=s.n(T),f=s("d8b9c951ab0e2d9eeae4"),N=s.n(f),S=s("02c3e1412ab666c08363"),L=s.n(S),A=s("33290a3606c3bcdb2aa0"),O=s.n(A),b=s("4d267083d61b8f29a1d3"),C=s.n(b),I=s("94217eecef624954b619"),v=s("ef7f39a531ad1aecc167"),R=s("9302435e81c621e827fb");const M=(e,t)=>{const s=null!=t?t:"interaction-primary";switch((0,v.Fz)(e)){case I._.HOME:return(0,R.jsx)(l(),{fill:s});case I._.COMPANY:case I._.WORK:return(0,R.jsx)(O(),{fill:s});case I._.PARTNER:return(0,R.jsx)(r(),{fill:s});case I._.OTHER:default:return(0,R.jsx)(u(),{fill:s})}},D=(e,t,s)=>{const o=null!=t?t:"interaction-secondary";switch((0,v.Fz)(e)){case I._.HOME:return s?(0,R.jsx)(g(),{fill:o}):(0,R.jsx)(p(),{"data-testid":"home-label"});case I._.COMPANY:case I._.WORK:return s?(0,R.jsx)(N(),{fill:o}):(0,R.jsx)(C(),{"data-testid":"work-label"});case I._.PARTNER:return s?(0,R.jsx)(m(),{fill:o}):(0,R.jsx)(d(),{"data-testid":"partner-label"});case I._.OTHER:default:return s?(0,R.jsx)(L(),{fill:o}):(0,R.jsx)(i(),{"data-testid":"other-label"})}}},"94217eecef624954b619":(e,t,s)=>{"use strict";s.d(t,{_:()=>o,r:()=>i});let o=function(e){return e.HOME="1",e.WORK="2",e.PARTNER="3",e.COMPANY="5",e.OTHER="0",e}({}),i=function(e){return e.TEXT="text",e.NUMBER="number",e.PHONE="tel",e}({})},ef7f39a531ad1aecc167:(e,t,s)=>{"use strict";s.d(t,{Aq:()=>r,FE:()=>c,Fz:()=>a,Kt:()=>d,id:()=>n});var o=s("92dfcc2420a73bb8a53b"),i=s("94217eecef624954b619");const a=e=>e&&"number"==typeof e||0===e?e.toString():e,r=(e,t,s,o)=>e.filter((e=>t===a(e.type)&&o&&o===e.label&&e.id!==s)).length>0,n=(e,t)=>{switch(e){case i._.HOME:return"Home";case i._.COMPANY:return"Company";case i._.WORK:return"Work";case i._.PARTNER:return"Partner";case i._.OTHER:default:return t}},d=e=>{const{NEXTGEN_HOME:t,NEXTGEN_COMPANY:s,NEXTGEN_WORK:i,address_label_partner:a,address_label_new_address:r}=o.w;return{NEXTGEN_HOME:e(t),NEXTGEN_COMPANY:"NEXTGEN_company"===e("NEXTGEN_company")?e(s):e("NEXTGEN_company"),NEXTGEN_WORK:e(i),address_label_partner:e(a),address_label_new_address:e(r)}},c=(e,t)=>{switch(a(t.type)){case i._.HOME:return e.NEXTGEN_HOME;case i._.COMPANY:return e.NEXTGEN_COMPANY;case i._.WORK:return e.NEXTGEN_WORK;case i._.PARTNER:return e.address_label_partner;case i._.OTHER:return t.label;default:return e.address_label_new_address}}},"787980cc545b28bdd6fd":(e,t,s)=>{"use strict";s.d(t,{ZP:()=>_});var o=s("eeff3c378ab26d13c976"),i=s("12be0f0e9e2c7751d613"),a=s("af044b2363c1f667adf8"),r=s("c592b59d340f31b3d68a"),n=s("bd11212dd200c13dd4e4"),d=s("b48d419be3e1903edcd4");const c=e=>async t=>(async(e,t)=>{try{const s=d.i.getInstance();return(await s.getAutocomplete({query:t,country:e})).map((e=>new n.C({place_id:e.address.id,formatted_customer_address:e.address.formatted_address,object_type:"autocomplete"})))}catch(t){const s=new r.F(t);throw(0,a.P)(s,"Error calling Google Autocomplete API for addresses suggestions",{level:"error",contextData:{functionName:"getAutoCompleteSuggestions"},tags:{"autocomplete-country-code":e}}),s}})(e,t);var l=s("58f9fd2015b2625e1755");const _=(e,t,s)=>{const{isoCountryCode:a,platform:r}=e,n=(0,o.HP)(c(a));let d;return t&&(d=(0,o.HP)((0,l.Z)(s,i.ZP.getInstance().getCustomerId()),{cachePromiseRejection:!1}),d()),async function(e,t,s,o){return void 0===o&&(o=!0),async function(e,t,s,o,i,a,r){if(void 0===a&&(a=!0),void 0===r&&(r="b2c"),"saved address"!==i)return e(s,o);if("function"!=typeof t)return Promise.resolve([]);try{const e=await t();return"b2b"===r?e:a?e.slice(0,5):e}catch(e){return Promise.reject(e)}}(n,d,e,t,s,o,r)}}},"58f9fd2015b2625e1755":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var o=s("bd11212dd200c13dd4e4");var i=s("63d73f76ceae174705a0"),a=s("94217eecef624954b619");const r=async(e,t)=>{try{const s=await async function(e,t){if(void 0===e&&(e=""),""===e)return Promise.resolve([]);try{const e=await t.getAddresses();return e&&e.items?e.items.map((e=>new o.C(Object.assign({},e,{object_type:"saved address"})))):[]}catch(e){return Promise.reject(e)}}(t,e),r=await(e=>{const t=(0,i.h)();return"b2c"===(null==t?void 0:t.source)?e:e.filter((e=>!(e.type!=a._.COMPANY||!e.corporate_reference_id)||!e.corporate_reference_id))})(s);return r}catch(e){return Promise.reject(e)}},n=(e,t)=>r.bind(window,e,t)},bbd75ae6764ea3a7227f:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});var o=s("92dfcc2420a73bb8a53b");const i=e=>{let t={};return Object.keys(o.Q).forEach((s=>{const i=o.Q[s];t=Object.assign({},t,{[s]:e[i]})})),t}},"22941d30b1600a164b12":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("13d4d1b8a643ccc0b5af"),i=s("88bc95ce408180e2cfc9"),a=s("b1198ae8906dcda72167"),r=s("76c59226ddc9c6a9ff11"),n=s("8bf191ce59421ef0bd7c"),d=s("bfd9b1f78f171827d559");const c=class{constructor(e,t,s,o){void 0===s&&(s=""),void 0===o&&(o=d.b.MFE),this.apiKey="",this.countryCode="",this.baseApiUrl="",this.xhrProvider=d.b.MFE,this.apiKey=e,this.countryCode=t,this.baseApiUrl=s,this.xhrProvider=o}async get(e,t){try{return(await(0,o.V)(this.countryCode,this.apiKey,this.getApiUrl(e),this.getRequestConfig(t))).data.data}catch(e){const t=e,s=t.response&&t.response.data?t.response.data:t;return Promise.reject(s)}}async post(e,t){return(await(0,i.x)(this.countryCode,this.apiKey,this.getApiUrl(e),this.getRequestConfig(t))).data.data}async put(e,t){return(await(0,a.A)(this.countryCode,this.apiKey,this.getApiUrl(e),this.getRequestConfig(t))).data.data}async delete(e,t){return(await(0,r.d)(this.countryCode,this.apiKey,this.getApiUrl(e),this.getRequestConfig(t))).data.data}getXhrProvider(){return this.xhrProvider}getApiUrl(e){return this.baseApiUrl?this.baseApiUrl+"/"+e:e}getRequestConfig(e){return void 0===e&&(e={}),Object.assign({},e,{headers:Object.assign({},this.getAuthHeaders(),e.headers)})}getAuthHeaders(){const e=(0,n.e)("token"),t="Bearer "+e,s={};return e&&(s.Authorization=t),s}}},"78bd3eef3fe8b6a51287":(e,t,s)=>{"use strict";s.d(t,{_Z:()=>d,YX:()=>l});var o=s("8f58e784196e6568c885"),i=s.n(o),a=s("6f2468c415bb728048f0");class r{static init(e){if(this.instance)throw new Error("ConfigProvider initialized before");return this.instance=new r(e),this.instance}static getInstance(){return this.instance}constructor(e){this.targetURL=void 0,this.cachedConfig=null,this.callStack=[],this.isRequestPending=!1,this.targetURL=e.targetURL}async getConfig(){return new Promise((async(e,t)=>{this.cachedConfig?e(this.cachedConfig):this.loadConfig().then(e).catch(t)}))}clearCachedConfig(){this.cachedConfig=null}async loadConfig(){return new Promise(((e,t)=>{const s={resolve:e,reject:t};this.callStack.push(s),this.isRequestPending?this.resolvePromises():this.makeRequest()}))}resolvePromises(){this.cachedConfig&&(this.callStack.forEach((e=>{let{resolve:t}=e;t(this.cachedConfig)})),this.callStack=[])}rejectPromises(e){this.callStack.forEach((t=>{let{reject:s}=t;s(e)})),this.callStack=[]}makeRequest(){const e={headers:{"X-FP-API-KEY":"volo"}};this.isRequestPending=!0;try{(0,a.get)(this.targetURL,e).then((e=>{this.isRequestPending=!1,this.cachedConfig=e.data.data,this.resolvePromises()})).catch((e=>{this.isRequestPending=!1,this.rejectPromises(e)}))}catch(e){console.log("e",e)}}}r.instance=void 0;var n=s("77dd625b88c8b2482c64");const d=e=>i()(e,"features.flags.address-form",n.ps.ORIGINAL),c=e=>"address-service/form/"+(e=>{switch(e){case n.ps.VARIATION1:return"variation1";case n.ps.VARIATION2:return"variation2";case n.ps.CONTROL:return"control";case n.ps.ORIGINAL:default:return"default"}})(d(e)),l=async e=>{const t=((e,t)=>e.apiUrl+"/"+t)(e,c(e)),s=r.getInstance()||r.init({targetURL:t});return await s.getConfig()}},b48d419be3e1903edcd4:(e,t,s)=>{"use strict";s.d(t,{i:()=>I});var o=s("bd11212dd200c13dd4e4"),i=s("62360b9b8df4952ab993"),a=s("66ada238672318e3866c"),r=s("c592b59d340f31b3d68a"),n=s("d7f2db0229e7c7df3214"),d=s("6f2468c415bb728048f0"),c=s("f37b1839dd5a1284d1c5"),l=s("8bf191ce59421ef0bd7c"),_=s("5a9bedad5ca36af7a557"),p=s("207ea314cce7e9d4498b"),E=s("12be0f0e9e2c7751d613"),u=s("b94801ad171ba234e1bd");const h=(e,t)=>e.replace("v1","v2")+"/"+t,g=e=>""!==e.getCustomerId()?e.getCustomerId():e.getConfig().userIpAddress,T=e=>{var t;return null!==(t=(0,l.e)(u.EI.Token))&&void 0!==t?t:e},m=["center"],f="autocomplete",N="details",S="geocode",L="reverse",A="staticmap",O="provider",b=(e,t)=>{var s,o,i,a,r,n;return[{serviceType:e,serviceName:"geocoderApi",errorCode:t.status_code||(null===(s=t.response)||void 0===s?void 0:s.status)||(null===(o=t.request)||void 0===o?void 0:o.status)},(null===(i=t.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)||(null===(r=t.response)||void 0===r?void 0:r.message)||(null===(n=t.request)||void 0===n?void 0:n.message)||"Unknown error"]};class C{constructor(e){this.appConfig=e}async getAutocomplete(e){var t;const s=await this.makeRequest(f,{params:e});return localStorage.setItem(O,null==s||null===(t=s.data)||void 0===t?void 0:t.meta.provider),s.data.data}async getDetails(e){const t=await this.makeRequest(N,{params:{query_id:e.id,language:e.language}});return localStorage.setItem(O,t.data.meta.provider),t.data.data}async getGeocode(e){const t={};this.appConfig.isoCountryCode&&(t.country=this.appConfig.isoCountryCode);const s=await this.makeRequest(S,{params:Object.assign({},t,e)});return localStorage.setItem(O,s.data.meta.provider),s.data.data}async getStaticMap(e){const{dhGeocodingBaseUrl:t,googleMapLocale:s,isoCountryCode:o,dhGeocodingToken:a,global_entity_id:l,platform:_}=this.appConfig,{center:{lat:p,lng:u}}=e,f=(0,i.Z)(e,m),N=T(a),S={params:Object.assign({},f,{center:p+","+u,language:s,country:o}),headers:{Authorization:"Bearer "+N,"X-Caller-Country":""+o,"X-Global-Entity-Id":""+l,"Cust-Code":g(E.ZP.getInstance()),"X-Caller-Platform":_},responseType:"blob"};try{return await(0,d.get)(h(t,A),S)}catch(e){var L;const[t,s]=b("staticMap",e);if((null===(L=e.response)||void 0===L?void 0:L.status)===c.W.NOT_FOUND)throw e;const o=new r.F(e);throw n.k.error({error:o,message:"Geocoder Api error from "+(null==t?void 0:t.serviceType)+", Message: "+s,extraInfo:{contextData:S,tags:t}}),o}}async getReverse(e){if(s=e.lat,isFinite(s)&&Math.abs(s)<=90&&(t=e.lng,isFinite(t)&&Math.abs(t)<=180)){const t=await this.makeRequest(L,{params:e});return localStorage.setItem(O,t.data.meta.provider),t.data.data}var t,s;return[]}static trackGeoLocatorMapProvider(e){if(!(0,l.e)(p.z.GEOLOCATOR_PROVIDER_TRACKED_STATUS)){const t=E.ZP.getInstance().getModel(),s=E.ZP.getInstance().getGTMLocationService();"string"==typeof(null==e?void 0:e.original_provider)?s.trackGeoLocatorInfoReceived(t,e.original_provider,e.provider):s.trackGeoLocatorInfoReceived(t,e.provider),(0,_.d)(p.z.GEOLOCATOR_PROVIDER_TRACKED_STATUS,!0)}}async makeRequest(e,t){const s=T(this.appConfig.dhGeocodingToken),o=Object.assign({},t,{params:Object.assign({},t.params,{language:this.appConfig.googleMapLocale}),headers:Object.assign({Accept:"application/json",Authorization:"Bearer "+s,"X-Caller-Country":""+this.appConfig.isoCountryCode,"X-Global-Entity-Id":""+this.appConfig.global_entity_id},(0,a.O)(),{"Cust-Code":g(E.ZP.getInstance()),"X-Caller-Platform":this.appConfig.platform})});try{const t=await(0,d.get)(h(this.appConfig.dhGeocodingBaseUrl,e),o);return t&&C.trackGeoLocatorMapProvider(t.data.meta),t}catch(t){var i;const[s,a]=b(e,t);if((null===(i=t.response)||void 0===i?void 0:i.status)===c.W.NOT_FOUND)throw t;const d=new r.F(t);throw n.k.error({error:d,message:"Geocoder Api error from "+(null==s?void 0:s.serviceType)+", Message: "+a,extraInfo:{contextData:o,tags:s}}),d}}}class I{constructor(e){this.appConfig=e}static getInstance(e){if(!this.instance||e){if(!e)throw new Error("App Config is not defined");this.instance=new I(e)}return this.instance}async getAutocomplete(e){const t=new C(this.appConfig);return await t.getAutocomplete(e)}async getDetails(e){const t=new C(this.appConfig),s=await t.getDetails(e);return this.mapToInternalStructure(s[0].address)}async getReverse(e){const t=new C(this.appConfig),s=await t.getReverse(e);return this.mapToInternalStructure(s[0].address)}async getGeocode(e){const t=new C(this.appConfig),s=await t.getGeocode(e);return this.mapToInternalStructure(s[0].address)}async getStaticMap(e){const t=new C(this.appConfig);return await t.getStaticMap(e)}mapToInternalStructure(e){const t=I.instance.appConfig.address_config.geocoder_v2_mapping,{id:s,formatted_address:i,city:a,country_code:r,zipcode:n,latitude:d,longitude:c,area:l,platform_city_id:_}=e,p={place_id:s,formatted_customer_address:i,city_name:a,country_code:r,postcode:n,latitude:d,longitude:c,areas:l,location_type:"polygon",city_id:_?Number(_):void 0};for(const[s,o]of Object.entries(t))o.forEach((t=>{e[t]&&(p[s]=e[t])}));return delete p.id,new o.C(p)}}I.instance=void 0},fac2effa2380bfd3e70d:(e,t,s)=>{"use strict";s.d(t,{_:()=>r,h:()=>n});var o=s("c592b59d340f31b3d68a"),i=s("d7f2db0229e7c7df3214");const a=async function(e,t,s){return void 0===s&&(s="text/javascript"),(e=>document.getElementById(e))(t)?Promise.resolve():new Promise(((o,i)=>{const a=document.createElement("script");a.type=s,a.src=e,a.id=t,a.onload=o,a.onerror=i,a.async=!0,document.body.appendChild(a)}))};class r{static getInstance(e){return this.instance||(this.instance=new r(e)),this.instance}constructor(e){this.url=void 0;const t=e.googleMapLocale,s=e.googleMapsApiKey;e.googleMapsApiKey&&e.googleMapsApiKey.length>0?this.url="https://maps.googleapis.com/maps/api/js?v=quarterly&libraries=places,geometry&language="+t+"&key="+s+"&callback=Function.prototype":i.k.info({message:"Loc: GoogleApiClientId and googleApiChannel are deprecated, please set googleMapsApiKey"})}async loadGoogleMapLib(){var e;if(void 0!==window.google&&(null===(e=window.google)||void 0===e?void 0:e.maps))return Promise.resolve(window.google.maps);try{var t;return await a(this.url||"","google_map_loader"),Promise.resolve(null===(t=window.google)||void 0===t?void 0:t.maps)}catch(e){const t=new o.F(e);return i.k.error({error:t,message:"Error in loadGoogleMapLib"}),Promise.reject(t)}}destroy(){delete r.instance}}r.instance=void 0;const n=e=>r.getInstance(e)},"8925fd7ba214b7a70d3b":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var o=s("d7f2db0229e7c7df3214"),i=s("ecdd8aa1d706c301669f"),a=s("b48d419be3e1903edcd4"),r=s("77dd625b88c8b2482c64");const n=class{constructor(e){this.gtmLocationService=e}async getLatLng(){const e=this.getOptions();let t=function(e){return e[e.PERMISSION_DENIED=1]="PERMISSION_DENIED",e[e.POSITION_UNAVAILABLE=2]="POSITION_UNAVAILABLE",e[e.TIMEOUT=3]="TIMEOUT",e}({});return new Promise(((s,a)=>{window.navigator.geolocation.getCurrentPosition(s,(e=>{const s={serviceName:"GeolocationApi",errorCode:null==e?void 0:e.code};s.errorCode!==t.PERMISSION_DENIED&&(i.mG(s),o.k.error({error:e,message:"GPS Failed, Code: "+(null==s?void 0:s.errorCode)+", Message: "+(null==e?void 0:e.message),extraInfo:{tags:s}})),a(e)}),e)}))}async getAddress(){const e=(new Date).getTime(),t=await this.getLatLng(),s=this.getGpsWaitTime(e,t.timestamp),o=t.coords;return this.gtmLocationService.trackGPSInfoReceived(s,o),a.i.getInstance().getReverse({lat:o.latitude,lng:o.longitude})}getGpsWaitTime(e,t){const s=t-e;return s>0?s:0}getOptions(){return{enableHighAccuracy:!0,maximumAge:r.PB.VAR2}}}},"12be0f0e9e2c7751d613":(e,t,s)=>{"use strict";s.d(t,{iJ:()=>Ne,ZP:()=>fe});var o={};s.r(o),s.d(o,{CustomMarker:()=>C,RiderMarker:()=>k,UserMarker:()=>U,VendorMarker:()=>X});var i={};s.r(i),s.d(i,{AddressSuggester:()=>f.ZP,AddressValidator:()=>L,Direction:()=>A,Marker:()=>o});var a={};s.r(a),s.d(a,{OTPMapStyles:()=>se,VendorMapStyles:()=>oe});var r=s("8f58e784196e6568c885"),n=s.n(r),d=s("8c9df290d9294789841b"),c=s.n(d),l=s("0c9a0ecae3abe6217c7d"),_=s("d7f2db0229e7c7df3214"),p=s("5a9bedad5ca36af7a557"),E=s("bdc216a4d248b845f00c");function u(e){return e.replace(/\{/g,":").replace(/}/g,"").replace("plz","postcode")}function h(e){const t={};return e.forEach((e=>{const s=e.name;e.geolocator_mapping?t[s]=[{geolocator_mapping:e.geolocator_mapping}]:e.mapping&&(t[s]=e.mapping)})),t}function g(e){const t={};return e.forEach((e=>{const s=e.name;e.geolocator_mapping_v2&&(t[s]=e.geolocator_mapping_v2)})),t}function T(e,t){const s=[];return e.forEach((e=>{const o=t[e];o?s.push(o):s.push(e)})),s}var m=s("207ea314cce7e9d4498b"),f=s("787980cc545b28bdd6fd"),N=s("c0f2e54afe36a8e8debd"),S=s.n(N);class L{isValid(e,t){const s=t.address_config.required_fields;return!S()(s,(t=>!e[t]))}}const A=class{constructor(e){this.directionsDisplay=void 0,this.directionsService=void 0,this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0}),this.directionsDisplay.setMap(e.getMap())}placeDirection(e,t){const s={origin:e,destination:t,travelMode:google.maps.TravelMode.WALKING};this.directionsService.route(s,((e,t)=>{t===google.maps.DirectionsStatus.OK&&this.directionsDisplay.setDirections(e)}))}};var O=s("76c0d889bf1aa1d9590c"),b=s.n(O);class C{constructor(e,t,s,o,i,a){this.map=void 0,this.marker=void 0,this.appConfig=void 0,this.brand=void 0,this.appConfig=o,this.map=s&&s.getMap(),this.brand=this.getBrand(o),this.marker=i||this.generateCustomMarker(e,t,a),this.position=e,this.show(this.map)}generateCustomMarker(e,t,s){const o=this.createBrandedMarkerIcon(t),i=this.getMarkerConfig(e,o,s);return new google.maps.Marker(i)}show(e){this.map=e,this.map&&this.marker.setMap(this.map)}hide(){this.marker.setMap(null)}getMarkerConfig(e,t,s){const o=this.generateMarkerIcon(t);return Object.assign({position:e,icon:o},s?{zIndex:s}:{},this.getMarkerActionConfig())}getMarkerActionConfig(){return{animation:google.maps.Animation.DROP,clickable:!1,optimized:!1}}generateMarkerIcon(e){const t=Object.assign({},e);return t.size=this.getSize(e.size.width,e.size.height),e.scaledSize&&(t.scaledSize=this.getSize(e.size.width,e.size.height)),e.origin&&(t.origin=this.getPoint(e.origin.x,e.origin.x)),e.anchor&&(t.anchor=this.getPoint(e.anchor.x,e.anchor.x)),t}getSize(e,t){return new google.maps.Size(e,t)}getPoint(e,t){return new google.maps.Point(e,t)}get position(){const e=this.marker.getPosition();if(e)return e.toJSON()}set position(e){e&&(b()(e.lat)&&b()(e.lng)||e.lat&&e.lng)&&this.marker.setPosition(e)}getBrand(e){return n()(e,"brand","foodora")}getBrandedIcon(e){const t=Object.assign({},e);return t.url=t.url.replace("{brand}",this.brand),t}createBrandedMarkerIcon(e){return this.getBrandedIcon(e)}setIconState(e){const t=this.getBrandedIcon(e);this.marker.setIcon(t)}}var I=s("ac143d410148e63c09e4");const v=function(){0;const e=window.navigator.userAgent;return new RegExp("MSIE|Trident|Edge","i").test(e)}()?".png":".svg",R=e=>function(t,s,o){return void 0===t&&(t=!1),void 0===s&&(s=""),void 0===o&&(o="fp"),Object.assign({},M(e,s,o),D(e,t),y(e,t),P(),G(e))},M=(e,t,s)=>{let o;return o=""!==t?t:(0,I.J)("markers/"+("rider"===e?"{brand}-":"")+e+"-marker"+v,s),{url:o}},D=(e,t)=>{if(t)return{size:{width:42,height:42}};switch(e){case"rider":return{size:{width:42,height:50}};case"vendor":case"user":return{size:{width:25,height:35}}}},y=(e,t)=>{if(t)return{scaledSize:{width:42,height:42}};switch(e){case"rider":return{scaledSize:{width:42,height:50}};case"vendor":case"user":return{scaledSize:{width:25,height:35}};default:return{}}},P=()=>({origin:{x:0,y:0}}),G=e=>{switch(e){case"vendor":case"user":return{anchor:{x:12.5,y:0}};case"rider":return{anchor:{x:21,y:0}};default:return{}}},B=R("user"),w=R("rider"),x=R("vendor");class U extends C{constructor(e,t,s,o){super(e,B(),t,s,o)}}class k extends C{constructor(e,t,s,o,i,a,r){super(e,w(o,a,i),t,s,r,999)}}class X extends C{constructor(e,t,s,o){super(e,x(),t,s,o)}}var F=s("bd11212dd200c13dd4e4");const j={currentCityName:""};var H=s("ba3a94fe7179fdf56ab0");var V=s("78bd3eef3fe8b6a51287");class Y{constructor(e){this.appConfig=e,this.appConfig=e}getFormattedAddress(e,t){return(t||n()(this.appConfig,"address_config.format",":address_line1, :building, :postcode, :city")).replace(/:\b\S*/gim,(t=>{const s=t.substring(1).trim(),o=s.replace(",",""),i=n()(e,o,""),a=i||"";return s.replace(o,a)||""})).replace(/\s{2,}/g," ").replace(/, ,/,",").replace(/(\s,)/,"").replace(/(^\s*,\s*|, \s*$)/,"").replace(/^\,$/,"").replace(/( −)\1{1,}/," −").trim().replace(/−$/,"").trim()}getFormattedAddressWithLabel(e,t,s){return(t||n()(this.appConfig,"address_config.multiline_checkout_format",":floor ")[2]).replace(/:\b\S*/gim,(t=>{const o=t.substring(1).trim().replace(",",""),i=n()(e,o,""),a=i||"",r=this.getFieldTranslatedFormat(o,s);return(r&&a?r.replace(/%.*/,a):a)+", "})).replace(/\s{2,}/g," ").replace(/, ,/,",").replace(/(\s,)/,"").replace(/(^\s*,\s*|, \s*$)/,"").replace(/^\,$/,"").replace(/( −)\1{1,}/," −").trim().replace(/−$/,"").replace(/,$/,"").trim()||""}getFormMappings(){return n()(this.appConfig,"address_config.form_mappings",{address_line1:"address_line1",building:"address_line2"})}getMBLFormattedAddress(e,t){return this.getFormattedAddress(t,e.replace("plz","postcode")).trim().replace("Unnamed Road","").replace(/,$/,"")}getFieldByName(e,t){return t.find((t=>t.name===e))}getFieldTranslatedFormat(e,t){var s;const o=this.appConfig.address_config.fields||[],i=this.getFieldByName(e,o),a=null==i||null===(s=i.translation_keys)||void 0===s?void 0:s.format_translation_key;return a?t[a]:void 0}getMultiLineAddressFormat(e,t,s){return(null==s?void 0:s.map((s=>s.replace(/:\b\S*/gim,(s=>{const o=s.substring(1).trim().replace(",",""),i=this.getFieldTranslatedFormat(o,t),a=n()(e,o,""),r=a||"";return i&&r?i.replace(/%.*%/,r):r})).replace(/\s{2,}/g," ").replace(/, ,/,",").replace(/(\s,)/,"").replace(/(^\s*,\s*|, \s*$)/,"").replace(/^\,$/,"").replace(/( −)\1{1,}/," −").trim().replace(/−$/,"").trim())))||[e.formatted_customer_address||""]}getMultiLineAddressFormatWithLabel(e,t,s,o){return(null==s?void 0:s.map((s=>s.replace(/:\b\S*/gim,(s=>{const i=s.substring(1).trim().replace(",",""),a=n()(e,i,""),r=a||"",d=this.getFieldTranslatedFormat(i,t);return d&&r&&o?d.replace(/%.*/,r):r})).replace(/\s{2,}/g," ").replace(/, ,/,",").replace(/(\s,)/,"").replace(/(^\s*,\s*|, \s*$)/,"").replace(/^\,$/,"").replace(/( −)\1{1,}/," −").trim().replace(/−$/,"").trim())))||[e.formatted_customer_address||""]}getCheckoutFormattedAddress(e,t){const s=this.appConfig.address_config.multiline_checkout_format;return this.getMultiLineAddressFormat(e,t,s)}getOTPFormattedAddress(e,t){const s=this.appConfig.address_config.multiline_formatted_address;return this.getMultiLineAddressFormatWithLabel(e,t,s)}}var K=s("f37b1839dd5a1284d1c5"),Z=s("ecdd8aa1d706c301669f"),z=s("8bf191ce59421ef0bd7c"),W=s("bfd9b1f78f171827d559");class q{static getInstance(e){if(!q.instance){if(!e)throw new Error("initialization of LocationXhrService needs XhrProvider");q.instance=new q(e)}return q.instance}constructor(e){this.XhrProvider=void 0,this.getProvider=()=>this.XhrProvider,this.setProvider=e=>{if(!e)throw new Error("provider is not a valid XhrProvider.");this.XhrProvider=e},this.XhrProvider=e}isAxiosProvider(){return this.XhrProvider.getXhrProvider&&this.XhrProvider.getXhrProvider()===W.b.MFE}getRequestConfigForProvider(e){return!0===this.isAxiosProvider()?{headers:this.getHeaders(),data:e}:{headers:this.getHeaders(),requestPayload:e}}getHeaders(){return(0,z.e)("token")?{Accept:"application/json",Authorization:"Bearer "+(0,z.e)("token")}:{Accept:"application/json"}}send(e){return this.XhrProvider.send(e)}get(e){var t;const s=this.getRequestConfigForProvider();return null!==(t=this.getHeaders())&&void 0!==t&&t.Authorization?this.XhrProvider.get(e,s):Promise.reject()}put(e,t){const s=this.getRequestConfigForProvider(t);return this.XhrProvider.put(e,s)}post(e,t){const s=this.getRequestConfigForProvider(t);return this.XhrProvider.post(e,s)}delete(e){const t=this.getRequestConfigForProvider();return this.XhrProvider.delete(e,t)}isAppIdExist(e){var t;return!(!((null==e||null===(t=e.response)||void 0===t?void 0:t.data)||{}).appId&&!(e||{}).appId)}}q.instance=void 0;class J{constructor(){this.addressService=void 0,this.getAddresses=async()=>{const e="customers/addresses";try{return await this.addressService.get(e)}catch(s){const o=this.getTags("getAddresses",e,s);var t;if(o.errorCode>=K.W.INTERNAL_SERVER_ERROR)Z.mG(o),_.k.error({error:s,message:"Address Api error from getAddresses, Message: "+(null==s||null===(t=s.data)||void 0===t?void 0:t.message),extraInfo:o});else this.PerimeterXlogs(s,o);return Promise.reject(s)}},this.getAddress=async e=>{const t="customers/addresses/"+e;try{return await this.addressService.get(t)}catch(e){const o=this.getTags("getAddress",t,e);var s;if(o.errorCode>=K.W.INTERNAL_SERVER_ERROR)Z.mG(o),_.k.error({error:e,message:"Address Api error from getAddress, Message: "+(null==e||null===(s=e.data)||void 0===s?void 0:s.message),extraInfo:o})}},this.createAddress=async e=>{const t="customers/addresses?locale="+fe.getInstance().getConfig().googleMapLocale;try{return await this.addressService.post(t,e)}catch(e){const o=this.getTags("createAddress",t,e);var s;if(o.errorCode>=K.W.INTERNAL_SERVER_ERROR)Z.mG(o),_.k.error({error:e,message:"Address Api error from createAddress, Message: "+(null==e||null===(s=e.data)||void 0===s?void 0:s.message),extraInfo:o});else this.PerimeterXlogs(e,o);throw e}},this.updateAddress=async e=>{const t=fe.getInstance().getConfig().googleMapLocale,s="customers/addresses/"+e.id+"?locale="+t;try{return await this.addressService.put(s,e)}catch(e){const t=this.getTags("updateAddress",s,e);var o;if(t.errorCode>=K.W.INTERNAL_SERVER_ERROR)Z.mG(t),_.k.error({error:e,message:"Address Api error from updateAddress, Message: "+(null==e||null===(o=e.data)||void 0===o?void 0:o.message),extraInfo:t});else this.PerimeterXlogs(e,t);throw e}},this.deleteAddress=async e=>{const t="customers/addresses/"+e;try{return await this.addressService.delete(t).then((e=>(this.getAddresses(),e)))}catch(e){const o=this.getTags("deleteAddress",t,e);var s;if(o.errorCode>=K.W.INTERNAL_SERVER_ERROR)Z.mG(o),_.k.error({error:e,message:"Address Api error from deleteAddress, Message: "+(null==e||null===(s=e.data)||void 0===s?void 0:s.message),extraInfo:o});else this.PerimeterXlogs(e,o)}},this.addressService=q.getInstance()}getTags(e,t,s){var o,i,a,r;return{apiUrl:t,serviceType:e,serviceName:"AddressApi",errorCode:(null==s?void 0:s.status_code)||(null==s||null===(o=s.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.status_code)||(null==s||null===(a=s.response)||void 0===a?void 0:a.status)||(null==s||null===(r=s.request)||void 0===r?void 0:r.status)}}PerimeterXlogs(e,t){var s;(fe.getInstance().getLocationXhrService().isAppIdExist(e)||403==t.errorCode)&&(Z.mG(t),_.k.error({error:e,message:"Address Api error from PerimeterX , Error Code: "+(null==e||null===(s=e.response)||void 0===s?void 0:s.status),extraInfo:t}))}}var Q=s("6f2468c415bb728048f0");class ${constructor(e){this.discoApiBaseUrl=void 0,this.discoApiBaseUrl=e.discoApiBaseUrl}async getVendorAvailabilityAPI(e){let{vendorCode:t,latitude:s,longitude:o,appConfig:i,expedition:a,ignoreShrinking:r=!1,orderTime:n=null}=e;const d=new Map(Object.entries({latitude:s,longitude:o,expedition_types:a,geid:"FP_"+i.isoCountryCode.toLocaleUpperCase()}));r&&d.set("ignore_shrinking","true"),n&&"now"!==n&&d.set("order_time",n);const c=this.getQueryParamString(Object.fromEntries(d));return this.makeRequest(((e,t,s)=>e.discoApiBaseUrl+"/listing/api/v1/vendor/"+t+"?"+s)(i,t,c))}async isVendorDeliverableDiscoAPI(e,t,s,o){var i,a;const r=await this.getVendorAvailabilityAPI({vendorCode:e,latitude:t,longitude:s,appConfig:o,expedition:"delivery"});return"unavailable"!==(null==r||null===(i=r.data)||void 0===i||null===(a=i.vendor)||void 0===a?void 0:a.expedition_types.delivery.status)}getQueryParamString(e){const t=new URLSearchParams;for(const[s,o]of Object.entries(e))t.set(s,String(o));return t.toString()}async makeRequest(e){const t={headers:{Accept:"application/json","x-disco-client-id":"web"}};try{return await(0,Q.get)(e,t)}catch(e){throw e}}}class ee{constructor(e){this.model=void 0,this.deliverableLocationProvider=void 0,this.appConfig=e,this.deliverableLocationProvider=new $({discoApiBaseUrl:this.appConfig.discoApiBaseUrl})}setModel(e){this.model=e}async checkDeliverableByVendorCode(e){const t=e.longitude||this.model.longitude,s=e.latitude||this.model.latitude,{isPickUp:o,vendorCode:i}=e;return this.getVendorDeliverability(i,s,t,o)}async getVendorDeliverability(e,t,s,o){return!!o||await this.deliverableLocationProvider.isVendorDeliverableDiscoAPI(e,t,s,this.appConfig)}}var te=s("b48d419be3e1903edcd4");const se=JSON.parse('{"styles":[{"elementType":"geometry","stylers":[{"saturation":-30},{"lightness":15}]},{"elementType":"labels.icon","stylers":[{"saturation":-30}]},{"featureType":"administrative.land_parcel","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"landscape.natural","stylers":[{"saturation":-15},{"weight":2}]},{"featureType":"landscape.natural.landcover","elementType":"geometry.fill","stylers":[{"saturation":-25}]},{"featureType":"poi","elementType":"labels.text","stylers":[{"visibility":"off"}]},{"featureType":"poi.business","stylers":[{"visibility":"off"}]},{"featureType":"poi.park","stylers":[{"saturation":5},{"lightness":10},{"weight":4}]},{"featureType":"road","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"transit","stylers":[{"visibility":"off"}]}]}'),oe=JSON.parse('{"styles":[{"featureType":"poi","elementType":"labels","stylers":[{"lightness":30}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.highway.controlled_access","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"poi.business","elementType":"labels.icon","stylers":[{"color":"#9e9e9e"},{"visibility":"off"}]}]}');var ie=s("66ada238672318e3866c");const ae=async(e,t,s)=>{const o=e.host+"/"+t+"?"+(i=s,Object.keys(i).filter((e=>null!=i[e])).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(i[e]))).join("&"));var i;const a=await fetch(o,{headers:Object.assign({Accept:"application/json",Authorization:"Token "+e.token,"X-Country-Code":""+e.country,"X-Global-Entity-Id":""+e.global_entity_id},(0,ie.O)())});let r;try{r=await a.json()}catch(e){r=await a.text()}if("string"==typeof r||200!==a.status)throw new Error("response return error code "+a.status+": "+r);return r},re=async(e,t,s)=>{const o=await(async(e,t,s)=>{const o=await ae(e,t,Object.assign({},s));if(void 0!==o.country)return o.country;throw new Error("payload format incorrect")})(e,"country",{lat:t,long:s});return o},ne=async(e,t)=>(async e=>{try{return await e()}catch(e){throw e}})((()=>re((()=>{const e=fe.getInstance().getConfig(),t=(0,z.e)(m.z.PERSUES_CLIENT_ID);return{host:e.dhGeocodingBaseUrl,token:e.dhGeocodingToken,language:e.googleMapLocale,country:e.isoCountryCode,global_entity_id:e.global_entity_id,perseus_client_id:t}})(),e,t)));var de=s("fac2effa2380bfd3e70d"),ce=s("8925fd7ba214b7a70d3b");class le{constructor(e){this.submitTrigger=void 0,this.lastStepType=void 0,this.gtmLocationService=e,this.submitTrigger=null,this.lastStepType=null}setSubmitTrigger(e){this.submitTrigger=e}setLastStepType(e){this.lastStepType=e}getLastStepType(){return this.lastStepType}overrideSubmitTriggerType(e){this.lastStepType=null,this.submitTrigger={isUpdate:!!this.submitTrigger&&this.submitTrigger.isUpdate,type:e}}track(e){const t=null!==this.lastStepType?this.lastStepType:this.submitTrigger?this.submitTrigger.type:"Manual";this.submitTrigger&&this.submitTrigger.isUpdate&&this.gtmLocationService.trackAddressUpdateSubmitted(e,t),this.gtmLocationService.trackSubmittedLocation(e,t),this.lastStepType=null,this.submitTrigger=null}}var _e=s("918b1586c2878a66d052"),pe=s("f481ef00e50d282f38a9");const Ee=e=>e.id?"saved":"new",ue=(e,t)=>{const s=t?((e,t)=>({locationAddress:e.formatted_customer_address,locationCity:e.city,locationLat:e.latitude,locationLon:e.longitude,locationArea:e.postcode,locationCountry:(0,l.getIsoCountryCode)(t.toLowerCase()).toUpperCase(),deliveryAddressStatus:Ee(e)}))(t,e):{locationAddress:null,locationCity:null,locationLat:null,locationLon:null,locationArea:null,locationCountry:(0,l.getIsoCountryCode)(e.toLowerCase()).toUpperCase(),deliveryAddressStatus:null};return s},he=e=>({vendorId:e&&e.id||null,vendorCode:e&&e.code||null}),ge=e=>e||pe.P.NA,Te=e=>e||{};class me{constructor(e,t,s,o){this.isLocationAttemptedInitialized=void 0,this.locationAttemptedMethod=void 0,this.isGuest=void 0,this.eventLord=e,this.appConfig=t,this.tagManager=s,this.customerId=o,this.isLocationAttemptedInitialized=!1,this.locationAttemptedMethod=null,this.isGuest=""===this.customerId}setCustomerId(e){this.customerId=e}trackLocationError(e,t,s,o,i){const a=Object.assign({event:pe.u.ADDRESS_ERROR_SHOWN},ue(this.appConfig.countryCode,s),he(i),{locationMethod:t,addressError:e,formType:ge(o),pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,a)}trackMapDisplay(e,t,s){const o=Object.assign({event:pe.u.MAP_LOADED},ue(this.appConfig.countryCode,t),{locationMethod:e,pageType:this.tagManager.pageType,formType:ge(s)});this.eventLord.emit(_e.m,o)}trackSubmittedAddressOnCheckout(e,t,s,o,i){const a=Object.assign({event:pe.u.ADDRESS_SUBMITTED,locationMethod:t},ue(this.appConfig.countryCode,e),{dynamicField:Te(s),totalAddresses:o,formType:ge(i),pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,a)}trackSubmittedLocation(e,t){const s=Object.assign({event:pe.u.ADDRESS_SUBMITTED,locationMethod:t,pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,e));this.eventLord.emit(_e.m,s)}trackLocateMeStart(){const e={event:pe.u.GEOLOCATION_CLICKED,screenType:n()(this.tagManager,"pageType",null),userDeviceOs:navigator.platform,screenName:n()(this.tagManager,"pageType",null),userType:this.isGuest?"guest":"registered"};this.eventLord.emit(_e.m,e)}trackRecommendation(e,t){let{formatted_customer_address:s,latitude:o,longitude:i}=t;const a={event:e,screenName:n()(this.tagManager,"pageType",null),screenType:n()(this.tagManager,"pageType",null),locationAddress:s,locationLat:o,locationLong:i};this.eventLord.emit(_e.m,a)}trackAddressUpdateSubmitted(e,t){const s=Object.assign({event:pe.u.ADDRESS_UPDATE_SUBMITTED,pageType:this.tagManager.pageType,locationMethod:t},ue(this.appConfig.countryCode,e));this.eventLord.emit(_e.m,s)}trackAddressUpdateClicked(e,t){const s=Object.assign({event:pe.u.ADDRESS_UPDATE_CLICKED,pageType:this.tagManager.pageType},t&&{eventOrigin:t},ue(this.appConfig.countryCode,e));this.eventLord.emit(_e.m,s)}initializeLocationAttemptedTracking(e){this.isLocationAttemptedInitialized=!0,this.locationAttemptedMethod=e}resetLocationAttemptedTracking(){this.isLocationAttemptedInitialized=!1,this.locationAttemptedMethod=null}trackLocationAttempted(e,t,s,o,i,a){if(this.isLocationAttemptedInitialized){const r=Object.assign({event:pe.u.LOCATION_ATTEMPTED},ue(this.appConfig.countryCode,e),he(t),{formType:ge(s),pageType:this.tagManager.pageType,screenType:n()(this.tagManager,"pageType",null),locationMethod:a||this.locationAttemptedMethod,screenName:o,locationType:i});this.eventLord.emit(_e.m,r),this.resetLocationAttemptedTracking()}}trackLocationClicked(e,t,s,o){const i=Object.assign({event:pe.u.LOCATION_CLICKED},ue(this.appConfig.countryCode,e),he(t),{formType:ge(s),locationMethod:o,pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,i)}trackABTestParticipated(e,t,s){const o=Object.assign({event:pe.u.AB_TEST_PARTICIPATED,experimentId:e,experimentVariation:t,locationCountry:(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase(),pageType:this.tagManager.pageType},s);this.eventLord.emit(_e.m,o)}trackLocationClickedInCheckout(e,t,s){const o=Object.assign({event:pe.u.LOCATION_CLICKED},ue(this.appConfig.countryCode,e),{pageType:this.tagManager.pageType,formType:t,locationMethod:s});this.eventLord.emit(_e.m,o)}trackCheckoutAddressLoaded(e,t,s,o){const i=Object.assign({event:pe.u.CHECKOUT_ADDRESS_LOADED},ue(this.appConfig.countryCode,e),{dynamicField:Te(t),totalAddresses:s,formType:ge(o),pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,i)}trackAddressUpdated(e,t,s,o){const i=Object.assign({event:pe.u.ADDRESS_UPDATED},ue(this.appConfig.countryCode,e),{dynamicField:Te(s),formType:ge(o),pageType:this.tagManager.pageType,locationMethod:t});this.eventLord.emit(_e.m,i)}trackEditAddressCanceled(e,t,s){const o=Object.assign({event:pe.u.EDIT_ADDRESS_CANCELED},ue(this.appConfig.countryCode,e),{formType:ge(s),pageType:this.tagManager.pageType,locationMethod:t});this.eventLord.emit(_e.m,o)}trackEditOnAddressList(e,t){const s=Object.assign({event:pe.u.ADDRESS_EDIT_CLICKED},ue(this.appConfig.countryCode,e),{formType:ge(t),pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,s)}trackDeletePopupOnAddressList(e,t){const s=Object.assign({event:pe.u.POPUP_SHOWN},ue(this.appConfig.countryCode,e),{formType:ge(t),pageType:this.tagManager.pageType,popupType:"DeleteAddress"});this.eventLord.emit(_e.m,s)}trackMblLoading(e,t){const s=Object.assign({event:pe.u.MBL_SCREEN_LOADED},ue(this.appConfig.countryCode,e),{formType:ge(t),pageType:this.tagManager.pageType});this.eventLord.emit(_e.m,s)}trackGeolocationDialogStatus(e,t){const s={event:pe.u.GEOLOCATION_DIALOG_ACCEPTED,gpsStatus:e,locationDialogueType:"Native",locationDialogueAccepted:t,pageType:this.tagManager.pageType};this.eventLord.emit(_e.m,s)}trackGPSInfoReceived(e,t){const s={event:pe.u.GPS_INFO_RECEIVED,gpsAccuracy:t.accuracy,gpsMaximumWaitTime:null,gpsWaitTime:e,thresholdGpsAccuracy:null,locationLat:t.latitude,locationLon:t.longitude,locationCountry:(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase(),pageType:this.tagManager.pageType};this.eventLord.emit(_e.m,s)}trackSwitchAccountClicked(e,t){void 0===t&&(t="address_profile.clicked");const s=Object.assign({event:t,pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,e),{locationCountry:(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase(),pageUrlPath:location.pathname});this.eventLord.emit(_e.m,s)}trackCorporateLocationClick(e,t){void 0===t&&(t="address_selected.submitted");const s=Object.assign({event:t,pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,e),{locationCountry:(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase(),pageUrlPath:location.pathname});this.eventLord.emit(_e.m,s)}trackCorporateLocationModalShown(e){const t=Object.assign({event:"checkout_address.shown",pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,e),{locationCountry:(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase(),pageUrlPath:location.pathname});this.eventLord.emit(_e.m,t)}trackAddressLabelClicked(e,t,s){void 0===s&&(s=!1);const o=Object.assign({event:pe.u.ADDRESS_LABEL_CLICKED,pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,t),{addressLabelType:e,addressLabelDuplicate:s});this.eventLord.emit(_e.m,o)}trackAddressOtherSubmitted(e,t,s){void 0===s&&(s=!1);const o=Object.assign({event:pe.u.ADDRESS_LABEL_OTHER_SUBMITTED,pageType:this.tagManager.pageType},ue(this.appConfig.countryCode,e),{addressLabelName:t,addressLabelDuplicate:s});this.eventLord.emit(_e.m,o)}trackGeoLocatorInfoReceived(e,t,s){void 0===s&&(s=null),this.eventLord.emit(_e.m,Object.assign({event:pe.u.GEOLOCATOR_INFO_RECEIVED},ue(this.appConfig.countryCode,e),{geolocatorProviderDefault:t,geolocatorProviderFallback:s}))}}class fe{static getInstance(e){return!this.instance&&e&&(this.instance=new fe(e.appConfig,e.xhrProvider,e.tagManager,e.customerId,e.eventLord),this.loadAddressServiceConfig(e.appConfig).then((t=>{this.instance.appConfig=Object.assign({},e.appConfig,{address_config:t}),this.instance.deliverableService=new ee(this.instance.appConfig),this.instance.addressFormatterService=new Y(this.instance.appConfig),this.instance.GTMLocationService=new me(this.instance.eventLord,this.instance.appConfig,this.instance.tagManager,this.instance.customerId),this.instance.locationGtmTrackerService=new le(this.instance.GTMLocationService),this.instance.locateMeService=new ce.Z(this.instance.GTMLocationService),this.instance.googleMapScriptLoader=new de._(this.instance.appConfig),this.instance.geocoderV2Service=te.i.getInstance(this.instance.appConfig)}))),this.instance}static loadAddressServiceConfig(e){return this.instance.getFormConfig(e).then((e=>function(e){var t,s,o,i,a;return{form_id:e.id,autocomplete_min_length:e.autocomplete_min_length,multiline_formatted_address:e.multiline_formatted_address.map((e=>u(e))),compare_addresses_by:e.compare_addresses_by,valid_address_input:e.valid_address_input,autocomplete_type:e.autocomplete_type,format:u(e.formatted_address),form_mappings:e.form_mappings,google_api_response_fields:h(e.fields),geocoder_v2_mapping:g(e.fields),fields:e.fields,map_validations:e.map_validations,required_fields:T(e.required_fields,e.form_mappings),default_location:e.default_location,multiline_checkout_format:null===(t=e.multiline_checkout_format)||void 0===t?void 0:t.map((e=>u(e))),multiline_otp_format:null===(s=e.multiline_otp_format)||void 0===s?void 0:s.map((e=>u(e))),checkout_multiline_formatted_address:null===(o=e.checkout_multiline_formatted_address)||void 0===o?void 0:o.map((e=>u(e))),otp_multiline_formatted_address:null===(i=e.otp_multiline_formatted_address)||void 0===i?void 0:i.map((e=>u(e))),dynamic_field_excluded_cities:null===(a=e.dynamic_fields_properties)||void 0===a?void 0:a.exclude_from_cities,checkout_field:e.checkout_field}}(e)))}static destroy(){delete fe.instance}static removeLocationData(){localStorage.removeItem(m.z.LOCAL_STORAGE_KEY),localStorage.removeItem(m.z.LOCAL_STORAGE_KEY_V2),(0,p.d)(m.z.COOKIE_STORAGE_KEY,"",{expires:new Date(0),path:"/",secure:!0}),this.instance&&this.instance.locationModel&&delete this.instance.locationModel}constructor(e,t,s,o,r){this.geocoding=i,this.google=a,this.addressFormatterService=void 0,this.addressService=void 0,this.deliverableService=void 0,this.locateMeService=void 0,this.locationGtmTrackerService=void 0,this.GTMLocationService=void 0,this.geocoderV2Service=void 0,this.googleMapScriptLoader=void 0,this.locationModel=void 0,this.locationXhrService=void 0,this.user=j,this.deliveryInstructions=void 0,this.appConfig=e,this.xhrProvider=t,this.tagManager=s,this.customerId=o,this.eventLord=r,this.appConfig=e,this.eventLord=r,this.tagManager=s,this.customerId=o,this.locationModel=new F.C,this.locationXhrService=q.getInstance(this.xhrProvider),this.addressService=new J,this.deliverableService=new ee(e),this.addressFormatterService=new Y(e),this.GTMLocationService=new me(r,e,s,this.customerId),this.locationGtmTrackerService=new le(this.GTMLocationService),this.locateMeService=new ce.Z(this.GTMLocationService),this.geocoderV2Service=te.i.getInstance(e),this.googleMapScriptLoader=new de._(e)}setModel(e){if(!this.isValid(e))throw new Error("Model is not a valid locationModel.");{e instanceof F.C?this.locationModel=e:this.locationModel=new F.C(e),this.deliverableService.setModel(this.locationModel),this.locationModel.country_code=(0,l.getIsoCountryCode)(this.appConfig.countryCode.toLowerCase()).toUpperCase();const t=this.getLocationModelDataFromLocationData(e);localStorage.setItem(m.z.LOCAL_STORAGE_KEY,JSON.stringify(Object.assign({},t,{location_type:t.location_type}))),localStorage.setItem(m.z.LOCAL_STORAGE_KEY_V2,JSON.stringify(Object.assign({},e,{location_type:e.location_type}))),(0,p.d)(m.z.COOKIE_STORAGE_KEY,JSON.stringify({longitude:t.longitude,latitude:t.latitude,countryCode:t.country_code}),{path:"/",secure:!0,expires:new Date(Date.now()+6048e5)})}}setCustomerId(e){this.customerId=e,this.GTMLocationService.setCustomerId(this.customerId)}setUser(e){this.user=e}getUser(){return this.user}getConfig(){return this.appConfig}getCustomerId(){return this.customerId}getTagManager(){return this.tagManager}getGoogleMapScriptLoader(){return this.googleMapScriptLoader}getLocationXhrService(){return this.locationXhrService}getAddressService(){return this.addressService}getLocateMeService(){return this.locateMeService}getAddressChangeTracker(){return this.locationGtmTrackerService}getGTMLocationService(){return this.GTMLocationService}getGeocoderV2Service(){return this.geocoderV2Service}getDeliverableService(){return this.deliverableService}getAddressFormatter(){return this.addressFormatterService}getModel(){return this.locationModel}getValidatedModel(e){return function(e,t){const s=t.filter((t=>void 0===e[t]));return 0!==s.length?((0,H.Tf)(new Error("Location Model Validation has failed. Missing following fields: "+s.join(", ")+".")),null):e}(this.getModel(),e)}getEventLord(){return this.eventLord}getAddressSuggester(e){return void 0===e&&(e=!1),this.geocoding.AddressSuggester(this.appConfig,e,this.addressService)}getOTPMapStyle(){return this.google.OTPMapStyles}getVendorMapStyle(){return this.google.VendorMapStyles}loadFromLocal(){try{const e=localStorage.getItem(m.z.LOCAL_STORAGE_KEY),t=localStorage.getItem(m.z.LOCAL_STORAGE_KEY_V2),s=JSON.parse(e||"{}"),o=JSON.parse(t||"{}");if(t&&o.latitude===s.latitude&&o.longitude===s.longitude&&o.formatted_customer_address)this.locationModel=new F.C(o);else if(e){s.formatted_customer_address=s.formattedAddress?s.formattedAddress:s.address,s.id=s.addressId;const e=this.getFormFormat(s);this.locationModel=new F.C(e)}}catch(e){}}setDeliveryInstructions(e){this.deliveryInstructions=e}getDeliveryInstructions(){return this.deliveryInstructions}onPlaceOrderClick(){const e=this.getModel();this.getDeliveryInstructions()&&(this.setModel(Object.assign({},e,{delivery_instructions:this.getDeliveryInstructions()})),this.getGTMLocationService().trackSubmittedLocation(this.getModel(),"fielddelivery_instructions"))}async setFromLatLng(e,t){if(Number(e)===Number(this.locationModel.latitude)&&Number(t)===Number(this.locationModel.longitude))return Promise.resolve(this.locationModel);await fe.loadAddressServiceConfig(this.appConfig);const s=await te.i.getInstance().getReverse({lat:parseFloat(e),lng:parseFloat(t)});return this.setModel(s),s}getCheckoutFormFormat(){return _.k.error({message:"`getCheckoutFormFormat` is deprecated, use `getFormFormat`."}),this.getFormFormat()}getFormFormat(e){const t=Object.assign({},e||this.locationModel),s=this.addressFormatterService.getFormMappings();return c()(s,((e,s)=>{e!==s&&(t[s]?t[e]=t[s]:t[s]=t[e])})),t}setFromCheckoutFormat(e){return _.k.error({message:"`setFromCheckoutFormat` is deprecated, use `setFromFormat`."}),this.setFromFormat(e)}getFormattedAddress(e){return this.addressFormatterService.getFormattedAddress(e)}getModelData(e,t){return Object.assign({},t,{address:e,addressId:t.id,formattedAddress:e,street:t.street,building:t.building,postcode:t.postcode,city:t.city,city_id:t.city_id,latitude:t.latitude,longitude:t.longitude,campus:n()(t,"campus",""),company:n()(t,"company",""),delivery_instructions:n()(t,"delivery_instructions",""),corporate_reference_id:n()(t,"corporate_reference_id",""),isCompanyAddress:t.isCompanyAddress,areas:t.areas,district:t.district,entrance:t.entrance,flat_number:t.flat_number,floor:t.floor,id:t.id,intercom:t.intercom,room:t.room,structure:t.structure,countryCode:t.country_code})}getLocationModelDataFromLocationData(e){const t=this.addressFormatterService.getFormMappings(),s=this.getFormattedAddress(e),o=this.getModelData(s,e);return c()(t,((t,s)=>{o[s]=e[t]})),o.formattedAddress=e.formatted_customer_address,o}setFromFormat(e){const t=this.getLocationModelDataFromLocationData(e);this.setModel(new F.C(t))}getAddressErrorFields(e){if(e)return(0,E.t9)(e,this.appConfig);_.k.error({message:"location model not found : "+e})}getCoordinatesError(e){return(0,E.Qy)(e)}isAddressValid(e,t){return(0,E.NX)(e,this.appConfig,t)}isValid(e){const t=e||this.locationModel;return!(!t.latitude||!t.longitude)}async getFormConfig(e){void 0===e&&(e=this.appConfig);return(0,V.YX)(e)}async getCheckoutAddress(e,t){return await fe.loadAddressServiceConfig(this.appConfig),this.addressFormatterService.getCheckoutFormattedAddress(e,t)}async getOtpAddress(e,t){return await fe.loadAddressServiceConfig(this.appConfig),this.addressFormatterService.getOTPFormattedAddress(e,t)}async isLocationWithinPlatformCountry(e,t){try{const s=await ne(e,t);return!s||!s.iso2||s.iso2.toLowerCase()===this.appConfig.isoCountryCode}catch(e){return!0}}}function Ne(e){if(!e.appConfig)throw new Error("Location model has to be created with app config");const t=fe.getInstance(e);return t.loadFromLocal(),t}fe.instance=void 0},f481ef00e50d282f38a9:(e,t,s)=>{"use strict";s.d(t,{P:()=>i,u:()=>o});let o=function(e){return e.LOCATION_CLICKED="location.clicked",e.LOCATION_ATTEMPTED="location.attempted",e.ADDRESS_UPDATE_CLICKED="address_update.clicked",e.MAP_LOADED="map.loaded",e.ADDRESS_SUBMITTED="address.submitted",e.ADDRESS_UPDATE_SUBMITTED="address_update.submitted",e.ADDRESS_ERROR_SHOWN="address_error.shown",e.GEOLOCATION_CLICKED="geolocation.clicked",e.AB_TEST_PARTICIPATED="ab_test.participated",e.CHECKOUT_ADDRESS_LOADED="checkout_address.loaded",e.ADDRESS_UPDATED="address.updated",e.EDIT_ADDRESS_CANCELED="address_edit_cancel.clicked",e.GEOLOCATION_DIALOG_ACCEPTED="geolocation_dialogue.accepted",e.GPS_INFO_RECEIVED="gps_info.received",e.ADDRESS_LABEL_CLICKED="address_label.clicked",e.ADDRESS_LABEL_OTHER_SUBMITTED="address_label_other.submitted",e.GEOLOCATOR_INFO_RECEIVED="geolocator_info.received",e.ADDRESS_EDIT_CLICKED="address_edit.clicked",e.POPUP_SHOWN="popup.shown",e.MBL_SCREEN_LOADED="mbl_screen.loaded",e.TOOLTIP_SOURCE="address_tooltip",e.ADDRESS_BOX_SOURCE="address_location_box",e.RECOMMENDATION_SHEET_LOADED="recommendation_sheet_loaded",e.RECOMMENDATION_SHEET_DISMISSED="recommendation_sheet_dismissed",e}({}),i=function(e){return e.NEW_ADDRESS="NewAddress",e.EDIT_ADDRESS="EditAddress",e.AVAILABLE_ADDRESS_LIST="AvailableAddressesList",e.NA="NA",e}({})},"77dd625b88c8b2482c64":(e,t,s)=>{"use strict";s.d(t,{KK:()=>i,PB:()=>o,ps:()=>a});let o=function(e){return e[e.VAR1=3e5]="VAR1",e[e.VAR2=6e5]="VAR2",e}({}),i=function(e){return e.GPS_PERMISSION_DENIED="permission_denied",e.GPS_ENABLED="enabled",e}({}),a=function(e){return e.CONTROL="Control",e.VARIATION1="Variation1",e.VARIATION2="Variation2",e.ORIGINAL="Variation3",e}({})},"7cb6dd6c261a56cdba1f":(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var o=s("9302435e81c621e827fb");const i=()=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32","data-testid":"user-location-pin",children:(0,o.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,o.jsx)("ellipse",{cx:"16",cy:"29",fill:"#000",fillOpacity:".16",rx:"5",ry:"2"}),(0,o.jsx)("path",{fill:"#333",d:"M5 11.784C5 5.828 9.925 1 16 1s11 4.828 11 10.784c0 5.783-4.644 10.504-10.476 10.772V29h-1.048v-6.444C9.644 22.288 5 17.567 5 11.784z"}),(0,o.jsx)("path",{fill:"#FFF",fillRule:"nonzero",d:"M16 5a3 3 0 110 6 3 3 0 010-6z"}),(0,o.jsx)("path",{fill:"#333",fillRule:"nonzero",d:"M16 6a2 2 0 100 4 2 2 0 000-4z"}),(0,o.jsx)("path",{fill:"#FFF",fillRule:"nonzero",d:"M16 10a6 6 0 016 6v1H10v-1a6 6 0 016-6z"}),(0,o.jsx)("path",{fill:"#333",fillRule:"nonzero",d:"M16 11a5 5 0 00-4.995 4.783L11 16h10a5 5 0 00-4.783-4.995L16 11z"})]})});i.displayName="UserLocationPin"},bfd9b1f78f171827d559:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});let o=function(e){return e.B2C="b2c",e.MFE="mfe",e}({})},"92dfcc2420a73bb8a53b":(e,t,s)=>{"use strict";s.d(t,{Q:()=>o,w:()=>i});let o=function(e){return e.location_map_title="location.map.title",e.input_label_experiment="postal_code.your_postal_code",e.map_tooltip="location.map.tooltip",e.map_submit_btn="NEXTGEN_MAP_SUBMIT",e.add_new_address_title="add_new_address_title",e.no_saved_addresses_hint="no_saved_addresses_hint",e.error_empty_input="location.error.address_empty",e.error_invalid_address_not_found="location.error.address_not_found",e.error_invalid_address_not_found_experiment="onboarding_error_new",e.error_invalid_address_country_not_supported="location.error.country_not_supported",e.error_incomplete_address_building_street="location.error.building_street",e.error_incomplete_address_street="location.error.street",e.error_incomplete_address_building="location.error.building",e.error_incomplete_address_postcode="location.error.postcode",e.error_no_geolocation="location.error.no_geolocation",e.pickup_near_address="address.pickup_near_address",e.dine_in_near_address="address.dine_in_near_address",e.delivery_by_city="address.delivery_by_city",e.switch_to_personal="ACCOUNT_LINKING_SWITCH_TO_PERSONAL",e.select_company_address="ACCOUNT_LINKING_SELECT_COMPANY_ADDRESS",e.NEXTGEN_HOME="NEXTGEN_HOME",e.NEXTGEN_WORK="NEXTGEN_WORK",e.address_label_partner="address_label_partner",e.select_your_address_label="select_your_address_label",e.formatted_address_floor="formatted_address_floor",e.address_label_new_address="address_label_new_address",e.saved_addresses_label="saved_addresses_label",e.A11Y_ICON_CLOSE="A11Y_ICON_CLOSE",e.A11Y_ICON_LOCATE_ME="A11Y_ICON_LOCATE_ME",e.location_selected_location_title="location.selected_location_title",e.location_selected_location_text="location.selected_location_text",e.location_current_location_cta="location.current_location_cta",e.location_error_no_result_text="location.error.no_result_text",e.location_button_confirm="location.button_confirm",e.location_modal_title_location_settings="location.modal.loc_settings.title",e.location_modal_cta_location_settings="location.modal.loc_settings.cta",e.location_modal_loc_settings_chrome_list="location.modal.loc_settings.chrome.list",e.location_modal_loc_settings_chrome_des_list_1a="location.modal.loc_settings.chrome.des.list_1a",e.location_modal_loc_settings_chrome_des_list_1b="location.modal.loc_settings.chrome.des.list_1b",e.location_modal_loc_settings_chrome_des_list_2="location.modal.loc_settings.chrome.des.list_2",e.location_modal_loc_settings_ios_list="location.modal.loc_settings.ios.list",e.location_modal_loc_settings_ios_list_1="location.modal.loc_settings.ios.list_1",e.location_modal_loc_settings_chrome_ios_list_2="location.modal.loc_settings.chrome.ios.list_2",e.location_modal_loc_settings_ios_list_3="location.modal.loc_settings.ios.list_3",e.location_modal_loc_settings_chrome_adr_list_1a="location.modal.loc_settings.chrome.adr.list_1a",e.location_modal_loc_settings_chrome_adr_list_1b="location.modal.loc_settings.chrome.adr.list_1b",e.location_modal_loc_settings_chrome_adr_list_2="location.modal.loc_settings.chrome.adr.list_2",e.location_modal_loc_settings_chrome_adr_list_3="location.modal.loc_settings.chrome.adr.list_3",e.location_modal_loc_settings_firefox_list="location.modal.loc_settings.firefox.list",e.location_modal_loc_settings_firefox_des_list_2="location.modal.loc_settings.firefox.des.list_2",e.location_modal_loc_settings_firefox_des_list_3="location.modal.loc_settings.firefox.des.list_3",e.location_modal_loc_settings_firefox_des_list_4="location.modal.loc_settings.firefox.des.list_4",e.location_modal_loc_settings_firefox_adr_list_1a="location.modal.loc_settings.firefox.adr.list_1a",e.location_modal_loc_settings_firefox_adr_list_1b="location.modal.loc_settings.firefox.adr.list_1b",e.location_modal_loc_settings_firefox_adr_list_2="location.modal.loc_settings.firefox.adr.list_2",e.location_modal_loc_settings_firefox_adr_list_3="location.modal.loc_settings.firefox.adr.list_3",e.location_modal_loc_settings_firefox_ios_list_2="location.modal.loc_settings.firefox.ios.list_2",e.location_modal_loc_settings_safari_des_list="location.modal.loc_settings.safari.des.list",e.location_modal_loc_settings_safari_des_list_1a="location.modal.loc_settings.safari.des.list_1a",e.location_modal_loc_settings_safari_des_list_1b="location.modal.loc_settings.safari.des.list_1b",e.location_modal_loc_settings_safari_des_list_2="location.modal.loc_settings.safari.des.list_2",e.location_modal_loc_settings_safari_des_list_3="location.modal.loc_settings.safari.des.list_3",e.location_modal_loc_settings_safari_ios_list_2="location.modal.loc_settings.safari.ios.list_2",e.location_error_cta_no_geolocation="location.error.cta.no_geolocation",e.location_modal_loc_settings_safari_des_list_3a="location.modal.loc_settings.safari.des.list_3a",e.location_modal_loc_settings_safari_des_list_3b="location.modal.loc_settings.safari.des.list_3b",e.location_modal_loc_settings_firefox_des_list_1="location.modal.loc_settings.firefox.des.list_1",e.location_modal_loc_settings_firefox_des_list_2a="location.modal.loc_settings.firefox.des.list_2a",e.location_modal_loc_settings_firefox_des_list_2b="location.modal.loc_settings.firefox.des.list_2b",e.map_noresult_suggestion_title="map_noresult_suggestion_title",e.map_noresult_suggestion_text="map_noresult_suggestion_text",e.map_noresult_correction_text="map_noresult_correction_text",e.map_noresult_error_title="map_noresult_error_title",e.map_noresult_error_text="map_noresult_error_text",e.map_noresult_error_action="map_noresult_error_action",e.NEXTGEN_delivery_instructions="NEXTGEN_delivery_instructions",e.mbl_submit_btn="NEXTGEN_MBL_SUBMIT",e.address_details_title="address_details_title",e.NEXTGEN_MBL_FLOOR_REQUIRED="NEXTGEN_MBL_FLOOR_REQUIRED",e.NEXTGEN_MBL_BLOCK_FORMATTING="NEXTGEN_MBL_BLOCK_FORMATTING",e.NEXTGEN_MBL_FLOOR_FORMATTING="NEXTGEN_MBL_FLOOR_FORMATTING",e.NEXTGEN_MBL_INTERCOM_FORMATTING="NEXTGEN_MBL_INTERCOM_FORMATTING",e.NEXTGEN_MBL_COMPANY_FORMATTING="NEXTGEN_MBL_COMPANY_FORMATTING",e.NEXTGEN_MBL_DELIVERY_INSTRUCTIONS_FORMATTING="NEXTGEN_MBL_DELIVERY_INSTRUCTIONS_FORMATTING",e.NEXTGEN_MBL_FLAT_FORMATTING="NEXTGEN_MBL_FLAT_FORMATTING",e.NEXTGEN_MBL_ENTRANCE_FORMATTING="NEXTGEN_MBL_ENTRANCE_FORMATTING",e.NEXTGEN_MBL_APARTMENT_FORMATTING="NEXTGEN_MBL_APARTMENT_FORMATTING",e.NEXTGEN_MBL_APARTMENT_ERROR="NEXTGEN_MBL_APARTMENT_ERROR",e.NEXTGEN_EVENT_BANNER_LESS="NEXTGEN_EVENT_BANNER_LESS",e.NEXTGEN_EVENT_BANNER_MORE="NEXTGEN_EVENT_BANNER_MORE",e.NEXTGEN_COMPANY="NEXTGEN_company",e.address_label_duplicate="address_label_duplicate",e.address_label_other="address_label_other",e.address_label_other_field="address_label_other_field",e.address_label_title="address_label_title",e.CANCEL_ADDRESS_MODAL_CONFIRM="CANCEL_ADDRESS_MODAL_CONFIRM",e.CANCEL_ADDRESS_MODAL_CONTENT="CANCEL_ADDRESS_MODAL_CONTENT",e.CANCEL_ADDRESS_MODAL_REJECT="CANCEL_ADDRESS_MODAL_REJECT",e.CANCEL_ADDRESS_MODAL_TITLE="CANCEL_ADDRESS_MODAL_TITLE",e.CONTENT_CHAIN_DOES_NOT_DELIVER_TO_YOUR_LOCATION="content.chain_does_not_deliver_to_your_location",e.DELIVERY_INFORMATION_ADDRESS_NOT_VALID="delivery_information.address_not_valid",e.NEXTGEN_building="NEXTGEN_building",e.NEXTGEN_CLOSE="NEXTGEN_CLOSE",e.NEXTGEN_CHECKOUT_NOT_DELIVERABLE="NEXTGEN_CHECKOUT_NOT_DELIVERABLE",e.NEXTGEN_COUT_COMPANY_NAME_OPTIONAL_HINT="NEXTGEN_COUT_COMPANY_NAME_OPTIONAL_HINT",e.address_phone_number_error="address_phone_number_error",e.address_phone_number_hint_text="address_phone_number_hint_text",e.address_phone_number_prefilled_value="address_phone_number_prefilled_value",e.NEXTGEN_entrance="NEXTGEN_entrance",e.NEXTGEN_FLAT_LABEL="NEXTGEN_FLAT_LABEL",e.NEXTGEN_FLOOR_LABEL="NEXTGEN_FLOOR_LABEL",e.address_field_block="address_field_block",e.NEXTGEN_INTERCOM_LABEL="NEXTGEN_INTERCOM_LABEL",e.NEXTGEN_MBL_EDIT_MAP="NEXTGEN_MBL_EDIT_MAP",e.NEXTGEN_MBL_REQUIRED_ERROR="NEXTGEN_MBL_REQUIRED_ERROR",e.NEXTGEN_NONE="NEXTGEN_NONE",e.VALIDATIONS_ERROR_CHECKOUT_CUSTOMER_BUILDING="validations.error.checkout.customer_building",e.NEXTGEN_address_line2="NEXTGEN_address_line2",e.NEXTGEN_address_line4="NEXTGEN_address_line4",e.NEXTGEN_address_line1="NEXTGEN_address_line1",e.NEXTGEN_address_line3="NEXTGEN_address_line3",e.NEXTGEN_address_line5="NEXTGEN_address_line5",e.NEXTGEN_MBL_DF_BUILDING_TITLE="NEXTGEN_MBL_DF_BUILDING_TITLE",e.NEXTGEN_MBL_DF_STREET_TITLE="NEXTGEN_MBL_DF_STREET_TITLE",e.NEXTGEN_MBL_DF_STREET_ERROR="NEXTGEN_MBL_DF_STREET_ERROR",e.NEXTGEN_MBL_DF_STREET="NEXTGEN_MBL_DF_STREET",e.NEXTGEN_MBL_DF_BUILDING_ERROR="NEXTGEN_MBL_DF_BUILDING_ERROR",e.NEXTGEN_MBL_DF_BUILDING="NEXTGEN_MBL_DF_BUILDING",e.NEXTGEN_MBL_DF_AREA_TITLE="NEXTGEN_MBL_DF_AREA_TITLE",e.NEXTGEN_MBL_DF_AREA_ERROR="NEXTGEN_MBL_DF_AREA_ERROR",e.NEXTGEN_MBL_DF_SUBURB_ERROR="NEXTGEN_MBL_DF_SUBURB_ERROR",e.NEXTGEN_MBL_DF_SUBURB="NEXTGEN_MBL_DF_SUBURB",e.NEXTGEN_MBL_DF_SUBURB_TITLE="NEXTGEN_MBL_DF_SUBURB_TITLE",e.NEXTGEN_POSTCODE_ERROR="NEXTGEN_POSTCODE_ERROR",e.NEXTGEN_MBL_DF_AREA="NEXTGEN_MBL_DF_AREA",e.NEXTGEN_MBL_DF_STREET_NUMBER_TITLE="NEXTGEN_MBL_DF_STREET_NUMBER_TITLE",e.NEXTGEN_MBL_DF_STREET_NUMBER_ERROR="NEXTGEN_MBL_DF_STREET_NUMBER_ERROR",e.NEXTGEN_MBL_DF_STREET_NUMBER="NEXTGEN_MBL_DF_STREET_NUMBER",e.DELETE_ADDRESS_MODAL_TITLE="DELETE_ADDRESS_MODAL_title",e.DELETE_ADDRESS_MODAL_MESSAGE="DELETE_ADDRESS_MODAL_MESSAGE",e.DELETE_ADDRESS_MODAL_CONFIRM="DELETE_ADDRESS_MODAL_CONFIRM",e.DELETE_ADDRESS_MODAL_CANCEL="DELETE_ADDRESS_MODAL_CANCEL",e.EDIT_ADDRESS_BUTTON_TEXT="EDIT_ADDRESS_BUTTON_TEXT",e.DELETE_ADDRESS_BUTTON_TEXT="DELETE_ADDRESS_BUTTON_TEXT",e.delivery_address_title="title.delivery_address",e.pickup_title="text.checkout.pickup_address",e.add_new_address_link="link.add_new_address",e.cancel_link="link.cancel",e.NEXTGEN_NOTE_TO_RIDER="NEXTGEN_NOTE_TO_RIDER",e.INVALID_ADDRESS_ERROR="delivery_information.address_not_valid",e.A11Y_ICON_DELETE="A11Y_ICON_DELETE",e.A11Y_ICON_EDIT="A11Y_ICON_EDIT",e.VIEW_SAVED_ADDRESS_LINK="VIEW_SAVED_ADDRESS_LINK",e.SAVED_ADDRESS_MODAL_TITLE="SAVED_ADDRESS_MODAL_TITLE",e.SAVED_ADDRESS_MODAL_CONFIRM="SAVED_ADDRESS_MODAL_CONFIRM",e.SAVED_ADDRESS_MODAL_CANCEL="SAVED_ADDRESS_MODAL_CANCEL",e.NEXTGEN_ApiAddressUnknownUser="NEXTGEN_ApiAddressUnknownUser",e.NEXTGEN_ApiAddressNotValidPhoneNumber="NEXTGEN_ApiAddressNotValidPhoneNumber",e.NEXTGEN_ApiAddressCustomerDoesNotExists="NEXTGEN_ApiAddressCustomerDoesNotExists",e.NEXTGEN_ApiAddressUnableToDecodeInputData="NEXTGEN_ApiAddressUnableToDecodeInputData",e.NEXTGEN_ApiAddressUnableToGetLatLonFromInput="NEXTGEN_ApiAddressUnableToGetLatLonFromInput",e.NEXTGEN_ApiAddressUnableToGetCity="NEXTGEN_ApiAddressUnableToGetCity",e.NEXTGEN_ApiAddressUnableToGetCustomerAddress="NEXTGEN_ApiAddressUnableToGetCustomerAddress",e.NEXTGEN_ApiAddressUnableToEditCustomerAddress="NEXTGEN_ApiAddressUnableToEditCustomerAddress",e.NEXTGEN_MBL_VALIDATION="NEXTGEN_MBL_VALIDATION",e.mbl_map_submit_btn="NEXTGEN_MBL_MAP_SUBMIT",e.NEXTGEN_ADDRESS_UNSAVED_ERROR="NEXTGEN_ADDRESS_UNSAVED_ERROR",e.NEXTGEN_MBL_FLOOR_OPTIONAL="NEXTGEN_MBL_FLOOR_OPTIONAL",e.NEXTGEN_floor="NEXTGEN_floor",e.NEXTGEN_intercom="NEXTGEN_intercom",e.NEXTGEN_MBL_APARTMENT="NEXTGEN_MBL_APARTMENT",e.NEXTGEN_MBL_ENTRANCE_OPTIONAL="NEXTGEN_MBL_ENTRANCE_OPTIONAL",e.NEXTGEN_address_other="NEXTGEN_address_other",e.NEXTGEN_postcode="NEXTGEN_postcode",e.NEXTGEN_city="NEXTGEN_city",e.NEXTGEN_MBL_SUBMIT="NEXTGEN_MBL_SUBMIT",e.NEXTGEN_flat_number="NEXTGEN_flat_number",e.NEXTGEN_country_code="NEXTGEN_country_code",e.NEXTGEN_MBL_BLOC="NEXTGEN_MBL_BLOC",e.navbar_locationinput_location="navbar_locationinput_location",e.navbar_locationinput_tooltip="navbar_locationinput_tooltip",e.NEXTGEN_DELIVERY_INSTRUCTIONS="NEXTGEN_DELIVERY_INSTRUCTIONS",e.LOC_HYP_TOP_TITLE="LOC_HYP_TOP_TITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_TITLE="NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_TITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_SUBTITLE="NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_SUBTITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_TITLE="NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_TITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_SUBTITLE="NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_SUBTITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_TITLE="NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_TITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_SUBTITLE="NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_SUBTITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_OTHER_TITLE="NEXTGEN_MBL_PROPERTY_TYPE_OTHER_TITLE",e.NEXTGEN_MBL_PROPERTY_TYPE_OTHER_SUBTITLE="NEXTGEN_MBL_PROPERTY_TYPE_OTHER_SUBTITLE",e.LOC_NEXT="LOC_NEXT",e.NEXTGEN_MBL_SECTION_map_fields_TITLE="NEXTGEN_MBL_SECTION_map_fields_TITLE",e.NEXTGEN_MBL_SECTION_local_fields_TITLE="NEXTGEN_MBL_SECTION_local_fields_TITLE",e.LOC_SAVE_AND_CONTINUE="LOC_SAVE_AND_CONTINUE",e.type_of_place_title="type_of_place_title",e.NEXTGEN_MBL_SECTION_HOUSE_BUILDING_HINT="NEXTGEN_MBL_SECTION_HOUSE_BUILDING_HINT",e.NEXTGEN_MBL_SECTION_APT_BUILDING_HINT="NEXTGEN_MBL_SECTION_APT_BUILDING_HINT",e.NEXTGEN_MBL_SECTION_OFFICE_BUILDING_HINT="NEXTGEN_MBL_SECTION_OFFICE_BUILDING_HINT",e.NEXTGEN_MBL_SECTION_OTHER_BUILDING_HINT="NEXTGEN_MBL_SECTION_OTHER_BUILDING_HINT",e.NEXTGEN_MBL_SECTION_HOUSE_FLAT_HINT="NEXTGEN_MBL_SECTION_HOUSE_FLAT_HINT",e.NEXTGEN_MBL_SECTION_APT_FLAT_HINT="NEXTGEN_MBL_SECTION_APT_FLAT_HINT",e.NEXTGEN_MBL_SECTION_FLAT_FLAT_HINT="NEXTGEN_MBL_SECTION_FLAT_FLAT_HINT",e.NEXTGEN_MBL_SECTION_OTHER_FLAT_HINT="NEXTGEN_MBL_SECTION_OTHER_FLAT_HINT",e.NEXTGEN_MBL_SECTION_HOUSE_COMPANY_HINT="NEXTGEN_MBL_SECTION_HOUSE_COMPANY_HINT",e.NEXTGEN_MBL_SECTION_APT_COMPANY_HINT="NEXTGEN_MBL_SECTION_APT_COMPANY_HINT",e.NEXTGEN_MBL_SECTION_FLAT_COMPANY_HINT="NEXTGEN_MBL_SECTION_FLAT_COMPANY_HINT",e.NEXTGEN_MBL_SECTION_OTHER_COMPANY_HINT="NEXTGEN_MBL_SECTION_OTHER_COMPANY_HINT",e.NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_HINT="NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_HINT",e.NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_HINT="NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_HINT",e.NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_HINT="NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_HINT",e.NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_HINT="NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_HINT",e.NEXTGEN_MBL_SECTION_HOUSE_FLOOR_HINT="NEXTGEN_MBL_SECTION_HOUSE_FLOOR_HINT",e.NEXTGEN_MBL_SECTION_APT_FLOOR_HINT="NEXTGEN_MBL_SECTION_APT_FLOOR_HINT",e.NEXTGEN_MBL_SECTION_FLAT_FLOOR_HINT="NEXTGEN_MBL_SECTION_FLAT_FLOOR_HINT",e.NEXTGEN_MBL_SECTION_OTHER_FLOOR_HINT="NEXTGEN_MBL_SECTION_OTHER_FLOOR_HINT",e.NEXTGEN_MBL_ADDRESS_LINE_1_HINT="NEXTGEN_MBL_ADDRESS_LINE_1_HINT",e.NEXTGEN_MBL_ADDRESS_LINE_2_HINT="NEXTGEN_MBL_ADDRESS_LINE_2_HINT",e.NEXTGEN_MBL_ADDRESS_LINE_3_HINT="NEXTGEN_MBL_ADDRESS_LINE_3_HINT",e.NEXTGEN_MBL_DELIVERY_INSTRUCTION_HINT="NEXTGEN_MBL_DELIVERY_INSTRUCTION_HINT",e.NEXTGEN_MBL_SECTION_HOUSE_BUILDING_LABEL="NEXTGEN_MBL_SECTION_HOUSE_BUILDING_LABEL",e.NEXTGEN_MBL_SECTION_APT_BUILDING_LABEL="NEXTGEN_MBL_SECTION_APT_BUILDING_LABEL",e.NEXTGEN_MBL_SECTION_FLAT_BUILDING_LABEL="NEXTGEN_MBL_SECTION_FLAT_BUILDING_LABEL",e.NEXTGEN_MBL_SECTION_OTHER_BUILDING_LABEL="NEXTGEN_MBL_SECTION_OTHER_BUILDING_LABEL",e.NEXTGEN_MBL_SECTION_HOUSE_FLAT_LABEL="NEXTGEN_MBL_SECTION_HOUSE_FLAT_LABEL",e.NEXTGEN_MBL_SECTION_APT_FLAT_LABEL="NEXTGEN_MBL_SECTION_APT_FLAT_LABEL",e.NEXTGEN_MBL_SECTION_FLAT_FLAT_LABEL="NEXTGEN_MBL_SECTION_FLAT_FLAT_LABEL",e.NEXTGEN_MBL_SECTION_OTHER_FLAT_LABEL="NEXTGEN_MBL_SECTION_OTHER_FLAT_LABEL",e.NEXTGEN_MBL_SECTION_HOUSE_COMPANY_LABEL="NEXTGEN_MBL_SECTION_HOUSE_COMPANY_LABEL",e.NEXTGEN_MBL_SECTION_APT_COMPANY_LABEL="NEXTGEN_MBL_SECTION_APT_COMPANY_LABEL",e.NEXTGEN_MBL_SECTION_FLAT_COMPANY_LABEL="NEXTGEN_MBL_SECTION_FLAT_COMPANY_LABEL",e.NEXTGEN_MBL_SECTION_OTHER_COMPANY_LABEL="NEXTGEN_MBL_SECTION_OTHER_COMPANY_LABEL",e.NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_LABEL="NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_LABEL",e.NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_LABEL="NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_LABEL",e.NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_LABEL="NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_LABEL",e.NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_LABEL="NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_LABEL",e.NEXTGEN_MBL_SECTION_HOUSE_FLOOR_LABEL="NEXTGEN_MBL_SECTION_HOUSE_FLOOR_LABEL",e.NEXTGEN_MBL_SECTION_APT_FLOOR_LABEL="NEXTGEN_MBL_SECTION_APT_FLOOR_LABEL",e.NEXTGEN_MBL_SECTION_FLAT_FLOOR_LABEL="NEXTGEN_MBL_SECTION_FLAT_FLOOR_LABEL",e.NEXTGEN_MBL_SECTION_OTHER_FLOOR_LABEL="NEXTGEN_MBL_SECTION_OTHER_FLOOR_LABEL",e.NEXTGEN_MBL_ADDRESS_LINE_1_LABEL="NEXTGEN_MBL_ADDRESS_LINE_1_LABEL",e.NEXTGEN_MBL_ADDRESS_LINE_2_LABEL="NEXTGEN_MBL_ADDRESS_LINE_2_LABEL",e.NEXTGEN_MBL_ADDRESS_LINE_3_LABEL="NEXTGEN_MBL_ADDRESS_LINE_3_LABEL",e.NEXTGEN_MBL_DELIVERY_INSTRUCTION_LABEL="NEXTGEN_MBL_DELIVERY_INSTRUCTION_LABEL",e.NEXTGEN_CONFIRM="NEXTGEN_CONFIRM",e.NEXTGEN_BACK="NEXTGEN_BACK",e.location_screens_delivery_is_based_on_pin="location-screens-delivery-is-based-on-pin",e.location_screens_delivery_is_based_on_pin_edit_cta="location-screens-delivery-is-based-on-pin–edit-cta",e.location_screens_delivery_is_based_on_pin_edit_cta_mbl="location-screens-delivery-is-based-on-pin-edit-cta-mbl",e.location_screens_delivery_is_based_on_pin_three_line="location-screens-delivery-is-based-on-pin-three-line",e.location_screens_pin_refinement_title="location-screens-pin-refinement-title",e.location_screens_pin_refinement_subtitle="location-screens-pin-refinement-subtitle",e.location_screens_map_refinement_tooltip="location-screens-map-refinement-tooltip",e.location_screens_edit_text="location-screens-edit-text",e.location_screens_edit_text_address="location-screens-edit-text-address",e.location_screens_edit_text_message="location-screens-edit-text-message",e.location_screens_search_new_address="location-screens-search-new-address",e.location_screens_enter_an_address="location-screens-enter-an-address",e.NEXTGEN_ApiAddressUserMaxAddressLimit="NEXTGEN_ApiAddressUserMaxAddressLimit",e.NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE="NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE",e.address_deleted_toast="address_deleted_toast",e.labeled_address_deleted_toast="labeled_address_deleted_toast",e.buttons_change="buttons.change",e.location_input_placeholder="Location_Placeholder",e.NEXTGEN_RDP_NO_LOCATION_TOOLTIP_TEXT="NEXTGEN_RDP_NO_LOCATION_TOOLTIP_TEXT",e.NEXTGEN_LOCATION_ND_ERROR_CUISINE_TITLE="NEXTGEN_LOCATION_ND_ERROR_CUISINE_TITLE",e.NEXTGEN_LOCATION_ND_ERROR_CUISINE_SUBTITLE="NEXTGEN_LOCATION_ND_ERROR_CUISINE_SUBTITLE",e.NEXTGEN_LOCATION_ND_ERROR_CTA="NEXTGEN_LOCATION_ND_ERROR_CTA",e.NEXTGEN_LOCATION_ND_ERROR_BACK="NEXTGEN_LOCATION_ND_ERROR_BACK",e.NEXTGEN_PREORDER_LABEL="NEXTGEN_PREORDER_LABEL",e["vendor.delivery_time_suffix"]="vendor.delivery_time_suffix",e.LS_CHECKOUT_DI_TAG_TITLE_CONTACTLESS_DELIVERY="LS_CHECKOUT_DI_TAG_TITLE_CONTACTLESS_DELIVERY",e.LS_CHECKOUT_DI_TAG_TITLE_CALL_ME="LS_CHECKOUT_DI_TAG_TITLE_CALL_ME",e.LS_CHECKOUT_DI_TAG_TITLE_RING_BELL="LS_CHECKOUT_DI_TAG_TITLE_RING_BELL",e.LS_CHECKOUT_DI_TAG_TOOLTIP_CONTACTLESS_DELIVERY="LS_CHECKOUT_DI_TAG_TOOLTIP_CONTACTLESS_DELIVERY",e.LS_CHECKOUT_DI_TAG_TOOLTIP_CALL_ME="LS_CHECKOUT_DI_TAG_TOOLTIP_CALL_ME",e.LS_CHECKOUT_DI_TAG_TOOLTIP_RING_BELL="LS_CHECKOUT_DI_TAG_TOOLTIP_RING_BELL",e.NEXTGEN_MBL_DISTRICT_ERROR="NEXTGEN_MBL_DISTRICT_ERROR",e.NEXTGEN_MBL_DISTRICT_HINT="NEXTGEN_MBL_DISTRICT_HINT",e.NEXTGEN_MBL_DISTRICT_LABEL="NEXTGEN_MBL_DISTRICT_LABEL",e}({});const i={location_map_title:"location_map_title",input_label_experiment:"input_label_experiment",map_tooltip:"map_tooltip",map_submit_btn:"map_submit_btn",add_new_address_title:"add_new_address_title",no_saved_addresses_hint:"no_saved_addresses_hint",error_empty_input:"error_empty_input",error_invalid_address_not_found:"error_invalid_address_not_found",error_invalid_address_not_found_experiment:"error_invalid_address_not_found_experiment",error_invalid_address_country_not_supported:"error_invalid_address_country_not_supported",error_incomplete_address_building_street:"error_incomplete_address_building_street",error_incomplete_address_street:"error_incomplete_address_street",error_incomplete_address_building:"error_incomplete_address_postcode",error_incomplete_address_postcode:"error_incomplete_address_postcode",error_no_geolocation:"error_no_geolocation",pickup_near_address:"pickup_near_address",dine_in_near_address:"dine_in_near_address",delivery_by_city:"delivery_by_city",switch_to_personal:"switch_to_personal",select_company_address:"select_company_address",NEXTGEN_HOME:"NEXTGEN_HOME",NEXTGEN_WORK:"NEXTGEN_WORK",address_label_partner:"address_label_partner",select_your_address_label:"select_your_address_label",formatted_address_floor:"formatted_address_floor",address_label_new_address:"address_label_new_address",saved_addresses_label:"saved_addresses_label",A11Y_ICON_CLOSE:"A11Y_ICON_CLOSE",A11Y_ICON_LOCATE_ME:"A11Y_ICON_LOCATE_ME",location_selected_location_title:"location_selected_location_title",location_selected_location_text:"location_selected_location_text",location_current_location_cta:"location_current_location_cta",location_error_no_result_text:"location_error_no_result_text",location_button_confirm:"location_button_confirm",NEXTGEN_delivery_instructions:"NEXTGEN_delivery_instructions",mbl_submit_btn:"mbl_submit_btn",NEXTGEN_MBL_FLOOR_REQUIRED:"NEXTGEN_MBL_FLOOR_REQUIRED",NEXTGEN_MBL_BLOCK_FORMATTING:"NEXTGEN_MBL_BLOCK_FORMATTING",NEXTGEN_MBL_FLOOR_FORMATTING:"NEXTGEN_MBL_FLOOR_FORMATTING",NEXTGEN_MBL_INTERCOM_FORMATTING:"NEXTGEN_MBL_INTERCOM_FORMATTING",NEXTGEN_MBL_COMPANY_FORMATTING:"NEXTGEN_MBL_COMPANY_FORMATTING",NEXTGEN_MBL_DELIVERY_INSTRUCTIONS_FORMATTING:"NEXTGEN_MBL_DELIVERY_INSTRUCTIONS_FORMATTING",NEXTGEN_MBL_FLAT_FORMATTING:"NEXTGEN_MBL_FLAT_FORMATTING",NEXTGEN_MBL_ENTRANCE_FORMATTING:"NEXTGEN_MBL_ENTRANCE_FORMATTING",NEXTGEN_MBL_APARTMENT_FORMATTING:"NEXTGEN_MBL_APARTMENT_FORMATTING",NEXTGEN_MBL_APARTMENT_ERROR:"NEXTGEN_MBL_APARTMENT_ERROR",NEXTGEN_EVENT_BANNER_LESS:"NEXTGEN_EVENT_BANNER_LESS",NEXTGEN_EVENT_BANNER_MORE:"NEXTGEN_EVENT_BANNER_MORE",NEXTGEN_COMPANY:"NEXTGEN_COMPANY",address_label_duplicate:"address_label_duplicate",address_label_other:"address_label_other",address_label_other_field:"address_label_other_field",address_label_title:"address_label_title",CANCEL_ADDRESS_MODAL_CONFIRM:"CANCEL_ADDRESS_MODAL_CONFIRM",CANCEL_ADDRESS_MODAL_CONTENT:"CANCEL_ADDRESS_MODAL_CONTENT",CANCEL_ADDRESS_MODAL_REJECT:"CANCEL_ADDRESS_MODAL_REJECT",CANCEL_ADDRESS_MODAL_TITLE:"CANCEL_ADDRESS_MODAL_TITLE",CONTENT_CHAIN_DOES_NOT_DELIVER_TO_YOUR_LOCATION:"CONTENT_CHAIN_DOES_NOT_DELIVER_TO_YOUR_LOCATION",DELIVERY_INFORMATION_ADDRESS_NOT_VALID:"DELIVERY_INFORMATION_ADDRESS_NOT_VALID",NEXTGEN_building:"NEXTGEN_building",NEXTGEN_CLOSE:"NEXTGEN_CLOSE",NEXTGEN_CHECKOUT_NOT_DELIVERABLE:"NEXTGEN_CHECKOUT_NOT_DELIVERABLE",NEXTGEN_COUT_COMPANY_NAME_OPTIONAL_HINT:"NEXTGEN_COUT_COMPANY_NAME_OPTIONAL_HINT",address_phone_number_error:"address_phone_number_error",address_phone_number_hint_text:"address_phone_number_hint_text",address_phone_number_prefilled_value:"address_phone_number_prefilled_value",NEXTGEN_entrance:"NEXTGEN_entrance",NEXTGEN_FLAT_LABEL:"NEXTGEN_FLAT_LABEL",NEXTGEN_FLOOR_LABEL:"NEXTGEN_FLOOR_LABEL",address_field_block:"address_field_block",NEXTGEN_INTERCOM_LABEL:"NEXTGEN_INTERCOM_LABEL",NEXTGEN_MBL_EDIT_MAP:"NEXTGEN_MBL_EDIT_MAP",NEXTGEN_MBL_REQUIRED_ERROR:"NEXTGEN_MBL_REQUIRED_ERROR",NEXTGEN_NONE:"NEXTGEN_NONE",VALIDATIONS_ERROR_CHECKOUT_CUSTOMER_BUILDING:"VALIDATIONS_ERROR_CHECKOUT_CUSTOMER_BUILDING",NEXTGEN_address_line2:"NEXTGEN_address_line2",NEXTGEN_address_line4:"NEXTGEN_address_line4",NEXTGEN_address_line1:"NEXTGEN_address_line1",NEXTGEN_address_line3:"NEXTGEN_address_line3",NEXTGEN_address_line5:"NEXTGEN_address_line5",NEXTGEN_MBL_DF_BUILDING_TITLE:"NEXTGEN_MBL_DF_BUILDING_TITLE",NEXTGEN_MBL_DF_STREET_TITLE:"NEXTGEN_MBL_DF_STREET_TITLE",NEXTGEN_MBL_DF_STREET_ERROR:"NEXTGEN_MBL_DF_STREET_ERROR",NEXTGEN_MBL_DF_STREET:"NEXTGEN_MBL_DF_STREET",NEXTGEN_MBL_DF_BUILDING_ERROR:"NEXTGEN_MBL_DF_BUILDING_ERROR",NEXTGEN_MBL_DF_BUILDING:"NEXTGEN_MBL_DF_BUILDING",NEXTGEN_MBL_DF_AREA_TITLE:"NEXTGEN_MBL_DF_AREA_TITLE",NEXTGEN_MBL_DF_AREA_ERROR:"NEXTGEN_MBL_DF_AREA_ERROR",NEXTGEN_MBL_DF_SUBURB_ERROR:"NEXTGEN_MBL_DF_SUBURB_ERROR",NEXTGEN_MBL_DF_SUBURB:"NEXTGEN_MBL_DF_SUBURB",NEXTGEN_MBL_DF_SUBURB_TITLE:"NEXTGEN_MBL_DF_SUBURB_TITLE",NEXTGEN_POSTCODE_ERROR:"NEXTGEN_POSTCODE_ERROR",NEXTGEN_MBL_DF_AREA:"NEXTGEN_MBL_DF_AREA",NEXTGEN_MBL_DF_STREET_NUMBER_TITLE:"NEXTGEN_MBL_DF_STREET_NUMBER_TITLE",NEXTGEN_MBL_DF_STREET_NUMBER_ERROR:"NEXTGEN_MBL_DF_STREET_NUMBER_ERROR",NEXTGEN_MBL_DF_STREET_NUMBER:"NEXTGEN_MBL_DF_STREET_NUMBER",DELETE_ADDRESS_MODAL_TITLE:"DELETE_ADDRESS_MODAL_TITLE",DELETE_ADDRESS_MODAL_MESSAGE:"DELETE_ADDRESS_MODAL_MESSAGE",DELETE_ADDRESS_MODAL_CONFIRM:"DELETE_ADDRESS_MODAL_CONFIRM",DELETE_ADDRESS_MODAL_CANCEL:"DELETE_ADDRESS_MODAL_CANCEL",EDIT_ADDRESS_BUTTON_TEXT:"EDIT_ADDRESS_BUTTON_TEXT",DELETE_ADDRESS_BUTTON_TEXT:"DELETE_ADDRESS_BUTTON_TEXT",delivery_address_title:"delivery_address_title",pickup_title:"pickup_title",add_new_address_link:"add_new_address_link",cancel_link:"cancel_link",NEXTGEN_NOTE_TO_RIDER:"NEXTGEN_NOTE_TO_RIDER",INVALID_ADDRESS_ERROR:"INVALID_ADDRESS_ERROR",A11Y_ICON_DELETE:"A11Y_ICON_DELETE",A11Y_ICON_EDIT:"A11Y_ICON_EDIT",VIEW_SAVED_ADDRESS_LINK:"VIEW_SAVED_ADDRESS_LINK",SAVED_ADDRESS_MODAL_TITLE:"SAVED_ADDRESS_MODAL_TITLE",SAVED_ADDRESS_MODAL_CONFIRM:"SAVED_ADDRESS_MODAL_CONFIRM",SAVED_ADDRESS_MODAL_CANCEL:"SAVED_ADDRESS_MODAL_CANCEL",NEXTGEN_ApiAddressUnknownUser:"NEXTGEN_ApiAddressUnknownUser",NEXTGEN_ApiAddressNotValidPhoneNumber:"NEXTGEN_ApiAddressNotValidPhoneNumber",NEXTGEN_ApiAddressCustomerDoesNotExists:"NEXTGEN_ApiAddressCustomerDoesNotExists",NEXTGEN_ApiAddressUnableToDecodeInputData:"NEXTGEN_ApiAddressUnableToDecodeInputData",NEXTGEN_ApiAddressUnableToGetLatLonFromInput:"NEXTGEN_ApiAddressUnableToGetLatLonFromInput",NEXTGEN_ApiAddressUnableToGetCity:"NEXTGEN_ApiAddressUnableToGetCity",NEXTGEN_ApiAddressUnableToGetCustomerAddress:"NEXTGEN_ApiAddressUnableToGetCustomerAddress",NEXTGEN_ApiAddressUnableToEditCustomerAddress:"NEXTGEN_ApiAddressUnableToEditCustomerAddress",NEXTGEN_MBL_VALIDATION:"NEXTGEN_MBL_VALIDATION",mbl_map_submit_btn:"mbl_map_submit_btn",NEXTGEN_ADDRESS_UNSAVED_ERROR:"NEXTGEN_ADDRESS_UNSAVED_ERROR",NEXTGEN_MBL_FLOOR_OPTIONAL:"NEXTGEN_MBL_FLOOR_OPTIONAL",NEXTGEN_floor:"NEXTGEN_floor",NEXTGEN_intercom:"NEXTGEN_intercom",NEXTGEN_MBL_APARTMENT:"NEXTGEN_MBL_APARTMENT",NEXTGEN_MBL_ENTRANCE_OPTIONAL:"NEXTGEN_MBL_ENTRANCE_OPTIONAL",NEXTGEN_address_other:"NEXTGEN_address_other",NEXTGEN_postcode:"NEXTGEN_postcode",NEXTGEN_city:"NEXTGEN_city",NEXTGEN_MBL_SUBMIT:"NEXTGEN_MBL_SUBMIT",NEXTGEN_flat_number:"NEXTGEN_flat_number",NEXTGEN_country_code:"NEXTGEN_country_code",NEXTGEN_MBL_BLOC:"NEXTGEN_MBL_BLOC",navbar_locationinput_location:"navbar_locationinput_location",navbar_locationinput_tooltip:"navbar_locationinput_tooltip",location_modal_title_location_settings:"location_modal_title_location_settings",location_modal_cta_location_settings:"location_modal_cta_location_settings",location_modal_loc_settings_chrome_list:"location_modal_loc_settings_chrome_list",location_modal_loc_settings_chrome_des_list_1a:"location_modal_loc_settings_chrome_des_list_1a",location_modal_loc_settings_chrome_des_list_1b:"location_modal_loc_settings_chrome_des_list_1b",location_modal_loc_settings_chrome_des_list_2:"location_modal_loc_settings_chrome_des_list_2",location_modal_loc_settings_ios_list:"location_modal_loc_settings_ios_list",location_modal_loc_settings_ios_list_1:"location_modal_loc_settings_ios_list_1",location_modal_loc_settings_chrome_ios_list_2:"location_modal_loc_settings_chrome_ios_list_2",location_modal_loc_settings_ios_list_3:"location_modal_loc_settings_ios_list_3",location_modal_loc_settings_chrome_adr_list_1a:"location_modal_loc_settings_chrome_adr_list_1a",location_modal_loc_settings_chrome_adr_list_1b:"location_modal_loc_settings_chrome_adr_list_1b",location_modal_loc_settings_chrome_adr_list_2:"location_modal_loc_settings_chrome_adr_list_2",location_modal_loc_settings_chrome_adr_list_3:"location_modal_loc_settings_chrome_adr_list_3",location_modal_loc_settings_firefox_list:"location_modal_loc_settings_firefox_list",location_modal_loc_settings_firefox_des_list_2:"location_modal_loc_settings_firefox_des_list_2",location_modal_loc_settings_firefox_des_list_3:"location_modal_loc_settings_firefox_des_list_3",location_modal_loc_settings_firefox_des_list_4:"location_modal_loc_settings_firefox_des_list_4",location_modal_loc_settings_firefox_adr_list_1a:"location_modal_loc_settings_firefox_adr_list_1a",location_modal_loc_settings_firefox_adr_list_1b:"location_modal_loc_settings_firefox_adr_list_1b",location_modal_loc_settings_firefox_adr_list_2:"location_modal_loc_settings_firefox_adr_list_2",location_modal_loc_settings_firefox_adr_list_3:"location_modal_loc_settings_firefox_adr_list_3",location_modal_loc_settings_firefox_ios_list_2:"location_modal_loc_settings_firefox_ios_list_2",location_modal_loc_settings_safari_des_list:"location_modal_loc_settings_safari_des_list",location_modal_loc_settings_safari_des_list_1a:"location_modal_loc_settings_safari_des_list_1a",location_modal_loc_settings_safari_des_list_1b:"location_modal_loc_settings_safari_des_list_1b",location_modal_loc_settings_safari_des_list_2:"location_modal_loc_settings_safari_des_list_2",location_modal_loc_settings_safari_des_list_3:"location_modal_loc_settings_safari_des_list_3",location_modal_loc_settings_safari_ios_list_2:"location_modal_loc_settings_safari_ios_list_2",location_error_cta_no_geolocation:"location_error_cta_no_geolocation",address_details_title:"address_details_title",location_modal_loc_settings_safari_des_list_3a:"location_modal_loc_settings_safari_des_list_3a",location_modal_loc_settings_safari_des_list_3b:"location_modal_loc_settings_safari_des_list_3b",location_modal_loc_settings_firefox_des_list_1:"location_modal_loc_settings_firefox_des_list_1",location_modal_loc_settings_firefox_des_list_2a:"location_modal_loc_settings_firefox_des_list_2a",location_modal_loc_settings_firefox_des_list_2b:"location_modal_loc_settings_firefox_des_list_2b",map_noresult_suggestion_title:"map_noresult_suggestion_title",map_noresult_suggestion_text:"map_noresult_suggestion_text",map_noresult_correction_text:"map_noresult_correction_text",map_noresult_error_title:"map_noresult_error_title",map_noresult_error_text:"map_noresult_error_text",map_noresult_error_action:"map_noresult_error_action",NEXTGEN_DELIVERY_INSTRUCTIONS:"NEXTGEN_DELIVERY_INSTRUCTIONS",LOC_HYP_TOP_TITLE:"LOC_HYP_TOP_TITLE",NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_TITLE:"NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_TITLE",NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_SUBTITLE:"NEXTGEN_MBL_PROPERTY_TYPE_HOUSE_SUBTITLE",NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_TITLE:"NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_TITLE",NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_SUBTITLE:"NEXTGEN_MBL_PROPERTY_TYPE_APARTMENT_SUBTITLE",NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_TITLE:"NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_TITLE",NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_SUBTITLE:"NEXTGEN_MBL_PROPERTY_TYPE_OFFICE_SUBTITLE",NEXTGEN_MBL_PROPERTY_TYPE_OTHER_TITLE:"NEXTGEN_MBL_PROPERTY_TYPE_OTHER_TITLE",NEXTGEN_MBL_PROPERTY_TYPE_OTHER_SUBTITLE:"NEXTGEN_MBL_PROPERTY_TYPE_OTHER_SUBTITLE",LOC_NEXT:"LOC_NEXT",NEXTGEN_MBL_SECTION_map_fields_TITLE:"NEXTGEN_MBL_SECTION_map_fields_TITLE",NEXTGEN_MBL_SECTION_local_fields_TITLE:"NEXTGEN_MBL_SECTION_local_fields_TITLE",LOC_SAVE_AND_CONTINUE:"LOC_SAVE_AND_CONTINUE",type_of_place_title:"type_of_place_title",NEXTGEN_MBL_SECTION_HOUSE_BUILDING_HINT:"NEXTGEN_MBL_SECTION_HOUSE_BUILDING_HINT",NEXTGEN_MBL_SECTION_APT_BUILDING_HINT:"NEXTGEN_MBL_SECTION_APT_BUILDING_HINT",NEXTGEN_MBL_SECTION_OFFICE_BUILDING_HINT:"NEXTGEN_MBL_SECTION_OFFICE_BUILDING_HINT",NEXTGEN_MBL_SECTION_OTHER_BUILDING_HINT:"NEXTGEN_MBL_SECTION_OTHER_BUILDING_HINT",NEXTGEN_MBL_SECTION_HOUSE_FLAT_HINT:"NEXTGEN_MBL_SECTION_HOUSE_FLAT_HINT",NEXTGEN_MBL_SECTION_APT_FLAT_HINT:"NEXTGEN_MBL_SECTION_APT_FLAT_HINT",NEXTGEN_MBL_SECTION_FLAT_FLAT_HINT:"NEXTGEN_MBL_SECTION_FLAT_FLAT_HINT",NEXTGEN_MBL_SECTION_OTHER_FLAT_HINT:"NEXTGEN_MBL_SECTION_OTHER_FLAT_HINT",NEXTGEN_MBL_SECTION_HOUSE_COMPANY_HINT:"NEXTGEN_MBL_SECTION_HOUSE_COMPANY_HINT",NEXTGEN_MBL_SECTION_APT_COMPANY_HINT:"NEXTGEN_MBL_SECTION_APT_COMPANY_HINT",NEXTGEN_MBL_SECTION_FLAT_COMPANY_HINT:"NEXTGEN_MBL_SECTION_FLAT_COMPANY_HINT",NEXTGEN_MBL_SECTION_OTHER_COMPANY_HINT:"NEXTGEN_MBL_SECTION_OTHER_COMPANY_HINT",NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_HINT:"NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_HINT",NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_HINT:"NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_HINT",NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_HINT:"NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_HINT",NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_HINT:"NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_HINT",NEXTGEN_MBL_SECTION_HOUSE_FLOOR_HINT:"NEXTGEN_MBL_SECTION_HOUSE_FLOOR_HINT",NEXTGEN_MBL_SECTION_APT_FLOOR_HINT:"NEXTGEN_MBL_SECTION_APT_FLOOR_HINT",NEXTGEN_MBL_SECTION_FLAT_FLOOR_HINT:"NEXTGEN_MBL_SECTION_FLAT_FLOOR_HINT",NEXTGEN_MBL_SECTION_OTHER_FLOOR_HINT:"NEXTGEN_MBL_SECTION_OTHER_FLOOR_HINT",location_screens_delivery_is_based_on_pin:"location_screens_delivery_is_based_on_pin",location_screens_delivery_is_based_on_pin_edit_cta:"location_screens_delivery_is_based_on_pin_edit_cta",location_screens_delivery_is_based_on_pin_edit_cta_mbl:"location_screens_delivery_is_based_on_pin_edit_cta_mbl",location_screens_delivery_is_based_on_pin_three_line:"location_screens_delivery_is_based_on_pin_three_line",location_screens_pin_refinement_title:"location_screens_pin_refinement_title",location_screens_pin_refinement_subtitle:"location_screens_pin_refinement_subtitle",location_screens_map_refinement_tooltip:"location_screens_map_refinement_tooltip",location_screens_edit_text:"location_screens_edit_text",location_screens_edit_text_address:"location_screens_edit_text_address",location_screens_edit_text_message:"location_screens_edit_text_message",location_screens_search_new_address:"location_screens_search_new_address",location_screens_enter_an_address:"location_screens_enter_an_address",NEXTGEN_MBL_ADDRESS_LINE_1_HINT:"NEXTGEN_MBL_ADDRESS_LINE_1_HINT",NEXTGEN_MBL_ADDRESS_LINE_2_HINT:"NEXTGEN_MBL_ADDRESS_LINE_2_HINT",NEXTGEN_MBL_ADDRESS_LINE_3_HINT:"NEXTGEN_MBL_ADDRESS_LINE_3_HINT",NEXTGEN_MBL_DELIVERY_INSTRUCTION_HINT:"NEXTGEN_MBL_DELIVERY_INSTRUCTION_HINT",NEXTGEN_MBL_SECTION_HOUSE_BUILDING_LABEL:"NEXTGEN_MBL_SECTION_HOUSE_BUILDING_LABEL",NEXTGEN_MBL_SECTION_APT_BUILDING_LABEL:"NEXTGEN_MBL_SECTION_APT_BUILDING_LABEL",NEXTGEN_MBL_SECTION_FLAT_BUILDING_LABEL:"NEXTGEN_MBL_SECTION_FLAT_BUILDING_LABEL",NEXTGEN_MBL_SECTION_OTHER_BUILDING_LABEL:"NEXTGEN_MBL_SECTION_OTHER_BUILDING_LABEL",NEXTGEN_MBL_SECTION_HOUSE_FLAT_LABEL:"NEXTGEN_MBL_SECTION_HOUSE_FLAT_LABEL",NEXTGEN_MBL_SECTION_APT_FLAT_LABEL:"NEXTGEN_MBL_SECTION_APT_FLAT_LABEL",NEXTGEN_MBL_SECTION_FLAT_FLAT_LABEL:"NEXTGEN_MBL_SECTION_FLAT_FLAT_LABEL",NEXTGEN_MBL_SECTION_OTHER_FLAT_LABEL:"NEXTGEN_MBL_SECTION_OTHER_FLAT_LABEL",NEXTGEN_MBL_SECTION_HOUSE_COMPANY_LABEL:"NEXTGEN_MBL_SECTION_HOUSE_COMPANY_LABEL",NEXTGEN_MBL_SECTION_APT_COMPANY_LABEL:"NEXTGEN_MBL_SECTION_APT_COMPANY_LABEL",NEXTGEN_MBL_SECTION_FLAT_COMPANY_LABEL:"NEXTGEN_MBL_SECTION_FLAT_COMPANY_LABEL",NEXTGEN_MBL_SECTION_OTHER_COMPANY_LABEL:"NEXTGEN_MBL_SECTION_OTHER_COMPANY_LABEL",NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_LABEL:"NEXTGEN_MBL_SECTION_HOUSE_ADDRESSOTHER_LABEL",NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_LABEL:"NEXTGEN_MBL_SECTION_APT_ADDRESSOTHER_LABEL",NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_LABEL:"NEXTGEN_MBL_SECTION_FLAT_ADDRESSOTHER_LABEL",NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_LABEL:"NEXTGEN_MBL_SECTION_OTHER_ADDRESSOTHER_LABEL",NEXTGEN_MBL_SECTION_HOUSE_FLOOR_LABEL:"NEXTGEN_MBL_SECTION_HOUSE_FLOOR_LABEL",NEXTGEN_MBL_SECTION_APT_FLOOR_LABEL:"NEXTGEN_MBL_SECTION_APT_FLOOR_LABEL",NEXTGEN_MBL_SECTION_FLAT_FLOOR_LABEL:"NEXTGEN_MBL_SECTION_FLAT_FLOOR_LABEL",NEXTGEN_MBL_SECTION_OTHER_FLOOR_LABEL:"NEXTGEN_MBL_SECTION_OTHER_FLOOR_LABEL",NEXTGEN_MBL_ADDRESS_LINE_1_LABEL:"NEXTGEN_MBL_ADDRESS_LINE_1_LABEL",NEXTGEN_MBL_ADDRESS_LINE_2_LABEL:"NEXTGEN_MBL_ADDRESS_LINE_2_LABEL",NEXTGEN_MBL_ADDRESS_LINE_3_LABEL:"NEXTGEN_MBL_ADDRESS_LINE_3_LABEL",NEXTGEN_MBL_DELIVERY_INSTRUCTION_LABEL:"NEXTGEN_MBL_DELIVERY_INSTRUCTION_LABEL",NEXTGEN_CONFIRM:"NEXTGEN_CONFIRM",NEXTGEN_BACK:"NEXTGEN_BACK",NEXTGEN_ApiAddressUserMaxAddressLimit:"NEXTGEN_ApiAddressUserMaxAddressLimit",NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE:"NEXTGEN_LOCATION_MAP_MODAL_SUBTITLE",address_deleted_toast:"address_deleted_toast",labeled_address_deleted_toast:"labeled_address_deleted_toast",buttons_change:"buttons_change",location_input_placeholder:"location_input_placeholder",NEXTGEN_RDP_NO_LOCATION_TOOLTIP_TEXT:"NEXTGEN_RDP_NO_LOCATION_TOOLTIP_TEXT",NEXTGEN_LOCATION_ND_ERROR_CUISINE_TITLE:"NEXTGEN_LOCATION_ND_ERROR_CUISINE_TITLE",NEXTGEN_LOCATION_ND_ERROR_CUISINE_SUBTITLE:"NEXTGEN_LOCATION_ND_ERROR_CUISINE_SUBTITLE",NEXTGEN_LOCATION_ND_ERROR_CTA:"NEXTGEN_LOCATION_ND_ERROR_CTA",NEXTGEN_LOCATION_ND_ERROR_BACK:"NEXTGEN_LOCATION_ND_ERROR_BACK",NEXTGEN_PREORDER_LABEL:"NEXTGEN_PREORDER_LABEL","vendor.delivery_time_suffix":"vendor.delivery_time_suffix",LS_CHECKOUT_DI_TAG_TITLE_CONTACTLESS_DELIVERY:"LS_CHECKOUT_DI_TAG_TITLE_CONTACTLESS_DELIVERY",LS_CHECKOUT_DI_TAG_TITLE_CALL_ME:"LS_CHECKOUT_DI_TAG_TITLE_CALL_ME",LS_CHECKOUT_DI_TAG_TITLE_RING_BELL:"LS_CHECKOUT_DI_TAG_TITLE_RING_BELL",LS_CHECKOUT_DI_TAG_TOOLTIP_CONTACTLESS_DELIVERY:"LS_CHECKOUT_DI_TAG_TOOLTIP_CONTACTLESS_DELIVERY",LS_CHECKOUT_DI_TAG_TOOLTIP_CALL_ME:"LS_CHECKOUT_DI_TAG_TOOLTIP_CALL_ME",LS_CHECKOUT_DI_TAG_TOOLTIP_RING_BELL:"LS_CHECKOUT_DI_TAG_TOOLTIP_RING_BELL",NEXTGEN_MBL_DISTRICT_ERROR:"NEXTGEN_MBL_DISTRICT_ERROR",NEXTGEN_MBL_DISTRICT_HINT:"NEXTGEN_MBL_DISTRICT_HINT",NEXTGEN_MBL_DISTRICT_LABEL:"NEXTGEN_MBL_DISTRICT_LABEL"}},"17f9cbe5c3e3d1d40a4b":(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var o=s("12be0f0e9e2c7751d613");const i=()=>{o.ZP.removeLocationData()}},"823c8032fed40067fc9f":(e,t,s)=>{"use strict";s.d(t,{z:()=>a});var o=s("1e0a3e6bda82139e5a30");const i=e=>e.appConfig.FD_API_URL.replace("%country_code%",e.country),a=(e,t)=>{var s,a;return{brand:e.BRAND,address_config:{geocoder_v2_mapping:{},autocomplete_min_length:3,multiline_formatted_address:[":building :street",":city, :postcode"],autocomplete_type:e.ADDRESS_CONFIG.AUTOCOMPLETE_TYPE,required_fields:e.ADDRESS_CONFIG.REQUIRED_FIELDS,format:e.ADDRESS_CONFIG.FORMAT,valid_address_input:e.ADDRESS_CONFIG.VALID_ADDRESS_INPUT,google_api_response_fields:e.ADDRESS_CONFIG.GOOGLE_API_RESPONSE_FIELDS,compare_addresses_by:e.ADDRESS_CONFIG.COMPARE_ADDRESSES_BY,form_mappings:e.ADDRESS_CONFIG.FORM_MAPPING,default_location:e.ADDRESS_CONFIG.DEFAULT_LOCATION},countryCode:t.country,global_entity_id:e.GLOBAL_ENTITY_ID,isoCountryCode:t.isoCountryCode,features:{flags:Object.assign({},t.featureFlags)},platform:t.platform,googleMapLocale:(null===(s=e.LANGUAGE_CONFIG)||void 0===s||null===(a=s.choosenLanguage)||void 0===a?void 0:a.locale)||"en_GB",googleMapsApiKey:e.GOOGLE_MAPS_API_KEY,dhGeocodingBaseUrl:e.DH_GEOCODING_BASE_URL,dhGeocodingToken:e.DH_GEOCODING_TOKEN,apiUrl:i(t)+"/"+e.LOCATION_FD_API_URL,discoApiBaseUrl:e.DISCO_API_URL,languageId:e.LANGUAGE_ID,tplMapsApiKey:e.TPL_MAPS_API_KEY,userIpAddress:(0,o.T)(),countryCodeApiUrl:e.COUNTRY_CODE_API_URL}}},"78bee7a5e6e56ceff1d4":(e,t,s)=>{"use strict";s.d(t,{Wj:()=>i,oT:()=>o});function o(e){return"saved address"===e.object_type}const i=(e,t)=>null!==e&&e!==t},"74c6c209c888df18fef2":(e,t,s)=>{"use strict";s.d(t,{bk:()=>i,ei:()=>o});const o=["address-form","always-map","location-code-refactor"],i={ADDRESS_FORM:"address-form",ALWAYS_MAP:"always-map",LOCATION_CODE_REFACTOR:"location-code-refactor"}},"0a7f22d0dbf61610ca3e":(e,t,s)=>{"use strict";s.d(t,{z:()=>a});var o=s("69084d01d3449fc1bc27"),i=s("9302435e81c621e827fb");const a=(0,o.forwardRef)(((e,t)=>{let{height:s,width:o}=e;return(0,i.jsx)("div",{"data-testid":"icon-fallback-content",style:{height:s+"px",width:o+"px"},ref:t})}));a.displayName="FallbackContent"},cd4d3b93ae5d50644bfc:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var o=s("62360b9b8df4952ab993"),i=s("bc7e913009ead4a02f8c"),a=s("69084d01d3449fc1bc27"),r=s("1c8073b97d8ea732c56e"),n=s("0a7f22d0dbf61610ca3e"),d=s("9302435e81c621e827fb");const c=["color","type","width","height"],l=e=>{let{color:t,type:l,width:_=24,height:p=24}=e,E=(0,o.Z)(e,c);const[u,h]=(0,a.useState)(void 0),[g,T]=(0,r.YD)({threshold:0,triggerOnce:!0});return(0,a.useEffect)((()=>{if(T){const e=(0,i.ZP)({resolved:{},chunkName:()=>("deliveryhero-pd-cookbook-components-Icons-"+l).replace(/[^a-zA-Z0-9_!§$()=\-^°]+/g,"-"),isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!s.m[t]},importAsync:()=>s("e83b00b4346236a248eb")("./"+l),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return s(t)},resolve(){return s("ffcfdd5194c4a5367bef").resolve("./"+l)}},{fallback:(0,d.jsx)(n.z,{height:p,width:_,ref:g}),ssr:!1});h(e)}}),[p,T,g,l,_]),u?(0,d.jsx)(u,{"data-testid":E["data-testid"],fill:t,width:_,height:p}):(0,d.jsx)(n.z,{height:p,width:_,ref:g})}},"36038ff95b471b041b30":(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var o=s("62360b9b8df4952ab993"),i=s("1c8073b97d8ea732c56e"),a=s("0a7f22d0dbf61610ca3e"),r=s("9302435e81c621e827fb");const n=["type","width","height","className","color","fill","lazily"],d=e=>{let{type:t,width:s=24,height:d=24,className:c="",color:l,fill:_,lazily:p=!1}=e,E=(0,o.Z)(e,n);const[u,h]=(0,i.YD)({threshold:0,triggerOnce:!0});if(p&&!h)return(0,r.jsx)(a.z,{height:d,width:s,ref:u});let g;return(l||_)&&(g="fl-"+(l||_)),(0,r.jsx)("svg",Object.assign({ref:u,className:c},Object.assign({fill:_,width:s,height:d},E),{children:(0,r.jsx)("use",{className:g,href:(T=t,"/assets/icons/bbdceafe456599167e015f1eb7d57ba81758d947/"+T.replace(/(.)([A-Z])/g,"$1-$2").toLowerCase()+".svg#"+t)})}));var T}},"3ea3cb108c28f44a15b3":(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var o=s("174811872339f1d02c40"),i=s.n(o),a=s("9302435e81c621e827fb");const r=e=>{let{className:t}=e;return(0,a.jsxs)("div",{"data-testid":"loading-dots",className:i()("calcul-animation",t),children:[(0,a.jsx)("span",{className:"dot"}),(0,a.jsx)("span",{className:"dot"}),(0,a.jsx)("span",{className:"dot"})]})}},dc54da7dd1c92d237aa2:(e,t,s)=>{"use strict";s.d(t,{a:()=>o});const o=(e,t,s,o)=>{if(document.getElementById(e))return void(null==o||o());const i=document.createElement("script");i.id=e,i.onload=s,document.body.appendChild(i),i.src=t}},b94801ad171ba234e1bd:(e,t,s)=>{"use strict";s.d(t,{EI:()=>o});let o=function(e){return e.Token="token",e.RefreshToken="refresh_token",e.DeviceToken="device_token",e}({})},"8bf191ce59421ef0bd7c":(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var o=s("4d3c741c3d9bc92f4060");const i=(e,t,s)=>{if(s)return s.get(e,t);return(new o.Z).get(e,t)}},"7223e05b62f3d2685d2e":(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var o=s("5a9bedad5ca36af7a557");function i(e,t,s){const i=new Date;i.setTime(i.getTime()+s),(0,o.d)(e,t,{expires:i,path:"/"})}},"5a9bedad5ca36af7a557":(e,t,s)=>{"use strict";s.d(t,{d:()=>i});var o=s("4d3c741c3d9bc92f4060");const i=(e,t,s,i)=>{if(i)i.set(e,t,s);else{(new o.Z).set(e,t,s)}}},"9ae26086b3f3c666c836":(e,t,s)=>{"use strict";function o(e,t){void 0===t&&(t=";");const s=[];if(!e)return s;const o=e.split(/\n(?=(?:(?:[^"]*"){2})*[^"]*$)/),i=o[0].split(t).map((e=>{let t=e.trim();return t=""+t.charAt(0).toLowerCase()+t.slice(1),t}));for(let e=1;e<o.length;e++){const a={},r=new RegExp(t+'(?=(?:(?:[^"]*"){2})*[^"]*$)'),n=o[e].split(r).map((e=>e.trim()));for(let e=0;e<i.length;e++)a[i[e]]=n[e];s.push(a)}return s}s.d(t,{n:()=>o})},"4d4238b3f32bba880178":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var o=s("dfbc8be77cc25ab3b295"),i=s.n(o);const a=e=>{let t="default";return t=window.navigator.userAgent,e&&(t=e),t},r=e=>{const t=a(e),s=i().getParser(t);return{deviceType:s.getPlatformType(),deviceVendor:s.getPlatform().vendor,userBrowserType:s.getBrowserName(),userBrowserVersion:s.getBrowserVersion(),userDeviceOs:s.getOSName(),isMobileDevice:"mobile"===s.getPlatformType()}}},e57816ce2d5f3e48376c:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});var o=s("9690a67c3db3bfbecfa9"),i=s.n(o);let a;const r=()=>{if(!Boolean(a)){const e=new(i());e.registerOnce=(t,s)=>{e.removeListener(t,s),e.on(t,s)},a=e}return a}},"57080fa5dcf94632ee26":(e,t,s)=>{"use strict";s.d(t,{j:()=>o});const o=(e,t)=>t&&"string"==typeof{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}[e+"_"+t.toUpperCase()]?{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}[e+"_"+t.toUpperCase()]:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}[e]},"39294929cddaae0f4899":(e,t,s)=>{"use strict";s.d(t,{G:()=>o});const o=e=>{const t=e.split("/");let s=t.length>=2&&2===t[1].length?t[1]:"";return s=/[^a-z]{2}$/i.test(s)?"":s,s}},"282c5e83c1bba42a9b0a":(e,t,s)=>{"use strict";s.d(t,{s:()=>o});const o=function(e,t){void 0===t&&(t=location.search);return new URLSearchParams(t).get(e)}},"39ebcf09b0daeaa2646d":(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var o=s("62360b9b8df4952ab993"),i=s("a6cd228ec9fbd829fa35"),a=s.n(i),r=s("69084d01d3449fc1bc27"),n=s("9302435e81c621e827fb");const d=["as"],c="div",l=r.forwardRef((function(e,t){const{as:s=c}=e,i=(0,o.Z)(e,d),l=(0,r.useMemo)((()=>a().sanitize(e.content)),[e.content]);return(0,n.jsx)(s,Object.assign({ref:t},i,{dangerouslySetInnerHTML:{__html:l}}))}))},ddad92529b35dd108997:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});var o=s("eeff3c378ab26d13c976"),i=s("a6cd228ec9fbd829fa35"),a=s.n(i);const r=()=>(0,o.HP)((function(e,t){var s,o;return void 0===t&&(t={}),null!==(s=t)&&void 0!==s&&null!==(o=s.ADD_TAGS)&&void 0!==o&&o.includes("iframe")&&a().addHook("uponSanitizeElement",((e,t)=>{if("iframe"===t.tagName){var s;if(!(e.getAttribute("src")||"").startsWith("https://www.youtube.com/embed/"))null===(s=e.parentNode)||void 0===s||s.removeChild(e)}})),{dangerouslySetInnerHTML:{__html:a().sanitize(e,t)}}}))},f020b6b8ddbfe2de404b:(e,t,s)=>{"use strict";function o(e){return["prod","production"].includes(e)}s.d(t,{n:()=>o})},cdb14f6a7a13eea27c2f:(e,t,s)=>{"use strict";s.d(t,{s:()=>o});const o=()=>"[object process]"===Object.prototype.toString.call({env:{PUBLIC_PATH:"https://micro-assets.foodora.com",VERSION:void 0,ICON_HASH:"bbdceafe456599167e015f1eb7d57ba81758d947"}})},"8939f35e7d00fd740ed1":(e,t,s)=>{"use strict";s.d(t,{Y:()=>o});const o=()=>{try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test")}catch(e){window.localStorage={_data:{},setItem(e,t){this._data[e]=String(t)},getItem(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0},removeItem(e){return delete this._data[e]},clear(){this._data={}}}}}},eeff3c378ab26d13c976:(e,t,s)=>{"use strict";s.d(t,{HP:()=>a,zd:()=>r});var o=s("018b0e4da60cdb2fc339"),i=s.n(o);const a=(e,t)=>i()(e,t);function r(e,t,s){return e.__memoizedFns||(e.__memoizedFns=new WeakMap),e.__memoizedFns.has(t)||e.__memoizedFns.set(t,a(t,Object.assign({},s))),e.__memoizedFns.get(t)}},"9e09f7ca53b15e896edd":(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var o=s("9302435e81c621e827fb");function i(e,t,s){return void 0===s&&(s=null),(0,o.jsx)(o.Fragment,{children:e?t:s})}}}]);
//# sourceMappingURL=landing-page-microfrontend-ea1a7b25.271b0a3cfd78e292937c.esm.js.map